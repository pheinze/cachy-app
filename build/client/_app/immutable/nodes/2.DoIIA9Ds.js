import"../chunks/DsnmJJEf.js";import{i as Nt}from"../chunks/DB-q3VRw.js";import{B as ea,A as Wa,aI as ta,ak as Tn,y as Kt,aJ as pn,z as Ln,g as b,ay as Ce,ah as Qa,ai as Xa,aj as Ds,a6 as Xn,G as Ur,aK as ra,aL as ei,C as os,F as ti,aM as Dn,aN as On,D as en,aO as Os,P as tr,as as zs,aP as na,Y as ri,al as sa,H as ni,aQ as si,aR as es,an as aa,V as ia,aS as ai,aT as oa,aU as ii,aV as oi,aW as li,ar as xs,t as le,aX as ci,aY as ui,aZ as di,a_ as js,a$ as pi,W as he,b as u,am as ys,e as q,b0 as fi,b1 as hi,E as gi,b2 as vi,b3 as mi,b4 as bi,b5 as la,b6 as _i,n as ln,X as ca,R as wi,b7 as ki,p as Ct,i as ne,k as X,l as It,b8 as O,x as y,m as h,w as v,q as f,b9 as an,ag as Ss,aq as et,ba as ua,bb as da,v as nr,bc as zn,S as mn,I as Bt,bd as Bs,be as Jr,bf as Ps,T as xi,bg as yi,bh as Si,o as Pi,bi as Ti}from"../chunks/CJpVuRZm.js";import{p as oe,s as Gt,a as Oe,$ as Ft,l as jn,_ as Lr,i as Ze,b as Ts,c as Vs,d as Xe,e as Ei}from"../chunks/dbE6EfY3.js";import{C as G,a as Ge,s as J,b as Vt,r as dt,c as _e,i as se,t as be,u as Y,d as fn,e as ls,f as cs,g as ts,h as Bn,j as Rt,k as Xr,l as Ai,m as us,n as tn}from"../chunks/DrPk-dOv.js";function dr(e,t){return t}function Li(e,t,r){for(var s=e.items,n=[],a=t.length,i=0;i<a;i++)ii(t[i].e,n,!0);var o=a>0&&n.length===0&&r!==null;if(o){var c=r.parentNode;oi(c),c.append(r),s.clear(),cr(e,t[0].prev,t[a-1].next)}li(n,()=>{for(var l=0;l<a;l++){var d=t[l];o||(s.delete(d.k),cr(e,d.prev,d.next)),ia(d.e,!o)}})}function pr(e,t,r,s,n,a=null){var i=e,o={flags:t,items:new Map,first:null},c=(t&ta)!==0;if(c){var l=e;i=Kt?Tn(pn(l)):l.appendChild(ea())}Kt&&Ln();var d=null,g=!1,p=new Map,m=Ce(()=>{var A=r();return ri(A)?A:A==null?[]:na(A)}),_,k;function E(){Ri(k,_,o,p,i,n,t,s,r),a!==null&&(_.length===0?d?sa(d):d=os(()=>a(i)):d!==null&&ni(d,()=>{d=null}))}Wa(()=>{k??=xs,_=b(m);var A=_.length;if(g&&A===0)return;g=A===0;let $=!1;if(Kt){var T=Qa(i)===Xa;T!==(A===0)&&(i=Ds(),Tn(i),Xn(!1),$=!0)}if(Kt){for(var w=null,L,S=0;S<A;S++){if(Ur.nodeType===ra&&Ur.data===ei){i=Ur,$=!0,Xn(!1);break}var C=_[S],j=s(C,S);L=ds(Ur,o,w,null,C,j,S,n,t,r),o.items.set(j,L),w=L}A>0&&Tn(Ds())}if(Kt)A===0&&a&&(d=os(()=>a(i)));else if(ti()){var B=new Set,D=en;for(S=0;S<A;S+=1){C=_[S],j=s(C,S);var I=o.items.get(j)??p.get(j);I?(t&(Dn|On))!==0&&pa(I,C,S,t):(L=ds(null,o,null,null,C,j,S,n,t,r,!0),p.set(j,L)),B.add(j)}for(const[U,ee]of o.items)B.has(U)||D.skipped_effects.add(ee.e);D.add_callback(E)}else E();$&&Xn(!0),b(m)}),Kt&&(i=Ur)}function Ri(e,t,r,s,n,a,i,o,c){var l=(i&ai)!==0,d=(i&(Dn|On))!==0,g=t.length,p=r.items,m=r.first,_=m,k,E=null,A,$=[],T=[],w,L,S,C;if(l)for(C=0;C<g;C+=1)w=t[C],L=o(w,C),S=p.get(L),S!==void 0&&(S.a?.measure(),(A??=new Set).add(S));for(C=0;C<g;C+=1){if(w=t[C],L=o(w,C),S=p.get(L),S===void 0){var j=s.get(L);if(j!==void 0){s.delete(L),p.set(L,j);var B=E?E.next:_;cr(r,E,j),cr(r,j,B),rs(j,B,n),E=j}else{var D=_?_.e.nodes_start:n;E=ds(D,r,E,E===null?r.first:E.next,w,L,C,a,i,c)}p.set(L,E),$=[],T=[],_=E.next;continue}if(d&&pa(S,w,C,i),(S.e.f&es)!==0&&(sa(S.e),l&&(S.a?.unfix(),(A??=new Set).delete(S))),S!==_){if(k!==void 0&&k.has(S)){if($.length<T.length){var I=T[0],U;E=I.prev;var ee=$[0],de=$[$.length-1];for(U=0;U<$.length;U+=1)rs($[U],I,n);for(U=0;U<T.length;U+=1)k.delete(T[U]);cr(r,ee.prev,de.next),cr(r,E,ee),cr(r,de,I),_=I,E=de,C-=1,$=[],T=[]}else k.delete(S),rs(S,_,n),cr(r,S.prev,S.next),cr(r,S,E===null?r.first:E.next),cr(r,E,S),E=S;continue}for($=[],T=[];_!==null&&_.k!==L;)(_.e.f&es)===0&&(k??=new Set).add(_),T.push(_),_=_.next;if(_===null)continue;S=_}$.push(S),E=S,_=S.next}if(_!==null||k!==void 0){for(var H=k===void 0?[]:na(k);_!==null;)(_.e.f&es)===0&&H.push(_),_=_.next;var V=H.length;if(V>0){var Z=(i&ta)!==0&&g===0?n:null;if(l){for(C=0;C<V;C+=1)H[C].a?.measure();for(C=0;C<V;C+=1)H[C].a?.fix()}Li(r,H,Z)}}l&&aa(()=>{if(A!==void 0)for(S of A)S.a?.apply()}),e.first=r.first&&r.first.e,e.last=E&&E.e;for(var F of s.values())ia(F.e);s.clear()}function pa(e,t,r,s){(s&Dn)!==0&&Os(e.v,t),(s&On)!==0?Os(e.i,r):e.i=r}function ds(e,t,r,s,n,a,i,o,c,l,d){var g=(c&Dn)!==0,p=(c&si)===0,m=g?p?tr(n,!1,!1):zs(n):n,_=(c&On)===0?i:zs(i),k={i:_,v:m,k:a,a:null,e:null,prev:r,next:s};try{if(e===null){var E=document.createDocumentFragment();E.append(e=ea())}return k.e=os(()=>o(e,m,_,l),Kt),k.e.prev=r&&r.e,k.e.next=s&&s.e,r===null?d||(t.first=k):(r.next=k,r.e.next=k.e),s!==null&&(s.prev=k,s.e.prev=k.e),k}finally{}}function rs(e,t,r){for(var s=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,a=e.e.nodes_start;a!==null&&a!==s;){var i=oa(a);n.before(a),a=i}}function cr(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Pe(e,t,r=!1,s=!1,n=!1){var a=e,i="";le(()=>{var o=xs;if(i===(i=t()??"")){Kt&&Ln();return}if(o.nodes_start!==null&&(ci(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),i!==""){if(Kt){Ur.data;for(var c=Ln(),l=c;c!==null&&(c.nodeType!==ra||c.data!=="");)l=c,c=oa(c);if(c===null)throw ui(),di;js(Ur,l),a=Tn(c);return}var d=i+"";r?d=`<svg>${d}</svg>`:s&&(d=`<math>${d}</math>`);var g=pi(d);if((r||s)&&(g=pn(g)),js(pn(g),g.lastChild),r||s)for(;pn(g);)a.before(pn(g));else a.before(g)}})}function fa(e,t,r,s,n){Kt&&Ln();var a=t.$$slots?.[r],i=!1;a===!0&&(a=t.children,i=!0),a===void 0?n!==null&&n(e):a(e,i?()=>s:s)}function ke(e,t,r){he(()=>{var s=u(()=>t(e,r?.())||{});if(r&&s?.update){var n=!1,a={};ys(()=>{var i=r();q(i),n&&fi(a,i)&&(a=i,s.update(i))}),n=!0}if(s?.destroy)return()=>s.destroy()})}const $i=()=>performance.now(),_r={tick:e=>requestAnimationFrame(e),now:()=>$i(),tasks:new Set};function ha(){const e=_r.now();_r.tasks.forEach(t=>{t.c(e)||(_r.tasks.delete(t),t.f())}),_r.tasks.size!==0&&_r.tick(ha)}function Ni(e){let t;return _r.tasks.size===0&&_r.tick(ha),{promise:new Promise(r=>{_r.tasks.add(t={c:e,f:r})}),abort(){_r.tasks.delete(t)}}}function yn(e,t){la(()=>{e.dispatchEvent(new CustomEvent(t))})}function Ci(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function qs(e){const t={},r=e.split(";");for(const s of r){const[n,a]=s.split(":");if(!n||a===void 0)break;const i=Ci(n.trim());t[i]=a.trim()}return t}const Ii=e=>e;function Fi(e,t,r,s){var n=(e&bi)!==0,a="both",i,o=t.inert,c=t.style.overflow,l,d;function g(){return la(()=>i??=r()(t,s?.()??{},{direction:a}))}var p={is_global:n,in(){t.inert=o,yn(t,"introstart"),l=ps(t,g(),d,1,()=>{yn(t,"introend"),l?.abort(),l=i=void 0,t.style.overflow=c})},out(E){t.inert=!0,yn(t,"outrostart"),d=ps(t,g(),l,0,()=>{yn(t,"outroend"),E?.()})},stop:()=>{l?.abort(),d?.abort()}},m=xs;if((m.transitions??=[]).push(p),hi){var _=n;if(!_){for(var k=m.parent;k&&(k.f&gi)!==0;)for(;(k=k.parent)&&(k.f&vi)===0;);_=!k||(k.f&mi)!==0}_&&he(()=>{u(()=>p.in())})}}function ps(e,t,r,s,n){var a=s===1;if(_i(t)){var i,o=!1;return aa(()=>{if(!o){var E=t({direction:a?"in":"out"});i=ps(e,E,r,s,n)}}),{abort:()=>{o=!0,i?.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(r?.deactivate(),!t?.duration)return n(),{abort:ln,deactivate:ln,reset:ln,t:()=>s};const{delay:c=0,css:l,tick:d,easing:g=Ii}=t;var p=[];if(a&&r===void 0&&(d&&d(0,1),l)){var m=qs(l(0,1));p.push(m,m)}var _=()=>1-s,k=e.animate(p,{duration:c,fill:"forwards"});return k.onfinish=()=>{k.cancel();var E=r?.t()??1-s;r?.abort();var A=s-E,$=t.duration*Math.abs(A),T=[];if($>0){var w=!1;if(l)for(var L=Math.ceil($/16.666666666666668),S=0;S<=L;S+=1){var C=E+A*g(S/L),j=qs(l(C,1-C));T.push(j),w||=j.overflow==="hidden"}w&&(e.style.overflow="hidden"),_=()=>{var B=k.currentTime;return E+A*g(B/$)},d&&Ni(()=>{if(k.playState!=="running")return!1;var B=_();return d(B,1-B),!0})}k=e.animate(T,{duration:$,fill:"forwards"}),k.onfinish=()=>{_=()=>s,d?.(s,1-s),n()}},{abort:()=>{k&&(k.cancel(),k.effect=null,k.onfinish=ln)},deactivate:()=>{n=ln},reset:()=>{s===0&&d?.(1,0)},t:()=>_()}}function Vn(e,t,r=t){var s=new WeakSet;ca(e,"input",async n=>{var a=n?e.defaultValue:e.value;if(a=ns(e)?ss(a):a,r(a),en!==null&&s.add(en),await wi(),a!==(a=t())){var i=e.selectionStart,o=e.selectionEnd;e.value=a??"",o!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(o,e.value.length))}}),(Kt&&e.defaultValue!==e.value||u(t)==null&&e.value)&&(r(ns(e)?ss(e.value):e.value),en!==null&&s.add(en)),ys(()=>{var n=t();if(e===document.activeElement){var a=ki??en;if(s.has(a))return}ns(e)&&n===ss(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Mi(e,t,r=t){ca(e,"change",s=>{var n=s?e.defaultChecked:e.checked;r(n)}),(Kt&&e.defaultChecked!==e.checked||u(t)==null)&&r(e.checked),ys(()=>{var s=t();e.checked=!!s})}function ns(e){var t=e.type;return t==="number"||t==="range"}function ss(e){return e===""?null:+e}function Di(e){return function(...t){var r=t[0];r.target===this&&e?.apply(this,t)}}function Oi(e){return function(...t){var r=t[0];return r.preventDefault(),e?.apply(this,t)}}/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var rn=9e15,Cr=1e9,fs="0123456789abcdef",Rn="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",$n="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",hs={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-rn,maxE:rn,crypto:!1},ga,wr,ce=!0,qn="[DecimalError] ",Nr=qn+"Invalid argument: ",va=qn+"Precision limit exceeded",ma=qn+"crypto unavailable",ba="[object Decimal]",vt=Math.floor,st=Math.pow,zi=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ji=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Bi=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,_a=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rr=1e7,te=7,Vi=9007199254740991,qi=Rn.length-1,gs=$n.length-1,R={toStringTag:ba};R.absoluteValue=R.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),W(e)};R.ceil=function(){return W(new this.constructor(this),this.e+1,2)};R.clampedTo=R.clamp=function(e,t){var r,s=this,n=s.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(Nr+t);return r=s.cmp(e),r<0?e:s.cmp(t)>0?t:new n(s)};R.comparedTo=R.cmp=function(e){var t,r,s,n,a=this,i=a.d,o=(e=new a.constructor(e)).d,c=a.s,l=e.s;if(!i||!o)return!c||!l?NaN:c!==l?c:i===o?0:!i^c<0?1:-1;if(!i[0]||!o[0])return i[0]?c:o[0]?-l:0;if(c!==l)return c;if(a.e!==e.e)return a.e>e.e^c<0?1:-1;for(s=i.length,n=o.length,t=0,r=s<n?s:n;t<r;++t)if(i[t]!==o[t])return i[t]>o[t]^c<0?1:-1;return s===n?0:s>n^c<0?1:-1};R.cosine=R.cos=function(){var e,t,r=this,s=r.constructor;return r.d?r.d[0]?(e=s.precision,t=s.rounding,s.precision=e+Math.max(r.e,r.sd())+te,s.rounding=1,r=Gi(s,Sa(s,r)),s.precision=e,s.rounding=t,W(wr==2||wr==3?r.neg():r,e,t,!0)):new s(1):new s(NaN)};R.cubeRoot=R.cbrt=function(){var e,t,r,s,n,a,i,o,c,l,d=this,g=d.constructor;if(!d.isFinite()||d.isZero())return new g(d);for(ce=!1,a=d.s*st(d.s*d,1/3),!a||Math.abs(a)==1/0?(r=ft(d.d),e=d.e,(a=(e-r.length+1)%3)&&(r+=a==1||a==-2?"0":"00"),a=st(r,1/3),e=vt((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?r="5e"+e:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),s=new g(r),s.s=d.s):s=new g(a.toString()),i=(e=g.precision)+3;;)if(o=s,c=o.times(o).times(o),l=c.plus(d),s=$e(l.plus(d).times(o),l.plus(c),i+2,1),ft(o.d).slice(0,i)===(r=ft(s.d)).slice(0,i))if(r=r.slice(i-3,i+1),r=="9999"||!n&&r=="4999"){if(!n&&(W(o,e+1,0),o.times(o).times(o).eq(d))){s=o;break}i+=4,n=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(W(s,e+1,1),t=!s.times(s).times(s).eq(d));break}return ce=!0,W(s,e,g.rounding,t)};R.decimalPlaces=R.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-vt(this.e/te))*te,e=t[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};R.dividedBy=R.div=function(e){return $e(this,new this.constructor(e))};R.dividedToIntegerBy=R.divToInt=function(e){var t=this,r=t.constructor;return W($e(t,new r(e),0,1,1),r.precision,r.rounding)};R.equals=R.eq=function(e){return this.cmp(e)===0};R.floor=function(){return W(new this.constructor(this),this.e+1,3)};R.greaterThan=R.gt=function(e){return this.cmp(e)>0};R.greaterThanOrEqualTo=R.gte=function(e){var t=this.cmp(e);return t==1||t===0};R.hyperbolicCosine=R.cosh=function(){var e,t,r,s,n,a=this,i=a.constructor,o=new i(1);if(!a.isFinite())return new i(a.s?1/0:NaN);if(a.isZero())return o;r=i.precision,s=i.rounding,i.precision=r+Math.max(a.e,a.sd())+4,i.rounding=1,n=a.d.length,n<32?(e=Math.ceil(n/3),t=(1/Un(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),a=nn(i,1,a.times(t),new i(1),!0);for(var c,l=e,d=new i(8);l--;)c=a.times(a),a=o.minus(c.times(d.minus(c.times(d))));return W(a,i.precision=r,i.rounding=s,!0)};R.hyperbolicSine=R.sinh=function(){var e,t,r,s,n=this,a=n.constructor;if(!n.isFinite()||n.isZero())return new a(n);if(t=a.precision,r=a.rounding,a.precision=t+Math.max(n.e,n.sd())+4,a.rounding=1,s=n.d.length,s<3)n=nn(a,2,n,n,!0);else{e=1.4*Math.sqrt(s),e=e>16?16:e|0,n=n.times(1/Un(5,e)),n=nn(a,2,n,n,!0);for(var i,o=new a(5),c=new a(16),l=new a(20);e--;)i=n.times(n),n=n.times(o.plus(i.times(c.times(i).plus(l))))}return a.precision=t,a.rounding=r,W(n,t,r,!0)};R.hyperbolicTangent=R.tanh=function(){var e,t,r=this,s=r.constructor;return r.isFinite()?r.isZero()?new s(r):(e=s.precision,t=s.rounding,s.precision=e+7,s.rounding=1,$e(r.sinh(),r.cosh(),s.precision=e,s.rounding=t)):new s(r.s)};R.inverseCosine=R.acos=function(){var e=this,t=e.constructor,r=e.abs().cmp(1),s=t.precision,n=t.rounding;return r!==-1?r===0?e.isNeg()?ur(t,s,n):new t(0):new t(NaN):e.isZero()?ur(t,s+4,n).times(.5):(t.precision=s+6,t.rounding=1,e=new t(1).minus(e).div(e.plus(1)).sqrt().atan(),t.precision=s,t.rounding=n,e.times(2))};R.inverseHyperbolicCosine=R.acosh=function(){var e,t,r=this,s=r.constructor;return r.lte(1)?new s(r.eq(1)?0:NaN):r.isFinite()?(e=s.precision,t=s.rounding,s.precision=e+Math.max(Math.abs(r.e),r.sd())+4,s.rounding=1,ce=!1,r=r.times(r).minus(1).sqrt().plus(r),ce=!0,s.precision=e,s.rounding=t,r.ln()):new s(r)};R.inverseHyperbolicSine=R.asinh=function(){var e,t,r=this,s=r.constructor;return!r.isFinite()||r.isZero()?new s(r):(e=s.precision,t=s.rounding,s.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,s.rounding=1,ce=!1,r=r.times(r).plus(1).sqrt().plus(r),ce=!0,s.precision=e,s.rounding=t,r.ln())};R.inverseHyperbolicTangent=R.atanh=function(){var e,t,r,s,n=this,a=n.constructor;return n.isFinite()?n.e>=0?new a(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=a.precision,t=a.rounding,s=n.sd(),Math.max(s,e)<2*-n.e-1?W(new a(n),e,t,!0):(a.precision=r=s-n.e,n=$e(n.plus(1),new a(1).minus(n),r+e,1),a.precision=e+4,a.rounding=1,n=n.ln(),a.precision=e,a.rounding=t,n.times(.5))):new a(NaN)};R.inverseSine=R.asin=function(){var e,t,r,s,n=this,a=n.constructor;return n.isZero()?new a(n):(t=n.abs().cmp(1),r=a.precision,s=a.rounding,t!==-1?t===0?(e=ur(a,r+4,s).times(.5),e.s=n.s,e):new a(NaN):(a.precision=r+6,a.rounding=1,n=n.div(new a(1).minus(n.times(n)).sqrt().plus(1)).atan(),a.precision=r,a.rounding=s,n.times(2)))};R.inverseTangent=R.atan=function(){var e,t,r,s,n,a,i,o,c,l=this,d=l.constructor,g=d.precision,p=d.rounding;if(l.isFinite()){if(l.isZero())return new d(l);if(l.abs().eq(1)&&g+4<=gs)return i=ur(d,g+4,p).times(.25),i.s=l.s,i}else{if(!l.s)return new d(NaN);if(g+4<=gs)return i=ur(d,g+4,p).times(.5),i.s=l.s,i}for(d.precision=o=g+10,d.rounding=1,r=Math.min(28,o/te+2|0),e=r;e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(ce=!1,t=Math.ceil(o/te),s=1,c=l.times(l),i=new d(l),n=l;e!==-1;)if(n=n.times(c),a=i.minus(n.div(s+=2)),n=n.times(c),i=a.plus(n.div(s+=2)),i.d[t]!==void 0)for(e=t;i.d[e]===a.d[e]&&e--;);return r&&(i=i.times(2<<r-1)),ce=!0,W(i,d.precision=g,d.rounding=p,!0)};R.isFinite=function(){return!!this.d};R.isInteger=R.isInt=function(){return!!this.d&&vt(this.e/te)>this.d.length-2};R.isNaN=function(){return!this.s};R.isNegative=R.isNeg=function(){return this.s<0};R.isPositive=R.isPos=function(){return this.s>0};R.isZero=function(){return!!this.d&&this.d[0]===0};R.lessThan=R.lt=function(e){return this.cmp(e)<0};R.lessThanOrEqualTo=R.lte=function(e){return this.cmp(e)<1};R.logarithm=R.log=function(e){var t,r,s,n,a,i,o,c,l=this,d=l.constructor,g=d.precision,p=d.rounding,m=5;if(e==null)e=new d(10),t=!0;else{if(e=new d(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new d(NaN);t=e.eq(10)}if(r=l.d,l.s<0||!r||!r[0]||l.eq(1))return new d(r&&!r[0]?-1/0:l.s!=1?NaN:r?0:1/0);if(t)if(r.length>1)a=!0;else{for(n=r[0];n%10===0;)n/=10;a=n!==1}if(ce=!1,o=g+m,i=$r(l,o),s=t?Nn(d,o+10):$r(e,o),c=$e(i,s,o,1),bn(c.d,n=g,p))do if(o+=10,i=$r(l,o),s=t?Nn(d,o+10):$r(e,o),c=$e(i,s,o,1),!a){+ft(c.d).slice(n+1,n+15)+1==1e14&&(c=W(c,g+1,0));break}while(bn(c.d,n+=10,p));return ce=!0,W(c,g,p)};R.minus=R.sub=function(e){var t,r,s,n,a,i,o,c,l,d,g,p,m=this,_=m.constructor;if(e=new _(e),!m.d||!e.d)return!m.s||!e.s?e=new _(NaN):m.d?e.s=-e.s:e=new _(e.d||m.s!==e.s?m:NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(l=m.d,p=e.d,o=_.precision,c=_.rounding,!l[0]||!p[0]){if(p[0])e.s=-e.s;else if(l[0])e=new _(m);else return new _(c===3?-0:0);return ce?W(e,o,c):e}if(r=vt(e.e/te),d=vt(m.e/te),l=l.slice(),a=d-r,a){for(g=a<0,g?(t=l,a=-a,i=p.length):(t=p,r=d,i=l.length),s=Math.max(Math.ceil(o/te),i)+2,a>s&&(a=s,t.length=1),t.reverse(),s=a;s--;)t.push(0);t.reverse()}else{for(s=l.length,i=p.length,g=s<i,g&&(i=s),s=0;s<i;s++)if(l[s]!=p[s]){g=l[s]<p[s];break}a=0}for(g&&(t=l,l=p,p=t,e.s=-e.s),i=l.length,s=p.length-i;s>0;--s)l[i++]=0;for(s=p.length;s>a;){if(l[--s]<p[s]){for(n=s;n&&l[--n]===0;)l[n]=rr-1;--l[n],l[s]+=rr}l[s]-=p[s]}for(;l[--i]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=Gn(l,r),ce?W(e,o,c):e):new _(c===3?-0:0)};R.modulo=R.mod=function(e){var t,r=this,s=r.constructor;return e=new s(e),!r.d||!e.s||e.d&&!e.d[0]?new s(NaN):!e.d||r.d&&!r.d[0]?W(new s(r),s.precision,s.rounding):(ce=!1,s.modulo==9?(t=$e(r,e.abs(),0,3,1),t.s*=e.s):t=$e(r,e,0,s.modulo,1),t=t.times(e),ce=!0,r.minus(t))};R.naturalExponential=R.exp=function(){return vs(this)};R.naturalLogarithm=R.ln=function(){return $r(this)};R.negated=R.neg=function(){var e=new this.constructor(this);return e.s=-e.s,W(e)};R.plus=R.add=function(e){var t,r,s,n,a,i,o,c,l,d,g=this,p=g.constructor;if(e=new p(e),!g.d||!e.d)return!g.s||!e.s?e=new p(NaN):g.d||(e=new p(e.d||g.s===e.s?g:NaN)),e;if(g.s!=e.s)return e.s=-e.s,g.minus(e);if(l=g.d,d=e.d,o=p.precision,c=p.rounding,!l[0]||!d[0])return d[0]||(e=new p(g)),ce?W(e,o,c):e;if(a=vt(g.e/te),s=vt(e.e/te),l=l.slice(),n=a-s,n){for(n<0?(r=l,n=-n,i=d.length):(r=d,s=a,i=l.length),a=Math.ceil(o/te),i=a>i?a+1:i+1,n>i&&(n=i,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for(i=l.length,n=d.length,i-n<0&&(n=i,r=d,d=l,l=r),t=0;n;)t=(l[--n]=l[n]+d[n]+t)/rr|0,l[n]%=rr;for(t&&(l.unshift(t),++s),i=l.length;l[--i]==0;)l.pop();return e.d=l,e.e=Gn(l,s),ce?W(e,o,c):e};R.precision=R.sd=function(e){var t,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Nr+e);return r.d?(t=wa(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t};R.round=function(){var e=this,t=e.constructor;return W(new t(e),e.e+1,t.rounding)};R.sine=R.sin=function(){var e,t,r=this,s=r.constructor;return r.isFinite()?r.isZero()?new s(r):(e=s.precision,t=s.rounding,s.precision=e+Math.max(r.e,r.sd())+te,s.rounding=1,r=Ji(s,Sa(s,r)),s.precision=e,s.rounding=t,W(wr>2?r.neg():r,e,t,!0)):new s(NaN)};R.squareRoot=R.sqrt=function(){var e,t,r,s,n,a,i=this,o=i.d,c=i.e,l=i.s,d=i.constructor;if(l!==1||!o||!o[0])return new d(!l||l<0&&(!o||o[0])?NaN:o?i:1/0);for(ce=!1,l=Math.sqrt(+i),l==0||l==1/0?(t=ft(o),(t.length+c)%2==0&&(t+="0"),l=Math.sqrt(t),c=vt((c+1)/2)-(c<0||c%2),l==1/0?t="5e"+c:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),s=new d(t)):s=new d(l.toString()),r=(c=d.precision)+3;;)if(a=s,s=a.plus($e(i,a,r+2,1)).times(.5),ft(a.d).slice(0,r)===(t=ft(s.d)).slice(0,r))if(t=t.slice(r-3,r+1),t=="9999"||!n&&t=="4999"){if(!n&&(W(a,c+1,0),a.times(a).eq(i))){s=a;break}r+=4,n=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(W(s,c+1,1),e=!s.times(s).eq(i));break}return ce=!0,W(s,c,d.rounding,e)};R.tangent=R.tan=function(){var e,t,r=this,s=r.constructor;return r.isFinite()?r.isZero()?new s(r):(e=s.precision,t=s.rounding,s.precision=e+10,s.rounding=1,r=r.sin(),r.s=1,r=$e(r,new s(1).minus(r.times(r)).sqrt(),e+10,0),s.precision=e,s.rounding=t,W(wr==2||wr==4?r.neg():r,e,t,!0)):new s(NaN)};R.times=R.mul=function(e){var t,r,s,n,a,i,o,c,l,d=this,g=d.constructor,p=d.d,m=(e=new g(e)).d;if(e.s*=d.s,!p||!p[0]||!m||!m[0])return new g(!e.s||p&&!p[0]&&!m||m&&!m[0]&&!p?NaN:!p||!m?e.s/0:e.s*0);for(r=vt(d.e/te)+vt(e.e/te),c=p.length,l=m.length,c<l&&(a=p,p=m,m=a,i=c,c=l,l=i),a=[],i=c+l,s=i;s--;)a.push(0);for(s=l;--s>=0;){for(t=0,n=c+s;n>s;)o=a[n]+m[s]*p[n-s-1]+t,a[n--]=o%rr|0,t=o/rr|0;a[n]=(a[n]+t)%rr|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=Gn(a,r),ce?W(e,g.precision,g.rounding):e};R.toBinary=function(e,t){return Es(this,2,e,t)};R.toDecimalPlaces=R.toDP=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:($t(e,0,Cr),t===void 0?t=s.rounding:$t(t,0,8),W(r,e+r.e+1,t))};R.toExponential=function(e,t){var r,s=this,n=s.constructor;return e===void 0?r=fr(s,!0):($t(e,0,Cr),t===void 0?t=n.rounding:$t(t,0,8),s=W(new n(s),e+1,t),r=fr(s,!0,e+1)),s.isNeg()&&!s.isZero()?"-"+r:r};R.toFixed=function(e,t){var r,s,n=this,a=n.constructor;return e===void 0?r=fr(n):($t(e,0,Cr),t===void 0?t=a.rounding:$t(t,0,8),s=W(new a(n),e+n.e+1,t),r=fr(s,!1,e+s.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r};R.toFraction=function(e){var t,r,s,n,a,i,o,c,l,d,g,p,m=this,_=m.d,k=m.constructor;if(!_)return new k(m);if(l=r=new k(1),s=c=new k(0),t=new k(s),a=t.e=wa(_)-m.e-1,i=a%te,t.d[0]=st(10,i<0?te+i:i),e==null)e=a>0?t:l;else{if(o=new k(e),!o.isInt()||o.lt(l))throw Error(Nr+o);e=o.gt(t)?a>0?t:l:o}for(ce=!1,o=new k(ft(_)),d=k.precision,k.precision=a=_.length*te*2;g=$e(o,t,0,1,1),n=r.plus(g.times(s)),n.cmp(e)!=1;)r=s,s=n,n=l,l=c.plus(g.times(n)),c=n,n=t,t=o.minus(g.times(n)),o=n;return n=$e(e.minus(r),s,0,1,1),c=c.plus(n.times(l)),r=r.plus(n.times(s)),c.s=l.s=m.s,p=$e(l,s,a,1).minus(m).abs().cmp($e(c,r,a,1).minus(m).abs())<1?[l,s]:[c,r],k.precision=d,ce=!0,p};R.toHexadecimal=R.toHex=function(e,t){return Es(this,16,e,t)};R.toNearest=function(e,t){var r=this,s=r.constructor;if(r=new s(r),e==null){if(!r.d)return r;e=new s(1),t=s.rounding}else{if(e=new s(e),t===void 0?t=s.rounding:$t(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(ce=!1,r=$e(r,e,0,t,1).times(e),ce=!0,W(r)):(e.s=r.s,r=e),r};R.toNumber=function(){return+this};R.toOctal=function(e,t){return Es(this,8,e,t)};R.toPower=R.pow=function(e){var t,r,s,n,a,i,o=this,c=o.constructor,l=+(e=new c(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new c(st(+o,l));if(o=new c(o),o.eq(1))return o;if(s=c.precision,a=c.rounding,e.eq(1))return W(o,s,a);if(t=vt(e.e/te),t>=e.d.length-1&&(r=l<0?-l:l)<=Vi)return n=ka(c,o,r,s),e.s<0?new c(1).div(n):W(n,s,a);if(i=o.s,i<0){if(t<e.d.length-1)return new c(NaN);if((e.d[t]&1)==0&&(i=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=i,o}return r=st(+o,l),t=r==0||!isFinite(r)?vt(l*(Math.log("0."+ft(o.d))/Math.LN10+o.e+1)):new c(r+"").e,t>c.maxE+1||t<c.minE-1?new c(t>0?i/0:0):(ce=!1,c.rounding=o.s=1,r=Math.min(12,(t+"").length),n=vs(e.times($r(o,s+r)),s),n.d&&(n=W(n,s+5,1),bn(n.d,s,a)&&(t=s+10,n=W(vs(e.times($r(o,t+r)),t),t+5,1),+ft(n.d).slice(s+1,s+15)+1==1e14&&(n=W(n,s+1,0)))),n.s=i,ce=!0,c.rounding=a,W(n,s,a))};R.toPrecision=function(e,t){var r,s=this,n=s.constructor;return e===void 0?r=fr(s,s.e<=n.toExpNeg||s.e>=n.toExpPos):($t(e,1,Cr),t===void 0?t=n.rounding:$t(t,0,8),s=W(new n(s),e,t),r=fr(s,e<=s.e||s.e<=n.toExpNeg,e)),s.isNeg()&&!s.isZero()?"-"+r:r};R.toSignificantDigits=R.toSD=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):($t(e,1,Cr),t===void 0?t=s.rounding:$t(t,0,8)),W(new s(r),e,t)};R.toString=function(){var e=this,t=e.constructor,r=fr(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};R.truncated=R.trunc=function(){return W(new this.constructor(this),this.e+1,1)};R.valueOf=R.toJSON=function(){var e=this,t=e.constructor,r=fr(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};function ft(e){var t,r,s,n=e.length-1,a="",i=e[0];if(n>0){for(a+=i,t=1;t<n;t++)s=e[t]+"",r=te-s.length,r&&(a+=Rr(r)),a+=s;i=e[t],s=i+"",r=te-s.length,r&&(a+=Rr(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}function $t(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Nr+e)}function bn(e,t,r,s){var n,a,i,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=te,n=0):(n=Math.ceil((t+1)/te),t%=te),a=st(10,te-t),o=e[n]%a|0,s==null?t<3?(t==0?o=o/100|0:t==1&&(o=o/10|0),i=r<4&&o==99999||r>3&&o==49999||o==5e4||o==0):i=(r<4&&o+1==a||r>3&&o+1==a/2)&&(e[n+1]/a/100|0)==st(10,t-2)-1||(o==a/2||o==0)&&(e[n+1]/a/100|0)==0:t<4?(t==0?o=o/1e3|0:t==1?o=o/100|0:t==2&&(o=o/10|0),i=(s||r<4)&&o==9999||!s&&r>3&&o==4999):i=((s||r<4)&&o+1==a||!s&&r>3&&o+1==a/2)&&(e[n+1]/a/1e3|0)==st(10,t-3)-1,i}function En(e,t,r){for(var s,n=[0],a,i=0,o=e.length;i<o;){for(a=n.length;a--;)n[a]*=t;for(n[0]+=fs.indexOf(e.charAt(i++)),s=0;s<n.length;s++)n[s]>r-1&&(n[s+1]===void 0&&(n[s+1]=0),n[s+1]+=n[s]/r|0,n[s]%=r)}return n.reverse()}function Gi(e,t){var r,s,n;if(t.isZero())return t;s=t.d.length,s<32?(r=Math.ceil(s/3),n=(1/Un(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=nn(e,1,t.times(n),new e(1));for(var a=r;a--;){var i=t.times(t);t=i.times(i).minus(i).times(8).plus(1)}return e.precision-=r,t}var $e=(function(){function e(s,n,a){var i,o=0,c=s.length;for(s=s.slice();c--;)i=s[c]*n+o,s[c]=i%a|0,o=i/a|0;return o&&s.unshift(o),s}function t(s,n,a,i){var o,c;if(a!=i)c=a>i?1:-1;else for(o=c=0;o<a;o++)if(s[o]!=n[o]){c=s[o]>n[o]?1:-1;break}return c}function r(s,n,a,i){for(var o=0;a--;)s[a]-=o,o=s[a]<n[a]?1:0,s[a]=o*i+s[a]-n[a];for(;!s[0]&&s.length>1;)s.shift()}return function(s,n,a,i,o,c){var l,d,g,p,m,_,k,E,A,$,T,w,L,S,C,j,B,D,I,U,ee=s.constructor,de=s.s==n.s?1:-1,H=s.d,V=n.d;if(!H||!H[0]||!V||!V[0])return new ee(!s.s||!n.s||(H?V&&H[0]==V[0]:!V)?NaN:H&&H[0]==0||!V?de*0:de/0);for(c?(m=1,d=s.e-n.e):(c=rr,m=te,d=vt(s.e/m)-vt(n.e/m)),I=V.length,B=H.length,A=new ee(de),$=A.d=[],g=0;V[g]==(H[g]||0);g++);if(V[g]>(H[g]||0)&&d--,a==null?(S=a=ee.precision,i=ee.rounding):o?S=a+(s.e-n.e)+1:S=a,S<0)$.push(1),_=!0;else{if(S=S/m+2|0,g=0,I==1){for(p=0,V=V[0],S++;(g<B||p)&&S--;g++)C=p*c+(H[g]||0),$[g]=C/V|0,p=C%V|0;_=p||g<B}else{for(p=c/(V[0]+1)|0,p>1&&(V=e(V,p,c),H=e(H,p,c),I=V.length,B=H.length),j=I,T=H.slice(0,I),w=T.length;w<I;)T[w++]=0;U=V.slice(),U.unshift(0),D=V[0],V[1]>=c/2&&++D;do p=0,l=t(V,T,I,w),l<0?(L=T[0],I!=w&&(L=L*c+(T[1]||0)),p=L/D|0,p>1?(p>=c&&(p=c-1),k=e(V,p,c),E=k.length,w=T.length,l=t(k,T,E,w),l==1&&(p--,r(k,I<E?U:V,E,c))):(p==0&&(l=p=1),k=V.slice()),E=k.length,E<w&&k.unshift(0),r(T,k,w,c),l==-1&&(w=T.length,l=t(V,T,I,w),l<1&&(p++,r(T,I<w?U:V,w,c))),w=T.length):l===0&&(p++,T=[0]),$[g++]=p,l&&T[0]?T[w++]=H[j]||0:(T=[H[j]],w=1);while((j++<B||T[0]!==void 0)&&S--);_=T[0]!==void 0}$[0]||$.shift()}if(m==1)A.e=d,ga=_;else{for(g=1,p=$[0];p>=10;p/=10)g++;A.e=g+d*m-1,W(A,o?a+A.e+1:a,i,_)}return A}})();function W(e,t,r,s){var n,a,i,o,c,l,d,g,p,m=e.constructor;e:if(t!=null){if(g=e.d,!g)return e;for(n=1,o=g[0];o>=10;o/=10)n++;if(a=t-n,a<0)a+=te,i=t,d=g[p=0],c=d/st(10,n-i-1)%10|0;else if(p=Math.ceil((a+1)/te),o=g.length,p>=o)if(s){for(;o++<=p;)g.push(0);d=c=0,n=1,a%=te,i=a-te+1}else break e;else{for(d=o=g[p],n=1;o>=10;o/=10)n++;a%=te,i=a-te+n,c=i<0?0:d/st(10,n-i-1)%10|0}if(s=s||t<0||g[p+1]!==void 0||(i<0?d:d%st(10,n-i-1)),l=r<4?(c||s)&&(r==0||r==(e.s<0?3:2)):c>5||c==5&&(r==4||s||r==6&&(a>0?i>0?d/st(10,n-i):0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,l?(t-=e.e+1,g[0]=st(10,(te-t%te)%te),e.e=-t||0):g[0]=e.e=0,e;if(a==0?(g.length=p,o=1,p--):(g.length=p+1,o=st(10,te-a),g[p]=i>0?(d/st(10,n-i)%st(10,i)|0)*o:0),l)for(;;)if(p==0){for(a=1,i=g[0];i>=10;i/=10)a++;for(i=g[0]+=o,o=1;i>=10;i/=10)o++;a!=o&&(e.e++,g[0]==rr&&(g[0]=1));break}else{if(g[p]+=o,g[p]!=rr)break;g[p--]=0,o=1}for(a=g.length;g[--a]===0;)g.pop()}return ce&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function fr(e,t,r){if(!e.isFinite())return ya(e);var s,n=e.e,a=ft(e.d),i=a.length;return t?(r&&(s=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+Rr(s):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):n<0?(a="0."+Rr(-n-1)+a,r&&(s=r-i)>0&&(a+=Rr(s))):n>=i?(a+=Rr(n+1-i),r&&(s=r-n-1)>0&&(a=a+"."+Rr(s))):((s=n+1)<i&&(a=a.slice(0,s)+"."+a.slice(s)),r&&(s=r-i)>0&&(n+1===i&&(a+="."),a+=Rr(s))),a}function Gn(e,t){var r=e[0];for(t*=te;r>=10;r/=10)t++;return t}function Nn(e,t,r){if(t>qi)throw ce=!0,r&&(e.precision=r),Error(va);return W(new e(Rn),t,1,!0)}function ur(e,t,r){if(t>gs)throw Error(va);return W(new e($n),t,r,!0)}function wa(e){var t=e.length-1,r=t*te+1;if(t=e[t],t){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function Rr(e){for(var t="";e--;)t+="0";return t}function ka(e,t,r,s){var n,a=new e(1),i=Math.ceil(s/te+4);for(ce=!1;;){if(r%2&&(a=a.times(t),Us(a.d,i)&&(n=!0)),r=vt(r/2),r===0){r=a.d.length-1,n&&a.d[r]===0&&++a.d[r];break}t=t.times(t),Us(t.d,i)}return ce=!0,a}function Gs(e){return e.d[e.d.length-1]&1}function xa(e,t,r){for(var s,n,a=new e(t[0]),i=0;++i<t.length;){if(n=new e(t[i]),!n.s){a=n;break}s=a.cmp(n),(s===r||s===0&&a.s===r)&&(a=n)}return a}function vs(e,t){var r,s,n,a,i,o,c,l=0,d=0,g=0,p=e.constructor,m=p.rounding,_=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(ce=!1,c=_):c=t,o=new p(.03125);e.e>-2;)e=e.times(o),g+=5;for(s=Math.log(st(2,g))/Math.LN10*2+5|0,c+=s,r=a=i=new p(1),p.precision=c;;){if(a=W(a.times(e),c,1),r=r.times(++d),o=i.plus($e(a,r,c,1)),ft(o.d).slice(0,c)===ft(i.d).slice(0,c)){for(n=g;n--;)i=W(i.times(i),c,1);if(t==null)if(l<3&&bn(i.d,c-s,m,l))p.precision=c+=10,r=a=o=new p(1),d=0,l++;else return W(i,p.precision=_,m,ce=!0);else return p.precision=_,i}i=o}}function $r(e,t){var r,s,n,a,i,o,c,l,d,g,p,m=1,_=10,k=e,E=k.d,A=k.constructor,$=A.rounding,T=A.precision;if(k.s<0||!E||!E[0]||!k.e&&E[0]==1&&E.length==1)return new A(E&&!E[0]?-1/0:k.s!=1?NaN:E?0:k);if(t==null?(ce=!1,d=T):d=t,A.precision=d+=_,r=ft(E),s=r.charAt(0),Math.abs(a=k.e)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)k=k.times(e),r=ft(k.d),s=r.charAt(0),m++;a=k.e,s>1?(k=new A("0."+r),a++):k=new A(s+"."+r.slice(1))}else return l=Nn(A,d+2,T).times(a+""),k=$r(new A(s+"."+r.slice(1)),d-_).plus(l),A.precision=T,t==null?W(k,T,$,ce=!0):k;for(g=k,c=i=k=$e(k.minus(1),k.plus(1),d,1),p=W(k.times(k),d,1),n=3;;){if(i=W(i.times(p),d,1),l=c.plus($e(i,new A(n),d,1)),ft(l.d).slice(0,d)===ft(c.d).slice(0,d))if(c=c.times(2),a!==0&&(c=c.plus(Nn(A,d+2,T).times(a+""))),c=$e(c,new A(m),d,1),t==null)if(bn(c.d,d-_,$,o))A.precision=d+=_,l=i=k=$e(g.minus(1),g.plus(1),d,1),p=W(k.times(k),d,1),n=o=1;else return W(c,A.precision=T,$,ce=!0);else return A.precision=T,c;c=l,n+=2}}function ya(e){return String(e.s*e.s/0)}function An(e,t){var r,s,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;s++);for(n=t.length;t.charCodeAt(n-1)===48;--n);if(t=t.slice(s,n),t){if(n-=s,e.e=r=r-s-1,e.d=[],s=(r+1)%te,r<0&&(s+=te),s<n){for(s&&e.d.push(+t.slice(0,s)),n-=te;s<n;)e.d.push(+t.slice(s,s+=te));t=t.slice(s),s=te-t.length}else s-=n;for(;s--;)t+="0";e.d.push(+t),ce&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Ui(e,t){var r,s,n,a,i,o,c,l,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),_a.test(t))return An(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(ji.test(t))r=16,t=t.toLowerCase();else if(zi.test(t))r=2;else if(Bi.test(t))r=8;else throw Error(Nr+t);for(a=t.search(/p/i),a>0?(c=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),a=t.indexOf("."),i=a>=0,s=e.constructor,i&&(t=t.replace(".",""),o=t.length,a=o-a,n=ka(s,new s(r),a,a*2)),l=En(t,r,rr),d=l.length-1,a=d;l[a]===0;--a)l.pop();return a<0?new s(e.s*0):(e.e=Gn(l,d),e.d=l,ce=!1,i&&(e=$e(e,n,o*4)),c&&(e=e.times(Math.abs(c)<54?st(2,c):P.pow(2,c))),ce=!0,e)}function Ji(e,t){var r,s=t.d.length;if(s<3)return t.isZero()?t:nn(e,2,t,t);r=1.4*Math.sqrt(s),r=r>16?16:r|0,t=t.times(1/Un(5,r)),t=nn(e,2,t,t);for(var n,a=new e(5),i=new e(16),o=new e(20);r--;)n=t.times(t),t=t.times(a.plus(n.times(i.times(n).minus(o))));return t}function nn(e,t,r,s,n){var a,i,o,c,l=e.precision,d=Math.ceil(l/te);for(ce=!1,c=r.times(r),o=new e(s);;){if(i=$e(o.times(c),new e(t++*t++),l,1),o=n?s.plus(i):s.minus(i),s=$e(i.times(c),new e(t++*t++),l,1),i=o.plus(s),i.d[d]!==void 0){for(a=d;i.d[a]===o.d[a]&&a--;);if(a==-1)break}a=o,o=s,s=i,i=a}return ce=!0,i.d.length=d+1,i}function Un(e,t){for(var r=e;--t;)r*=e;return r}function Sa(e,t){var r,s=t.s<0,n=ur(e,e.precision,1),a=n.times(.5);if(t=t.abs(),t.lte(a))return wr=s?4:1,t;if(r=t.divToInt(n),r.isZero())wr=s?3:2;else{if(t=t.minus(r.times(n)),t.lte(a))return wr=Gs(r)?s?2:3:s?4:1,t;wr=Gs(r)?s?1:4:s?3:2}return t.minus(n).abs()}function Es(e,t,r,s){var n,a,i,o,c,l,d,g,p,m=e.constructor,_=r!==void 0;if(_?($t(r,1,Cr),s===void 0?s=m.rounding:$t(s,0,8)):(r=m.precision,s=m.rounding),!e.isFinite())d=ya(e);else{for(d=fr(e),i=d.indexOf("."),_?(n=2,t==16?r=r*4-3:t==8&&(r=r*3-2)):n=t,i>=0&&(d=d.replace(".",""),p=new m(1),p.e=d.length-i,p.d=En(fr(p),10,n),p.e=p.d.length),g=En(d,10,n),a=c=g.length;g[--c]==0;)g.pop();if(!g[0])d=_?"0p+0":"0";else{if(i<0?a--:(e=new m(e),e.d=g,e.e=a,e=$e(e,p,r,s,0,n),g=e.d,a=e.e,l=ga),i=g[r],o=n/2,l=l||g[r+1]!==void 0,l=s<4?(i!==void 0||l)&&(s===0||s===(e.s<0?3:2)):i>o||i===o&&(s===4||l||s===6&&g[r-1]&1||s===(e.s<0?8:7)),g.length=r,l)for(;++g[--r]>n-1;)g[r]=0,r||(++a,g.unshift(1));for(c=g.length;!g[c-1];--c);for(i=0,d="";i<c;i++)d+=fs.charAt(g[i]);if(_){if(c>1)if(t==16||t==8){for(i=t==16?4:3,--c;c%i;c++)d+="0";for(g=En(d,n,t),c=g.length;!g[c-1];--c);for(i=1,d="1.";i<c;i++)d+=fs.charAt(g[i])}else d=d.charAt(0)+"."+d.slice(1);d=d+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)d="0"+d;d="0."+d}else if(++a>c)for(a-=c;a--;)d+="0";else a<c&&(d=d.slice(0,a)+"."+d.slice(a))}d=(t==16?"0x":t==2?"0b":t==8?"0o":"")+d}return e.s<0?"-"+d:d}function Us(e,t){if(e.length>t)return e.length=t,!0}function Zi(e){return new this(e).abs()}function Yi(e){return new this(e).acos()}function Ki(e){return new this(e).acosh()}function Hi(e,t){return new this(e).plus(t)}function Wi(e){return new this(e).asin()}function Qi(e){return new this(e).asinh()}function Xi(e){return new this(e).atan()}function eo(e){return new this(e).atanh()}function to(e,t){e=new this(e),t=new this(t);var r,s=this.precision,n=this.rounding,a=s+4;return!e.s||!t.s?r=new this(NaN):!e.d&&!t.d?(r=ur(this,a,1).times(t.s>0?.25:.75),r.s=e.s):!t.d||e.isZero()?(r=t.s<0?ur(this,s,n):new this(0),r.s=e.s):!e.d||t.isZero()?(r=ur(this,a,1).times(.5),r.s=e.s):t.s<0?(this.precision=a,this.rounding=1,r=this.atan($e(e,t,a,1)),t=ur(this,a,1),this.precision=s,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan($e(e,t,a,1)),r}function ro(e){return new this(e).cbrt()}function no(e){return W(e=new this(e),e.e+1,2)}function so(e,t,r){return new this(e).clamp(t,r)}function ao(e){if(!e||typeof e!="object")throw Error(qn+"Object expected");var t,r,s,n=e.defaults===!0,a=["precision",1,Cr,"rounding",0,8,"toExpNeg",-rn,0,"toExpPos",0,rn,"maxE",0,rn,"minE",-rn,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(r=a[t],n&&(this[r]=hs[r]),(s=e[r])!==void 0)if(vt(s)===s&&s>=a[t+1]&&s<=a[t+2])this[r]=s;else throw Error(Nr+r+": "+s);if(r="crypto",n&&(this[r]=hs[r]),(s=e[r])!==void 0)if(s===!0||s===!1||s===0||s===1)if(s)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(ma);else this[r]=!1;else throw Error(Nr+r+": "+s);return this}function io(e){return new this(e).cos()}function oo(e){return new this(e).cosh()}function Pa(e){var t,r,s;function n(a){var i,o,c,l=this;if(!(l instanceof n))return new n(a);if(l.constructor=n,Js(a)){l.s=a.s,ce?!a.d||a.e>n.maxE?(l.e=NaN,l.d=null):a.e<n.minE?(l.e=0,l.d=[0]):(l.e=a.e,l.d=a.d.slice()):(l.e=a.e,l.d=a.d?a.d.slice():a.d);return}if(c=typeof a,c==="number"){if(a===0){l.s=1/a<0?-1:1,l.e=0,l.d=[0];return}if(a<0?(a=-a,l.s=-1):l.s=1,a===~~a&&a<1e7){for(i=0,o=a;o>=10;o/=10)i++;ce?i>n.maxE?(l.e=NaN,l.d=null):i<n.minE?(l.e=0,l.d=[0]):(l.e=i,l.d=[a]):(l.e=i,l.d=[a]);return}if(a*0!==0){a||(l.s=NaN),l.e=NaN,l.d=null;return}return An(l,a.toString())}if(c==="string")return(o=a.charCodeAt(0))===45?(a=a.slice(1),l.s=-1):(o===43&&(a=a.slice(1)),l.s=1),_a.test(a)?An(l,a):Ui(l,a);if(c==="bigint")return a<0?(a=-a,l.s=-1):l.s=1,An(l,a.toString());throw Error(Nr+a)}if(n.prototype=R,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=ao,n.clone=Pa,n.isDecimal=Js,n.abs=Zi,n.acos=Yi,n.acosh=Ki,n.add=Hi,n.asin=Wi,n.asinh=Qi,n.atan=Xi,n.atanh=eo,n.atan2=to,n.cbrt=ro,n.ceil=no,n.clamp=so,n.cos=io,n.cosh=oo,n.div=lo,n.exp=co,n.floor=uo,n.hypot=po,n.ln=fo,n.log=ho,n.log10=vo,n.log2=go,n.max=mo,n.min=bo,n.mod=_o,n.mul=wo,n.pow=ko,n.random=xo,n.round=yo,n.sign=So,n.sin=Po,n.sinh=To,n.sqrt=Eo,n.sub=Ao,n.sum=Lo,n.tan=Ro,n.tanh=$o,n.trunc=No,e===void 0&&(e={}),e&&e.defaults!==!0)for(s=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return n.config(e),n}function lo(e,t){return new this(e).div(t)}function co(e){return new this(e).exp()}function uo(e){return W(e=new this(e),e.e+1,3)}function po(){var e,t,r=new this(0);for(ce=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return ce=!0,new this(1/0);r=t}return ce=!0,r.sqrt()}function Js(e){return e instanceof P||e&&e.toStringTag===ba||!1}function fo(e){return new this(e).ln()}function ho(e,t){return new this(e).log(t)}function go(e){return new this(e).log(2)}function vo(e){return new this(e).log(10)}function mo(){return xa(this,arguments,-1)}function bo(){return xa(this,arguments,1)}function _o(e,t){return new this(e).mod(t)}function wo(e,t){return new this(e).mul(t)}function ko(e,t){return new this(e).pow(t)}function xo(e){var t,r,s,n,a=0,i=new this(1),o=[];if(e===void 0?e=this.precision:$t(e,1,Cr),s=Math.ceil(e/te),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(s));a<s;)n=t[a],n>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=n%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(s*=4);a<s;)n=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((t[a+3]&127)<<24),n>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(n%1e7),a+=4);a=s/4}else throw Error(ma);else for(;a<s;)o[a++]=Math.random()*1e7|0;for(s=o[--a],e%=te,s&&e&&(n=st(10,te-e),o[a]=(s/n|0)*n);o[a]===0;a--)o.pop();if(a<0)r=0,o=[0];else{for(r=-1;o[0]===0;r-=te)o.shift();for(s=1,n=o[0];n>=10;n/=10)s++;s<te&&(r-=te-s)}return i.e=r,i.d=o,i}function yo(e){return W(e=new this(e),e.e+1,this.rounding)}function So(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Po(e){return new this(e).sin()}function To(e){return new this(e).sinh()}function Eo(e){return new this(e).sqrt()}function Ao(e,t){return new this(e).sub(t)}function Lo(){var e=0,t=arguments,r=new this(t[e]);for(ce=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return ce=!0,W(r,this.precision,this.rounding)}function Ro(e){return new this(e).tan()}function $o(e){return new this(e).tanh()}function No(e){return W(e=new this(e),e.e+1,1)}R[Symbol.for("nodejs.util.inspect.custom")]=R.toString;R[Symbol.toStringTag]="Decimal";var P=R.constructor=Pa(hs);Rn=new P(Rn);$n=new P($n);function qt(e,t){let{decimalPlaces:r,maxDecimalPlaces:s,isPercentage:n=!1,noDecimals:a=!1,maxValue:i,minValue:o}=t,c=null;const l=w=>w.includes(".")?w.split(".")[1].length:0,d=w=>{const L=w.replace(",",".").trim();L===""||isNaN(parseFloat(L))?c=null:c=l(L)};d(e.value);function g(w){const L=w.target;let S=L.value;const C=S,j=L.selectionStart;S=S.replace(/,/g,".");let B="",D=!1;for(const I of S)/\d/.test(I)?B+=I:I==="."&&!D&&(B+=I,D=!0);if(S=B,S!==C){const I=S.length-C.length;if(L.value=S,j){const U=Math.max(0,j+I);L.setSelectionRange(U,U)}}d(L.value)}function p(w){const L=w.target,S=L.value.replace(",",".");try{if(S.trim()!==""){const C=new P(S);L.value=C.toString()}}catch{}}function m(w){const L=["Backspace","Delete","Tab","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"],S=w.ctrlKey||w.metaKey,C=L.includes(w.key),j=w.key==="."||w.key===",",B=/^[0-9]$/.test(w.key);if(a&&j){w.preventDefault();return}if(j&&e.value.includes(".")){w.preventDefault();return}if(!B&&!C&&!S&&!j){w.preventDefault();return}if(B){const de=s??r;if(de!==void 0){const H=e.value,V=e.selectionStart??0,Z=e.selectionEnd??0,F=H.indexOf(".");if(F!==-1&&V>F&&l(H)>=de&&V===Z){w.preventDefault();return}}}if(!(w.key==="ArrowUp"||w.key==="ArrowDown"))return;w.preventDefault();const I=w.key==="ArrowUp"?"add":"sub",U=e.value.replace(",","."),ee=e.selectionStart??U.length;if(U.trim()===""||isNaN(parseFloat(U))){_(I);return}try{k(U,I,ee)}catch(de){console.error("Error in handleKeyDown:",de)}}function _(w){let L=1;o!==void 0&&L<o&&(L=o);let S=w==="add"?new P(L):new P(o!==void 0?o:0);S=A(S);const C=S.toString();T(C,C.length)}function k(w,L,S){let C=new P(w);const j=E(w,S);let B=C[L](j);B=A(B);const D=e.value.length,I=$(B,L),U=I.length-D,ee=S+U;T(I,ee)}function E(w,L){if(r!==void 0){const D=w.indexOf(".");let I;return D===-1?I=w.length-L:L>D?I=D+1-L:I=D-L,new P(10).pow(I)}const S=w.indexOf(".");let C;S===-1?C=w.length-L:L>S?C=S+1-L:C=S-L;const j=new P(10).pow(C),B=c&&c>0?new P(10).pow(new P(-c)):new P(1);return P.max(j,B)}function A(w){return i!==void 0&&w.greaterThan(i)?new P(i):o!==void 0&&w.lessThan(o)?new P(o):w}function $(w,L){return a?w.toFixed(0):r!==void 0?w.toFixed(r):c!==null&&L==="add"?w.toFixed(c):w.toString()}function T(w,L){e.value=w,e.dispatchEvent(new Event("input",{bubbles:!0})),e.setSelectionRange(L,L)}return e.addEventListener("input",g),e.addEventListener("keydown",m),e.addEventListener("blur",p),{update(w){t={...t,...w},r=w.decimalPlaces,s=w.maxDecimalPlaces,n=w.isPercentage??n,a=w.noDecimals??a,i=w.maxValue,o=w.minValue,d(e.value)},destroy(){e.removeEventListener("input",g),e.removeEventListener("keydown",m),e.removeEventListener("blur",p)}}}function ut(e,t){return e.setAttribute("data-mtm-category",t.category),e.setAttribute("data-mtm-action",t.action),e.setAttribute("data-mtm-name",t.name),{destroy(){}}}var Co=ne('<div><h2 class="section-header" id="trade-type-label"> </h2> <div class="grid grid-cols-1 gap-4 mb-4"><div class="trade-type-switch p-1 rounded-lg flex" role="radiogroup" aria-labelledby="trade-type-label"><button role="radio"> </button> <button role="radio"> </button></div> <div class="grid grid-cols-2 gap-4"><input id="leverage-input" type="text" class="input-field w-full h-full px-4 py-2 rounded-md"/> <input id="fees-input" type="text" class="input-field w-full px-4 py-2 rounded-md"/></div></div></div>');function Io(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt();let a=oe(t,"tradeType",8),i=oe(t,"leverage",8),o=oe(t,"fees",8);function c(D){_e(I=>({...I,tradeType:D}))}const l=D=>D==null?"":String(D);function d(D){const U=D.target.value;_e(ee=>({...ee,leverage:U===""?null:parseFloat(U)}))}function g(D){const U=D.target.value;_e(ee=>({...ee,fees:U===""?null:parseFloat(U)}))}Nt();var p=Co(),m=h(p),_=h(m,!0);f(m);var k=v(m,2),E=h(k),A=h(E);let $;var T=h(A,!0);f(A),he(()=>O("click",A,()=>c(G.TRADE_TYPE_LONG))),ke(A,(D,I)=>ut?.(D,I),()=>({category:"GeneralInputs",action:"SetTradeType",name:"Long"}));var w=v(A,2);let L;var S=h(w,!0);f(w),he(()=>O("click",w,()=>c(G.TRADE_TYPE_SHORT))),ke(w,(D,I)=>ut?.(D,I),()=>({category:"GeneralInputs",action:"SetTradeType",name:"Short"})),f(E);var C=v(E,2),j=h(C);dt(j),ke(j,(D,I)=>qt?.(D,I),()=>({noDecimals:!0,maxValue:125,minValue:1})),he(()=>O("input",j,d));var B=v(j,2);dt(B),ke(B,(D,I)=>qt?.(D,I),()=>({maxDecimalPlaces:4})),he(()=>O("input",B,g)),f(C),f(k),f(p),le((D,I,U,ee,de,H,V,Z,F)=>{y(_,D),$=Ge(A,1,"long w-1/2",null,$,I),J(A,"aria-checked",(q(a()),q(G),u(()=>a()===G.TRADE_TYPE_LONG))),y(T,U),L=Ge(w,1,"short w-1/2",null,L,ee),J(w,"aria-checked",(q(a()),q(G),u(()=>a()===G.TRADE_TYPE_SHORT))),y(S,de),Vt(j,H),J(j,"placeholder",V),Vt(B,Z),J(B,"placeholder",F)},[()=>(r(),u(()=>r()("dashboard.generalInputs.header"))),()=>({active:a()===G.TRADE_TYPE_LONG}),()=>(r(),u(()=>r()("dashboard.generalInputs.longButton"))),()=>({active:a()===G.TRADE_TYPE_SHORT}),()=>(r(),u(()=>r()("dashboard.generalInputs.shortButton"))),()=>(q(i()),u(()=>l(i()))),()=>(r(),u(()=>r()("dashboard.generalInputs.leveragePlaceholder"))),()=>(q(o()),u(()=>l(o()))),()=>(r(),u(()=>r()("dashboard.generalInputs.feesPlaceholder")))]),X(e,p),It(),n()}function pt(e,t,r,s){if(!window._mtm){console.warn("Matomo Tag Manager not available. Skipping custom event.");return}const n={event:"customEvent","custom-event-category":e,"custom-event-action":t};r&&(n["custom-event-name"]=r),s!==void 0&&(n["custom-event-value"]=s),window._mtm.push(n)}const Fo="cachy-onboarding-first-input",Mo="cachy-onboarding-first-calc",Do="cachy-onboarding-first-save";function as(e,t,r,s){try{localStorage.getItem(e)||(pt(t,r,s),localStorage.setItem(e,"true"))}catch(n){console.warn(`Could not access localStorage for onboarding tracking: ${n}`)}}const sn={trackFirstInput:()=>{as(Fo,"Onboarding","FirstInteraction","FirstInput")},trackFirstCalculation:()=>{as(Mo,"Onboarding","FirstInteraction","FirstCalculation")},trackFirstJournalSave:()=>{as(Do,"Onboarding","FirstInteraction","FirstJournalSave")}};var Oo=ne('<div><h2 class="section-header !mt-6"> </h2> <div class="grid grid-cols-3 gap-4"><div><label for="account-size" class="input-label text-xs"> </label> <input id="account-size" type="text" class="input-field w-full px-4 py-2 rounded-md"/></div> <div><label for="risk-percentage" class="input-label text-xs"> </label> <input id="risk-percentage" type="text" class="input-field w-full px-4 py-2 rounded-md"/></div> <div><label for="risk-amount" class="input-label text-xs"> </label> <div class="relative"><input id="risk-amount" type="text" class="input-field w-full px-4 py-2 rounded-md pr-10" placeholder="e.g. 100"/> <button class="absolute top-1/2 right-2 -translate-y-1/2 btn-lock-icon"><!></button></div></div></div></div>');function zo(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt();let a=oe(t,"accountSize",8),i=oe(t,"riskPercentage",8),o=oe(t,"riskAmount",8),c=oe(t,"isRiskAmountLocked",8),l=oe(t,"isPositionSizeLocked",8);const d=an();function g(){d("toggleRiskAmountLock")}const p=z=>z==null?"":String(z);function m(z){const re=z.target.value;_e(ge=>({...ge,accountSize:re===""?null:parseFloat(re)}))}function _(z){const re=z.target.value;_e(ge=>({...ge,riskPercentage:re===""?null:parseFloat(re)}))}function k(z){const re=z.target.value;_e(ge=>({...ge,riskAmount:re===""?null:parseFloat(re)}))}Nt();var E=Oo(),A=h(E),$=h(A,!0);f(A);var T=v(A,2),w=h(T),L=h(w),S=h(L,!0);f(L);var C=v(L,2);dt(C),ke(C,(z,ae)=>qt?.(z,ae),()=>({maxDecimalPlaces:4})),he(()=>O("input",C,m)),he(()=>O("input",C,function(...z){sn.trackFirstInput?.apply(this,z)})),f(w);var j=v(w,2),B=h(j),D=h(B,!0);f(B);var I=v(B,2);dt(I),ke(I,(z,ae)=>qt?.(z,ae),()=>({noDecimals:!0,isPercentage:!0,maxValue:100,minValue:0})),he(()=>O("input",I,_)),he(()=>O("input",I,function(...z){sn.trackFirstInput?.apply(this,z)})),f(j);var U=v(j,2),ee=h(U),de=h(ee,!0);f(ee);var H=v(ee,2),V=h(H);dt(V),ke(V,(z,ae)=>qt?.(z,ae),()=>({maxDecimalPlaces:2})),he(()=>O("input",V,k));var Z=v(V,2),F=h(Z);Pe(F,()=>(q(c()),q(se),u(()=>c()?se.lockClosed:se.lockOpen))),f(Z),f(H),f(U),f(T),f(E),le((z,ae,re,ge,Ie,ye,Ve,Ee,at,ze)=>{y($,z),y(S,ae),Vt(C,re),J(C,"placeholder",ge),y(D,Ie),Vt(I,ye),J(I,"placeholder",Ve),I.disabled=c()||l(),y(de,Ee),Vt(V,at),V.disabled=l(),J(Z,"title",ze),Z.disabled=l()},[()=>(r(),u(()=>r()("dashboard.portfolioInputs.header"))),()=>(r(),u(()=>r()("dashboard.portfolioInputs.accountSizeLabel"))),()=>(q(a()),u(()=>p(a()))),()=>(r(),u(()=>r()("dashboard.portfolioInputs.accountSizePlaceholder"))),()=>(r(),u(()=>r()("dashboard.portfolioInputs.riskPerTradeLabel"))),()=>(q(i()),u(()=>p(i()))),()=>(r(),u(()=>r()("dashboard.portfolioInputs.riskPerTradePlaceholder"))),()=>(r(),u(()=>r()("dashboard.portfolioInputs.riskAmountLabel"))),()=>(q(o()),u(()=>p(o()))),()=>(r(),u(()=>r()("dashboard.portfolioInputs.toggleRiskAmountLockTitle")))]),O("click",Z,g),X(e,E),It(),n()}function jo(e,t){let r;return function(...s){const n=this;clearTimeout(r),r=setTimeout(()=>e.apply(n,s),t)}}function ve(e){if(e==null)return new P(0);const t=String(e).replace(",",".").trim();return t===""?new P(0):isFinite(Number(t))?new P(t):new P(0)}function De(e,t=4){if(e==null)return"-";const r=new P(e);if(r.isNaN())return"-";const s=r.toFixed(t);return new P(s).isInteger()?new P(s).toFixed(0):s.replace(/0+$/,"").replace(/\.$/,"")}const Zs={async fetchBitunixPrice(e){try{const t=await fetch(`/api/tickers?symbols=${e}`);if(!t.ok)throw new Error("apiErrors.symbolNotFound");const r=await t.json();if(r.code!==0||!r.data||r.data.length===0)throw new Error("apiErrors.invalidResponse");const s=r.data[0];return new P(s.lastPrice)}catch(t){throw t instanceof Error&&(t.message==="apiErrors.symbolNotFound"||t.message==="apiErrors.invalidResponse")?t:new Error("apiErrors.generic")}},async fetchBitunixKlines(e,t,r=15){try{const s=await fetch(`/api/klines?symbol=${e}&interval=${t}&limit=${r}`);if(!s.ok)throw new Error("apiErrors.klineError");const n=await s.json();if(n.code!==0||!n.data)throw new Error("apiErrors.invalidResponse");return n.data.map(a=>({high:new P(a.high),low:new P(a.low),close:new P(a.close)}))}catch(s){throw s instanceof Error&&(s.message==="apiErrors.klineError"||s.message==="apiErrors.invalidResponse")?s:new Error("apiErrors.generic")}}},Sn=Ss({title:"",message:"",type:"alert",defaultValue:"",isOpen:!1,resolve:null}),Ht={show(e,t,r,s=""){return new Promise(n=>{Sn.set({title:e,message:t,type:r,defaultValue:s,isOpen:!0,resolve:n})})},_handleModalConfirm(e){const t=et(Sn);t.resolve&&t.resolve(e),Sn.set({...t,isOpen:!1,resolve:null})},subscribe:Sn.subscribe};function As(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Yr=As();function Ta(e){Yr=e}var vn={exec:()=>null};function xe(e,t=""){let r=typeof e=="string"?e:e.source,s={replace:(n,a)=>{let i=typeof a=="string"?a:a.source;return i=i.replace(St.caret,"$1"),r=r.replace(n,i),s},getRegex:()=>new RegExp(r,t)};return s}var St={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},Bo=/^(?:[ \t]*(?:\n|$))+/,Vo=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,qo=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,wn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Go=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ls=/(?:[*+-]|\d{1,9}[.)])/,Ea=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Aa=xe(Ea).replace(/bull/g,Ls).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Uo=xe(Ea).replace(/bull/g,Ls).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Rs=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Jo=/^[^\n]+/,$s=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,Zo=xe(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",$s).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Yo=xe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ls).getRegex(),Jn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ns=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ko=xe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ns).replace("tag",Jn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),La=xe(Rs).replace("hr",wn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jn).getRegex(),Ho=xe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",La).getRegex(),Cs={blockquote:Ho,code:Vo,def:Zo,fences:qo,heading:Go,hr:wn,html:Ko,lheading:Aa,list:Yo,newline:Bo,paragraph:La,table:vn,text:Jo},Ys=xe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",wn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jn).getRegex(),Wo={...Cs,lheading:Uo,table:Ys,paragraph:xe(Rs).replace("hr",wn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Ys).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jn).getRegex()},Qo={...Cs,html:xe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ns).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:vn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:xe(Rs).replace("hr",wn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Aa).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Xo=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,el=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ra=/^( {2,}|\\)\n(?!\s*$)/,tl=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Zn=/[\p{P}\p{S}]/u,Is=/[\s\p{P}\p{S}]/u,$a=/[^\s\p{P}\p{S}]/u,rl=xe(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Is).getRegex(),Na=/(?!~)[\p{P}\p{S}]/u,nl=/(?!~)[\s\p{P}\p{S}]/u,sl=/(?:[^\s\p{P}\p{S}]|~)/u,al=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,Ca=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,il=xe(Ca,"u").replace(/punct/g,Zn).getRegex(),ol=xe(Ca,"u").replace(/punct/g,Na).getRegex(),Ia="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",ll=xe(Ia,"gu").replace(/notPunctSpace/g,$a).replace(/punctSpace/g,Is).replace(/punct/g,Zn).getRegex(),cl=xe(Ia,"gu").replace(/notPunctSpace/g,sl).replace(/punctSpace/g,nl).replace(/punct/g,Na).getRegex(),ul=xe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,$a).replace(/punctSpace/g,Is).replace(/punct/g,Zn).getRegex(),dl=xe(/\\(punct)/,"gu").replace(/punct/g,Zn).getRegex(),pl=xe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),fl=xe(Ns).replace("(?:-->|$)","-->").getRegex(),hl=xe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",fl).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Cn=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,gl=xe(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Cn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Fa=xe(/^!?\[(label)\]\[(ref)\]/).replace("label",Cn).replace("ref",$s).getRegex(),Ma=xe(/^!?\[(ref)\](?:\[\])?/).replace("ref",$s).getRegex(),vl=xe("reflink|nolink(?!\\()","g").replace("reflink",Fa).replace("nolink",Ma).getRegex(),Fs={_backpedal:vn,anyPunctuation:dl,autolink:pl,blockSkip:al,br:Ra,code:el,del:vn,emStrongLDelim:il,emStrongRDelimAst:ll,emStrongRDelimUnd:ul,escape:Xo,link:gl,nolink:Ma,punctuation:rl,reflink:Fa,reflinkSearch:vl,tag:hl,text:tl,url:vn},ml={...Fs,link:xe(/^!?\[(label)\]\((.*?)\)/).replace("label",Cn).getRegex(),reflink:xe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Cn).getRegex()},ms={...Fs,emStrongRDelimAst:cl,emStrongLDelim:ol,url:xe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},bl={...ms,br:xe(Ra).replace("{2,}","*").getRegex(),text:xe(ms.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Pn={normal:Cs,gfm:Wo,pedantic:Qo},cn={normal:Fs,gfm:ms,breaks:bl,pedantic:ml},_l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ks=e=>_l[e];function lr(e,t){if(t){if(St.escapeTest.test(e))return e.replace(St.escapeReplace,Ks)}else if(St.escapeTestNoEncode.test(e))return e.replace(St.escapeReplaceNoEncode,Ks);return e}function Hs(e){try{e=encodeURI(e).replace(St.percentDecode,"%")}catch{return null}return e}function Ws(e,t){let r=e.replace(St.findPipe,(a,i,o)=>{let c=!1,l=i;for(;--l>=0&&o[l]==="\\";)c=!c;return c?"|":" |"}),s=r.split(St.splitPipe),n=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),t)if(s.length>t)s.splice(t);else for(;s.length<t;)s.push("");for(;n<s.length;n++)s[n]=s[n].trim().replace(St.slashPipe,"|");return s}function un(e,t,r){let s=e.length;if(s===0)return"";let n=0;for(;n<s&&e.charAt(s-n-1)===t;)n++;return e.slice(0,s-n)}function wl(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let s=0;s<e.length;s++)if(e[s]==="\\")s++;else if(e[s]===t[0])r++;else if(e[s]===t[1]&&(r--,r<0))return s;return r>0?-2:-1}function Qs(e,t,r,s,n){let a=t.href,i=t.title||null,o=e[1].replace(n.other.outputLinkReplace,"$1");s.state.inLink=!0;let c={type:e[0].charAt(0)==="!"?"image":"link",raw:r,href:a,title:i,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,c}function kl(e,t,r){let s=e.match(r.other.indentCodeCompensation);if(s===null)return t;let n=s[1];return t.split(`
`).map(a=>{let i=a.match(r.other.beginningSpace);if(i===null)return a;let[o]=i;return o.length>=n.length?a.slice(n.length):a}).join(`
`)}var In=class{options;rules;lexer;constructor(e){this.options=e||Yr}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:un(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],s=kl(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let s=un(r,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(r=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:un(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=un(t[0],`
`).split(`
`),s="",n="",a=[];for(;r.length>0;){let i=!1,o=[],c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))o.push(r[c]),i=!0;else if(!i)o.push(r[c]);else break;r=r.slice(c);let l=o.join(`
`),d=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${l}`:l,n=n?`${n}
${d}`:d;let g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,a,!0),this.lexer.state.top=g,r.length===0)break;let p=a.at(-1);if(p?.type==="code")break;if(p?.type==="blockquote"){let m=p,_=m.raw+`
`+r.join(`
`),k=this.blockquote(_);a[a.length-1]=k,s=s.substring(0,s.length-m.raw.length)+k.raw,n=n.substring(0,n.length-m.text.length)+k.text;break}else if(p?.type==="list"){let m=p,_=m.raw+`
`+r.join(`
`),k=this.list(_);a[a.length-1]=k,s=s.substring(0,s.length-p.raw.length)+k.raw,n=n.substring(0,n.length-m.raw.length)+k.raw,r=_.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:a,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),s=r.length>1,n={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");let a=this.rules.other.listItemRegex(r),i=!1;for(;e;){let c=!1,l="",d="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let g=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,A=>" ".repeat(3*A.length)),p=e.split(`
`,1)[0],m=!g.trim(),_=0;if(this.options.pedantic?(_=2,d=g.trimStart()):m?_=t[1].length+1:(_=t[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,d=g.slice(_),_+=t[1].length),m&&this.rules.other.blankLine.test(p)&&(l+=p+`
`,e=e.substring(p.length+1),c=!0),!c){let A=this.rules.other.nextBulletRegex(_),$=this.rules.other.hrRegex(_),T=this.rules.other.fencesBeginRegex(_),w=this.rules.other.headingBeginRegex(_),L=this.rules.other.htmlBeginRegex(_);for(;e;){let S=e.split(`
`,1)[0],C;if(p=S,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),C=p):C=p.replace(this.rules.other.tabCharGlobal,"    "),T.test(p)||w.test(p)||L.test(p)||A.test(p)||$.test(p))break;if(C.search(this.rules.other.nonSpaceChar)>=_||!p.trim())d+=`
`+C.slice(_);else{if(m||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(g)||w.test(g)||$.test(g))break;d+=`
`+p}!m&&!p.trim()&&(m=!0),l+=S+`
`,e=e.substring(S.length+1),g=C.slice(_)}}n.loose||(i?n.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(i=!0));let k=null,E;this.options.gfm&&(k=this.rules.other.listIsTask.exec(d),k&&(E=k[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:l,task:!!k,checked:E,loose:!1,text:d,tokens:[]}),n.raw+=l}let o=n.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let c=0;c<n.items.length;c++)if(this.lexer.state.top=!1,n.items[c].tokens=this.lexer.blockTokens(n.items[c].text,[]),!n.loose){let l=n.items[c].tokens.filter(g=>g.type==="space"),d=l.length>0&&l.some(g=>this.rules.other.anyLine.test(g.raw));n.loose=d}if(n.loose)for(let c=0;c<n.items.length;c++)n.items[c].loose=!0;return n}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:s,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=Ws(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===s.length){for(let i of s)this.rules.other.tableAlignRight.test(i)?a.align.push("right"):this.rules.other.tableAlignCenter.test(i)?a.align.push("center"):this.rules.other.tableAlignLeft.test(i)?a.align.push("left"):a.align.push(null);for(let i=0;i<r.length;i++)a.header.push({text:r[i],tokens:this.lexer.inline(r[i]),header:!0,align:a.align[i]});for(let i of n)a.rows.push(Ws(i,a.header.length).map((o,c)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:a.align[c]})));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let a=un(r.slice(0,-1),"\\");if((r.length-a.length)%2===0)return}else{let a=wl(t[2],"()");if(a===-2)return;if(a>-1){let i=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let s=t[2],n="";if(this.options.pedantic){let a=this.rules.other.pedanticHrefTitle.exec(s);a&&(s=a[1],n=a[3])}else n=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?s=s.slice(1):s=s.slice(1,-1)),Qs(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let s=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[s.toLowerCase()];if(!n){let a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return Qs(r,n,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!(!s||s[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!r||this.rules.inline.punctuation.exec(r))){let n=[...s[0]].length-1,a,i,o=n,c=0,l=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+n);(s=l.exec(t))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(i=[...a].length,s[3]||s[4]){o+=i;continue}else if((s[5]||s[6])&&n%3&&!((n+i)%3)){c+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+c);let d=[...s[0]][0].length,g=e.slice(0,n+s.index+d+i);if(Math.min(n,i)%2){let m=g.slice(1,-1);return{type:"em",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}let p=g.slice(2,-2);return{type:"strong",raw:g,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(r),n=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return s&&n&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,s;return t[2]==="@"?(r=t[1],s="mailto:"+r):(r=t[1],s=r),{type:"link",raw:t[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,s;if(t[2]==="@")r=t[0],s="mailto:"+r;else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0]);r=t[0],t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},kr=class bs{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Yr,this.options.tokenizer=this.options.tokenizer||new In,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={other:St,block:Pn.normal,inline:cn.normal};this.options.pedantic?(r.block=Pn.pedantic,r.inline=cn.pedantic):this.options.gfm&&(r.block=Pn.gfm,this.options.breaks?r.inline=cn.breaks:r.inline=cn.gfm),this.tokenizer.rules=r}static get rules(){return{block:Pn,inline:cn}}static lex(t,r){return new bs(r).lex(t)}static lexInline(t,r){return new bs(r).inlineTokens(t)}lex(t){t=t.replace(St.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let s=this.inlineQueue[r];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[],s=!1){for(this.options.pedantic&&(t=t.replace(St.tabCharGlobal,"    ").replace(St.spaceLine,""));t;){let n;if(this.options.extensions?.block?.some(i=>(n=i.call({lexer:this},t,r))?(t=t.substring(n.raw.length),r.push(n),!0):!1))continue;if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length);let i=r.at(-1);n.raw.length===1&&i!==void 0?i.raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length);let i=r.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.at(-1).src=i.text):r.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length);let i=r.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title},r.push(n));continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),r.push(n);continue}let a=t;if(this.options.extensions?.startBlock){let i=1/0,o=t.slice(1),c;this.options.extensions.startBlock.forEach(l=>{c=l.call({lexer:this},o),typeof c=="number"&&c>=0&&(i=Math.min(i,c))}),i<1/0&&i>=0&&(a=t.substring(0,i+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){let i=r.at(-1);s&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):r.push(n),s=a.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length);let i=r.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):r.push(n);continue}if(t){let i="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let s=t,n=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)o.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,n.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);s=this.options.hooks?.emStrongMask?.call({lexer:this},s)??s;let a=!1,i="";for(;t;){a||(i=""),a=!1;let o;if(this.options.extensions?.inline?.some(l=>(o=l.call({lexer:this},t,r))?(t=t.substring(o.raw.length),r.push(o),!0):!1))continue;if(o=this.tokenizer.escape(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.tag(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.link(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(o.raw.length);let l=r.at(-1);o.type==="text"&&l?.type==="text"?(l.raw+=o.raw,l.text+=o.text):r.push(o);continue}if(o=this.tokenizer.emStrong(t,s,i)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.codespan(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.br(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.del(t)){t=t.substring(o.raw.length),r.push(o);continue}if(o=this.tokenizer.autolink(t)){t=t.substring(o.raw.length),r.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(t))){t=t.substring(o.raw.length),r.push(o);continue}let c=t;if(this.options.extensions?.startInline){let l=1/0,d=t.slice(1),g;this.options.extensions.startInline.forEach(p=>{g=p.call({lexer:this},d),typeof g=="number"&&g>=0&&(l=Math.min(l,g))}),l<1/0&&l>=0&&(c=t.substring(0,l+1))}if(o=this.tokenizer.inlineText(c)){t=t.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(i=o.raw.slice(-1)),a=!0;let l=r.at(-1);l?.type==="text"?(l.raw+=o.raw,l.text+=o.text):r.push(o);continue}if(t){let l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return r}},Fn=class{options;parser;constructor(e){this.options=e||Yr}space(e){return""}code({text:e,lang:t,escaped:r}){let s=(t||"").match(St.notSpaceStart)?.[0],n=e.replace(St.endingNewline,"")+`
`;return s?'<pre><code class="language-'+lr(s)+'">'+(r?n:lr(n,!0))+`</code></pre>
`:"<pre><code>"+(r?n:lr(n,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,s="";for(let i=0;i<e.items.length;i++){let o=e.items[i];s+=this.listitem(o)}let n=t?"ol":"ul",a=t&&r!==1?' start="'+r+'"':"";return"<"+n+a+`>
`+s+"</"+n+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+lr(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let n=0;n<e.header.length;n++)r+=this.tablecell(e.header[n]);t+=this.tablerow({text:r});let s="";for(let n=0;n<e.rows.length;n++){let a=e.rows[n];r="";for(let i=0;i<a.length;i++)r+=this.tablecell(a[i]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${lr(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let s=this.parser.parseInline(r),n=Hs(e);if(n===null)return s;e=n;let a='<a href="'+e+'"';return t&&(a+=' title="'+lr(t)+'"'),a+=">"+s+"</a>",a}image({href:e,title:t,text:r,tokens:s}){s&&(r=this.parser.parseInline(s,this.parser.textRenderer));let n=Hs(e);if(n===null)return lr(r);e=n;let a=`<img src="${e}" alt="${r}"`;return t&&(a+=` title="${lr(t)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:lr(e.text)}},Ms=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},xr=class _s{options;renderer;textRenderer;constructor(t){this.options=t||Yr,this.options.renderer=this.options.renderer||new Fn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ms}static parse(t,r){return new _s(r).parse(t)}static parseInline(t,r){return new _s(r).parseInline(t)}parse(t,r=!0){let s="";for(let n=0;n<t.length;n++){let a=t[n];if(this.options.extensions?.renderers?.[a.type]){let o=a,c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(o.type)){s+=c||"";continue}}let i=a;switch(i.type){case"space":{s+=this.renderer.space(i);continue}case"hr":{s+=this.renderer.hr(i);continue}case"heading":{s+=this.renderer.heading(i);continue}case"code":{s+=this.renderer.code(i);continue}case"table":{s+=this.renderer.table(i);continue}case"blockquote":{s+=this.renderer.blockquote(i);continue}case"list":{s+=this.renderer.list(i);continue}case"html":{s+=this.renderer.html(i);continue}case"def":{s+=this.renderer.def(i);continue}case"paragraph":{s+=this.renderer.paragraph(i);continue}case"text":{let o=i,c=this.renderer.text(o);for(;n+1<t.length&&t[n+1].type==="text";)o=t[++n],c+=`
`+this.renderer.text(o);r?s+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):s+=c;continue}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}parseInline(t,r=this.renderer){let s="";for(let n=0;n<t.length;n++){let a=t[n];if(this.options.extensions?.renderers?.[a.type]){let o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=o||"";continue}}let i=a;switch(i.type){case"escape":{s+=r.text(i);break}case"html":{s+=r.html(i);break}case"link":{s+=r.link(i);break}case"image":{s+=r.image(i);break}case"strong":{s+=r.strong(i);break}case"em":{s+=r.em(i);break}case"codespan":{s+=r.codespan(i);break}case"br":{s+=r.br(i);break}case"del":{s+=r.del(i);break}case"text":{s+=r.text(i);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}},hn=class{options;block;constructor(e){this.options=e||Yr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?kr.lex:kr.lexInline}provideParser(){return this.block?xr.parse:xr.parseInline}},xl=class{defaults=As();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=xr;Renderer=Fn;TextRenderer=Ms;Lexer=kr;Tokenizer=In;Hooks=hn;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let s of e)switch(r=r.concat(t.call(this,s)),s.type){case"table":{let n=s;for(let a of n.header)r=r.concat(this.walkTokens(a.tokens,t));for(let a of n.rows)for(let i of a)r=r.concat(this.walkTokens(i.tokens,t));break}case"list":{let n=s;r=r.concat(this.walkTokens(n.items,t));break}default:{let n=s;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(a=>{let i=n[a].flat(1/0);r=r.concat(this.walkTokens(i,t))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let a=t.renderers[n.name];a?t.renderers[n.name]=function(...i){let o=n.renderer.apply(this,i);return o===!1&&(o=a.apply(this,i)),o}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let a=t[n.level];a?a.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),s.extensions=t),r.renderer){let n=this.defaults.renderer||new Fn(this.defaults);for(let a in r.renderer){if(!(a in n))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;let i=a,o=r.renderer[i],c=n[i];n[i]=(...l)=>{let d=o.apply(n,l);return d===!1&&(d=c.apply(n,l)),d||""}}s.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new In(this.defaults);for(let a in r.tokenizer){if(!(a in n))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;let i=a,o=r.tokenizer[i],c=n[i];n[i]=(...l)=>{let d=o.apply(n,l);return d===!1&&(d=c.apply(n,l)),d}}s.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new hn;for(let a in r.hooks){if(!(a in n))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;let i=a,o=r.hooks[i],c=n[i];hn.passThroughHooks.has(a)?n[i]=l=>{if(this.defaults.async&&hn.passThroughHooksRespectAsync.has(a))return Promise.resolve(o.call(n,l)).then(g=>c.call(n,g));let d=o.call(n,l);return c.call(n,d)}:n[i]=(...l)=>{let d=o.apply(n,l);return d===!1&&(d=c.apply(n,l)),d}}s.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,a=r.walkTokens;s.walkTokens=function(i){let o=[];return o.push(a.call(this,i)),n&&(o=o.concat(n.call(this,i))),o}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return kr.lex(e,t??this.defaults)}parser(e,t){return xr.parse(e,t??this.defaults)}parseMarkdown(e){return(t,r)=>{let s={...r},n={...this.defaults,...s},a=this.onError(!!n.silent,!!n.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=e);let i=n.hooks?n.hooks.provideLexer():e?kr.lex:kr.lexInline,o=n.hooks?n.hooks.provideParser():e?xr.parse:xr.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(t):t).then(c=>i(c,n)).then(c=>n.hooks?n.hooks.processAllTokens(c):c).then(c=>n.walkTokens?Promise.all(this.walkTokens(c,n.walkTokens)).then(()=>c):c).then(c=>o(c,n)).then(c=>n.hooks?n.hooks.postprocess(c):c).catch(a);try{n.hooks&&(t=n.hooks.preprocess(t));let c=i(t,n);n.hooks&&(c=n.hooks.processAllTokens(c)),n.walkTokens&&this.walkTokens(c,n.walkTokens);let l=o(c,n);return n.hooks&&(l=n.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let s="<p>An error occurred:</p><pre>"+lr(r.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(r);throw r}}},Zr=new xl;function Te(e,t){return Zr.parse(e,t)}Te.options=Te.setOptions=function(e){return Zr.setOptions(e),Te.defaults=Zr.defaults,Ta(Te.defaults),Te};Te.getDefaults=As;Te.defaults=Yr;Te.use=function(...e){return Zr.use(...e),Te.defaults=Zr.defaults,Ta(Te.defaults),Te};Te.walkTokens=function(e,t){return Zr.walkTokens(e,t)};Te.parseInline=Zr.parseInline;Te.Parser=xr;Te.parser=xr.parse;Te.Renderer=Fn;Te.TextRenderer=Ms;Te.Lexer=kr;Te.lexer=kr.lex;Te.Tokenizer=In;Te.Hooks=hn;Te.parse=Te;Te.options;Te.setOptions;Te.use;Te.walkTokens;Te.parseInline;xr.parse;kr.lex;async function gn(e){const t=et(jn),r=`/instructions/${e}.${t}.md`;try{const s=Object.assign({"/src/instructions/changelog.de.md":()=>Lr(()=>import("../chunks/Dd0lFwON.js"),[],import.meta.url).then(d=>d.default),"/src/instructions/changelog.en.md":()=>Lr(()=>import("../chunks/SponNIN1.js"),[],import.meta.url).then(d=>d.default),"/src/instructions/dashboard.de.md":()=>Lr(()=>import("../chunks/yUlmeqCQ.js"),[],import.meta.url).then(d=>d.default),"/src/instructions/dashboard.en.md":()=>Lr(()=>import("../chunks/BgB7N8k4.js"),[],import.meta.url).then(d=>d.default),"/src/instructions/guide.de.md":()=>Lr(()=>import("../chunks/BIWJYjfz.js"),[],import.meta.url).then(d=>d.default),"/src/instructions/guide.en.md":()=>Lr(()=>import("../chunks/BnM7hFkO.js"),[],import.meta.url).then(d=>d.default),"/src/instructions/journal.de.md":()=>Lr(()=>import("../chunks/C9oNwmkQ.js"),[],import.meta.url).then(d=>d.default),"/src/instructions/journal.en.md":()=>Lr(()=>import("../chunks/ufxX9jyN.js"),[],import.meta.url).then(d=>d.default)}),n=`/src${r}`;if(!s[n])throw new Error(`Markdown file not found: ${n}`);const a=await s[n](),i=await Te(a),c=a.split(`
`)[0].match(/^#\s*(.*)/),l=c?c[1]:"";return{html:i,title:l}}catch(s){return console.error(`Failed to load or parse markdown for ${e} in ${t}:`,s),{html:"<p>Error loading instructions.</p>",title:"Error"}}}const yl={showReadme:async e=>{const t=await gn(e);let r;e==="dashboard"?r="dashboard.instructionsTitle":e==="journal"?r="journal.showJournalInstructionsTitle":r="app.changelogTitle";const s=et(Ft)(r);Ht.show(s,t.html,"alert")}};function Sl(e,t,r){const s=[],n=[],a=t.map(p=>ve(p.price)).filter(p=>p.gt(0)),i=[ve(e.entryPrice),ve(e.stopLossPrice),...a];if(i.some(p=>p.lte(0)))return{visualBarContent:s,markers:n};const o=P.max(...i),c=P.min(...i),l=o.minus(c);if(l.lte(0))return{visualBarContent:s,markers:n};const d=ve(e.stopLossPrice).minus(c).dividedBy(l).times(100),g=ve(e.entryPrice).minus(c).dividedBy(l).times(100);return e.tradeType===G.TRADE_TYPE_LONG?(s.push({type:"loss-zone",style:{left:`${d}%`,width:`${g.minus(d)}%`}}),s.push({type:"gain-zone",style:{left:`${g}%`,width:`${new P(100).minus(g)}%`}})):(s.push({type:"gain-zone",style:{left:"0",width:`${g}%`}}),s.push({type:"loss-zone",style:{left:`${g}%`,width:`${d.minus(g)}%`}})),n.push({pos:d,label:"SL",isEntry:!1}),n.push({pos:g,label:"Einstieg",isEntry:!0}),r.forEach(p=>{const _=ve(t[p.index].price).minus(c).dividedBy(l).times(100);n.push({pos:_,label:`TP${p.index+1}`,isEntry:!1,index:p.index,rr:p.riskRewardRatio})}),{visualBarContent:s,markers:n}}const Gr={calculateBaseMetrics(e,t){const r=e.accountSize.times(e.riskPercentage.div(100)),s=e.entryPrice.minus(e.stopLossPrice).abs();if(s.isZero())return null;const n=r.div(s),a=n.times(e.entryPrice),i=e.leverage.gt(0)?a.div(e.leverage):a,o=a.times(e.fees.div(100)),c=n.times(e.stopLossPrice).times(e.fees.div(100)),l=r.plus(o).plus(c),d=e.fees.div(100),g=t===G.TRADE_TYPE_LONG?e.entryPrice.times(d.plus(1)).div(new P(1).minus(d)):e.entryPrice.times(new P(1).minus(d)).div(d.plus(1)),p=e.leverage.gt(0)?t===G.TRADE_TYPE_LONG?e.entryPrice.times(new P(1).minus(new P(1).div(e.leverage))):e.entryPrice.times(new P(1).plus(new P(1).div(e.leverage))):new P(0);return{positionSize:n,requiredMargin:i,netLoss:l,breakEvenPrice:g,liquidationPrice:p,entryFee:o,riskAmount:r}},calculateATR(e,t=14){if(e.length<t+1)return new P(0);const r=[],s=e.slice(-(t+1));for(let a=1;a<s.length;a++){const i=s[a],o=s[a-1],c=i.high.minus(i.low),l=i.high.minus(o.close).abs(),d=i.low.minus(o.close).abs(),g=P.max(c,l,d);r.push(g)}return r.length===0?new P(0):r.reduce((a,i)=>a.plus(i),new P(0)).div(r.length)},calculateIndividualTp(e,t,r,s,n){const{positionSize:a,requiredMargin:i,riskAmount:o}=r,c=e.minus(s.entryPrice).abs(),l=a.times(t.div(100)),d=c.times(l),g=l.times(e).times(s.fees.div(100)),p=l.times(s.entryPrice).times(s.fees.div(100)),m=d.minus(p).minus(g),_=o.times(t.div(100)),k=_.gt(0)?m.div(_):new P(0),E=s.entryPrice.gt(0)?e.minus(s.entryPrice).div(s.entryPrice).times(100):new P(0),A=i.gt(0)&&t.gt(0)?m.div(i.times(t.div(100))).times(100):new P(0);return{netProfit:m,riskRewardRatio:k,priceChangePercent:E,returnOnCapital:A,partialVolume:l,exitFee:g,index:n,percentSold:t}},calculateTotalMetrics(e,t,r,s){const{positionSize:n,entryFee:a,riskAmount:i}=t;let o=new P(0),c=new P(0),l=new P(0);e.forEach((m,_)=>{if(m.price.gt(0)&&m.percent.gt(0)){const{netProfit:k,riskRewardRatio:E}=this.calculateIndividualTp(m.price,m.percent,t,r,_);o=o.plus(k);const A=n.times(m.percent.div(100)).times(r.entryPrice).times(r.fees.div(100)),$=n.times(m.percent.div(100)).times(m.price).times(r.fees.div(100));l=l.plus(A).plus($),c=c.plus(E.times(m.percent.div(100)))}});const d=e.filter(m=>m.price.gt(0)).map(m=>m.price);let g=new P(0);if(d.length>0){const m=s===G.TRADE_TYPE_LONG?P.max(...d):P.min(...d),k=m.minus(r.entryPrice).abs().times(n),E=n.times(m).times(r.fees.div(100));g=k.minus(a).minus(E)}const p=r.totalPercentSold.gt(0)?c.div(r.totalPercentSold.div(100)):new P(0);return{totalNetProfit:o,totalRR:p,totalFees:l,maxPotentialProfit:g,riskAmount:i}},calculatePerformanceStats(e){const t=e.filter(F=>F.status==="Won"||F.status==="Lost");if(t.length===0)return null;const r=[...t].sort((F,z)=>new Date(F.date).getTime()-new Date(z.date).getTime()),s=t.filter(F=>F.status==="Won"),n=t.filter(F=>F.status==="Lost"),a=t.length,i=a>0?s.length/a*100:0,o=s.reduce((F,z)=>F.plus(new P(z.totalNetProfit||0)),new P(0)),c=n.reduce((F,z)=>F.plus(new P(z.riskAmount||0)),new P(0)),l=c.gt(0)?o.dividedBy(c):o.gt(0)?new P(1/0):new P(0),d=a>0?t.reduce((F,z)=>F.plus(new P(z.totalRR||0)),new P(0)).dividedBy(a):new P(0),g=s.length>0?o.dividedBy(s.length):new P(0),p=n.length>0?c.dividedBy(n.length):new P(0),m=p.gt(0)?g.dividedBy(p):new P(0),_=s.length>0?P.max(0,...s.map(F=>new P(F.totalNetProfit||0))):new P(0),k=n.length>0?P.max(0,...n.map(F=>new P(F.riskAmount||0))):new P(0);let E=new P(0),A=0;t.forEach(F=>{if(F.riskAmount&&new P(F.riskAmount).gt(0)){const z=F.status==="Won"?new P(F.totalNetProfit||0).dividedBy(new P(F.riskAmount)):new P(-1);E=E.plus(z),A++}});const $=A>0?E.dividedBy(A):new P(0);let T=new P(0),w=new P(0),L=new P(0);r.forEach(F=>{T=F.status==="Won"?T.plus(new P(F.totalNetProfit||0)):T.minus(new P(F.riskAmount||0)),T.gt(w)&&(w=T);const z=w.minus(T);z.gt(L)&&(L=z)});const S=L.gt(0)?T.dividedBy(L):new P(0),C=a>0?n.length/a*100:0,j=new P(i/100).times(g).minus(new P(C/100).times(p));let B=new P(0),D=new P(0),I=new P(0),U=new P(0);t.forEach(F=>{F.tradeType===G.TRADE_TYPE_LONG?F.status==="Won"?B=B.plus(new P(F.totalNetProfit||0)):D=D.plus(new P(F.riskAmount||0)):F.status==="Won"?I=I.plus(new P(F.totalNetProfit||0)):U=U.plus(new P(F.riskAmount||0))});let ee=0,de=0,H=0,V=0,Z="N/A";if(r.forEach(F=>{F.status==="Won"?(de++,V=0,de>ee&&(ee=de)):(V++,de=0,V>H&&(H=V))}),r.length>0){const F=r[r.length-1].status==="Won";let z=0;for(let ae=r.length-1;ae>=0&&(F&&r[ae].status==="Won"||!F&&r[ae].status==="Lost");ae--)z++;Z=`${F?"W":"L"}${z}`}return{totalTrades:a,winRate:i,profitFactor:l,expectancy:j,avgRMultiple:$,avgRR:d,avgWin:g,avgLossOnly:p,winLossRatio:m,largestProfit:_,largestLoss:k,maxDrawdown:L,recoveryFactor:S,currentStreakText:Z,longestWinningStreak:ee,longestLosingStreak:H,totalProfitLong:B,totalLossLong:D,totalProfitShort:I,totalLossShort:U}},calculateSymbolPerformance(e){const t=e.filter(s=>s.status==="Won"||s.status==="Lost"),r={};return t.forEach(s=>{s.symbol&&(r[s.symbol]||(r[s.symbol]={totalTrades:0,wonTrades:0,totalProfitLoss:new P(0)}),r[s.symbol].totalTrades++,s.status==="Won"?(r[s.symbol].wonTrades++,r[s.symbol].totalProfitLoss=r[s.symbol].totalProfitLoss.plus(new P(s.totalNetProfit||0))):r[s.symbol].totalProfitLoss=r[s.symbol].totalProfitLoss.minus(new P(s.riskAmount||0)))}),r}},Pl={availablePresets:[],selectedPreset:""},Mn=Ss(Pl),dn=e=>{Mn.update(e)};function Tl(){try{const e=localStorage.getItem(G.LOCAL_STORAGE_JOURNAL_KEY)||"[]",t=JSON.parse(e);return Array.isArray(t)?t.map(r=>{const s={...r};return Object.keys(s).forEach(n=>{["accountSize","riskPercentage","entryPrice","stopLossPrice","leverage","fees","atrValue","atrMultiplier","totalRR","totalNetProfit","netLoss","riskAmount","totalFees","maxPotentialProfit","positionSize"].includes(n)&&(s[n]=new P(s[n]||0))}),s.targets&&Array.isArray(s.targets)&&(s.targets=s.targets.map(n=>({...n,price:new P(n.price||0),percent:new P(n.percent||0)}))),s}):[]}catch(e){return console.warn("Could not load journal from localStorage.",e),[]}}const br=Ss(Tl());br.subscribe(e=>{try{localStorage.setItem(G.LOCAL_STORAGE_JOURNAL_KEY,JSON.stringify(e))}catch(t){console.warn("Could not save journal to localStorage.",t)}});const K={calculator:Gr,uiManager:yl,init:()=>{K.loadSettings(),K.populatePresetLoader(),K.calculateAndDisplay()},calculateAndDisplay:()=>{Y.hideError();const e=et(be),t={...ts},s=(()=>{const l={accountSize:ve(e.accountSize),riskPercentage:ve(e.riskPercentage),entryPrice:ve(e.entryPrice),leverage:ve(e.leverage||parseFloat(G.DEFAULT_LEVERAGE)),fees:ve(e.fees||parseFloat(G.DEFAULT_FEES)),symbol:e.symbol||"",useAtrSl:e.useAtrSl,atrValue:ve(e.atrValue),atrMultiplier:ve(e.atrMultiplier||parseFloat(G.DEFAULT_ATR_MULTIPLIER)),stopLossPrice:ve(e.stopLossPrice),targets:e.targets.map(p=>({price:ve(p.price),percent:ve(p.percent),isLocked:p.isLocked})),totalPercentSold:new P(0)},d={accountSize:l.accountSize,riskPercentage:l.riskPercentage,entryPrice:l.entryPrice};if(l.useAtrSl?(d.atrValue=l.atrValue,d.atrMultiplier=l.atrMultiplier):d.stopLossPrice=l.stopLossPrice,Object.keys(d).filter(p=>d[p].isZero()).length>0)return{status:G.STATUS_INCOMPLETE};if(l.useAtrSl){if(l.entryPrice.gt(0)&&l.atrValue.gt(0)&&l.atrMultiplier.gt(0)){const p=e.tradeType===G.TRADE_TYPE_LONG?"-":"+";l.stopLossPrice=e.tradeType===G.TRADE_TYPE_LONG?l.entryPrice.minus(l.atrValue.times(l.atrMultiplier)):l.entryPrice.plus(l.atrValue.times(l.atrMultiplier)),t.showAtrFormulaDisplay=!0,t.atrFormulaText=`SL = ${l.entryPrice.toFixed(4)} ${p} (${l.atrValue}  ${l.atrMultiplier}) = ${l.stopLossPrice.toFixed(4)}`}else if(l.atrValue.gt(0)&&l.atrMultiplier.gt(0))return{status:G.STATUS_INCOMPLETE}}else t.showAtrFormulaDisplay=!1,t.atrFormulaText="";if(t.isAtrSlInvalid=l.useAtrSl&&l.stopLossPrice.lte(0),l.stopLossPrice.lte(0)&&!t.isAtrSlInvalid)return{status:G.STATUS_INCOMPLETE};if(e.tradeType===G.TRADE_TYPE_LONG&&l.entryPrice.lte(l.stopLossPrice))return{status:G.STATUS_INVALID,message:"Long: Stop-Loss muss unter dem Kaufpreis liegen.",fields:["stopLossPrice","entryPrice"]};if(e.tradeType===G.TRADE_TYPE_SHORT&&l.entryPrice.gte(l.stopLossPrice))return{status:G.STATUS_INVALID,message:"Short: Stop-Loss muss ber dem Verkaufspreis liegen.",fields:["stopLossPrice","entryPrice"]};for(const p of l.targets)if(p.price.gt(0))if(e.tradeType===G.TRADE_TYPE_LONG){if(p.price.lte(l.stopLossPrice))return{status:G.STATUS_INVALID,message:`Long: Take-Profit Ziel ${p.price.toFixed(4)} muss ber dem Stop-Loss liegen.`,fields:["targets"]};if(p.price.lte(l.entryPrice))return{status:G.STATUS_INVALID,message:`Long: Take-Profit Ziel ${p.price.toFixed(4)} muss ber dem Einstiegspreis liegen.`,fields:["targets"]}}else{if(p.price.gte(l.stopLossPrice))return{status:G.STATUS_INVALID,message:`Short: Take-Profit Ziel ${p.price.toFixed(4)} muss unter dem Stop-Loss liegen.`,fields:["targets"]};if(p.price.gte(l.entryPrice))return{status:G.STATUS_INVALID,message:`Short: Take-Profit Ziel ${p.price.toFixed(4)} muss unter dem Einstiegspreis liegen.`,fields:["targets"]}}return l.totalPercentSold=l.targets.reduce((p,m)=>p.plus(m.percent),new P(0)),l.totalPercentSold.gt(100)?{status:G.STATUS_INVALID,message:`Die Summe der Verkaufsprozente (${l.totalPercentSold.toFixed(0)}%) darf 100% nicht berschreiten.`,fields:[]}:{status:G.STATUS_VALID,data:l}})();if(t.isAtrSlInvalid){fn.set({...ts,showAtrFormulaDisplay:t.showAtrFormulaDisplay,atrFormulaText:t.atrFormulaText,isAtrSlInvalid:!0});return}if(s.status===G.STATUS_INVALID){pt("Calculation","Error",s.message),Y.showError(s.message||""),K.clearResults();return}if(s.status===G.STATUS_INCOMPLETE){K.clearResults(!0);return}let n=s.data,a;if(e.isRiskAmountLocked){const l=ve(e.riskAmount);if(l.gt(0)&&n.accountSize.gt(0)){const d=l.div(n.accountSize).times(100);_e(g=>({...g,riskPercentage:d.toNumber()})),n.riskPercentage=d}a=Gr.calculateBaseMetrics(n,e.tradeType)}else if(e.isPositionSizeLocked&&e.lockedPositionSize&&e.lockedPositionSize.gt(0)){const l=n.entryPrice.minus(n.stopLossPrice).abs();if(l.lte(0)){Y.showError("Stop-Loss muss einen gltigen Abstand zum Einstiegspreis haben."),K.clearResults();return}const d=l.times(e.lockedPositionSize),g=n.accountSize.isZero()?new P(0):d.div(n.accountSize).times(100);_e(p=>({...p,riskPercentage:g.toNumber(),riskAmount:d.toNumber()})),n.riskPercentage=g,a=Gr.calculateBaseMetrics(n,e.tradeType),a&&(a.positionSize=e.lockedPositionSize)}else if(a=Gr.calculateBaseMetrics(n,e.tradeType),a){const l=a;_e(d=>({...d,riskAmount:l.riskAmount.toNumber()}))}if(!a||a.positionSize.lte(0)){K.clearResults(),e.isPositionSizeLocked&&K.togglePositionSizeLock(!1);return}t.positionSize=De(a.positionSize,4),t.requiredMargin=De(a.requiredMargin,2),t.netLoss=`-${De(a.netLoss,2)}`,t.liquidationPrice=n.leverage.gt(1)?De(a.liquidationPrice):"N/A",t.breakEvenPrice=De(a.breakEvenPrice),t.entryFee=De(a.entryFee,4);const i=[];n.targets.forEach((l,d)=>{if(l.price.gt(0)&&l.percent.gt(0)){const g=Gr.calculateIndividualTp(l.price,l.percent,a,n,d);(e.tradeType==="long"&&l.price.gt(n.entryPrice)||e.tradeType==="short"&&l.price.lt(n.entryPrice))&&i.push(g)}}),t.calculatedTpDetails=i;const o=Gr.calculateTotalMetrics(n.targets,a,n,e.tradeType);n.totalPercentSold.gt(0)?(t.totalRR=De(o.totalRR,2),t.totalNetProfit=`+${De(o.totalNetProfit,2)}`,t.totalPercentSold=`${De(n.totalPercentSold,0)}%`,t.riskAmountCurrency=`-${De(o.riskAmount,2)}`,t.totalFees=De(o.totalFees,2),t.maxPotentialProfit=`+${De(o.maxPotentialProfit,2)}`,t.showTotalMetricsGroup=!0):t.showTotalMetricsGroup=!1,fn.set(t);const c=n.targets.filter(l=>l.price.gt(0)&&l.percent.gt(0)).length;pt("Calculation","Success",e.tradeType,c),sn.trackFirstCalculation(),_e(l=>({...l,currentTradeData:{...n,...a,...o,tradeType:e.tradeType,status:"Open",calculatedTpDetails:i},stopLossPrice:n.stopLossPrice.toNumber()})),K.saveSettings()},clearResults:(e=!1)=>{fn.set(ts),e?Y.showError("dashboard.promptForData"):Y.hideError()},getJournal:()=>{try{const e=localStorage.getItem(G.LOCAL_STORAGE_JOURNAL_KEY)||"[]",t=JSON.parse(e);return Array.isArray(t)?t.map(r=>{const s={...r};return Object.keys(s).forEach(n=>{["accountSize","riskPercentage","entryPrice","stopLossPrice","leverage","fees","atrValue","atrMultiplier","totalRR","totalNetProfit","netLoss","riskAmount","totalFees","maxPotentialProfit","positionSize"].includes(n)&&(s[n]=new P(s[n]||0))}),s.targets&&Array.isArray(s.targets)&&(s.targets=s.targets.map(n=>({...n,price:new P(n.price||0),percent:new P(n.percent||0)}))),s}):[]}catch{return console.warn("Could not load journal from localStorage."),Y.showError("Journal konnte nicht geladen werden."),[]}},saveJournal:e=>{try{localStorage.setItem(G.LOCAL_STORAGE_JOURNAL_KEY,JSON.stringify(e))}catch{Y.showError("Fehler beim Speichern des Journals. Der lokale Speicher ist mglicherweise voll oder blockiert.")}},addTrade:()=>{const e=et(be);if(!e.currentTradeData||!e.currentTradeData.positionSize||e.currentTradeData.positionSize.lte(0)){Y.showError("Kann keinen ungltigen Trade speichern.");return}const t=K.getJournal();t.push({...e.currentTradeData,notes:e.tradeNotes,id:Date.now(),date:new Date().toISOString()}),K.saveJournal(t),br.set(t),sn.trackFirstJournalSave(),Y.showFeedback("save")},updateTradeStatus:(e,t)=>{const r=K.getJournal(),s=r.findIndex(n=>n.id==e);s!==-1&&(r[s].status=t,K.saveJournal(r),br.set(r),pt("Journal","UpdateStatus",t))},deleteTrade:e=>{const t=K.getJournal().filter(r=>r.id!=e);K.saveJournal(t),br.set(t)},async clearJournal(){if(K.getJournal().length===0){Y.showError("Das Journal ist bereits leer.");return}await Ht.show("Journal leeren","Mchten Sie wirklich das gesamte Journal unwiderruflich lschen?","confirm")&&(K.saveJournal([]),br.set([]),Y.showFeedback("save",2e3))},getInputsAsObject:()=>{const e=et(be);return{accountSize:e.accountSize,riskPercentage:e.riskPercentage,leverage:e.leverage,fees:e.fees,tradeType:e.tradeType,useAtrSl:e.useAtrSl,atrMultiplier:e.atrMultiplier,symbol:e.symbol,targets:e.targets}},saveSettings:()=>{try{localStorage.setItem(G.LOCAL_STORAGE_SETTINGS_KEY,JSON.stringify(K.getInputsAsObject()))}catch(e){console.warn("Could not save settings to localStorage.",e)}},loadSettings:()=>{try{const e=localStorage.getItem(G.LOCAL_STORAGE_SETTINGS_KEY);if(!e)return;const t=JSON.parse(e);if(t){_e(r=>({...r,accountSize:t.accountSize||null,riskPercentage:t.riskPercentage||null,leverage:t.leverage||parseFloat(G.DEFAULT_LEVERAGE),fees:t.fees||parseFloat(G.DEFAULT_FEES),symbol:t.symbol||"",atrValue:t.atrValue||null,atrMultiplier:t.atrMultiplier||parseFloat(G.DEFAULT_ATR_MULTIPLIER),useAtrSl:t.useAtrSl||!1,tradeType:t.tradeType||G.TRADE_TYPE_LONG,targets:t.targets||[{price:null,percent:50,isLocked:!1},{price:null,percent:25,isLocked:!1},{price:null,percent:25,isLocked:!1}]})),cs(t.useAtrSl||!1);return}}catch{console.warn("Could not load settings from localStorage.")}},savePreset:async()=>{const e=await Ht.show("Preset speichern","Geben Sie einen Namen fr Ihr Preset ein:","prompt");if(typeof e=="string"&&e)try{const t=JSON.parse(localStorage.getItem(G.LOCAL_STORAGE_PRESETS_KEY)||"{}");if(t[e]&&!await Ht.show("berschreiben?",`Preset "${e}" existiert bereits. Mchten Sie es berschreiben?`,"confirm"))return;t[e]=K.getInputsAsObject(),localStorage.setItem(G.LOCAL_STORAGE_PRESETS_KEY,JSON.stringify(t)),Y.showFeedback("save"),K.populatePresetLoader(),dn(r=>({...r,selectedPreset:e}))}catch{Y.showError("Preset konnte nicht gespeichert werden. Der lokale Speicher ist mglicherweise voll oder blockiert.")}},deletePreset:async()=>{const e=et(Mn).selectedPreset;if(e&&await Ht.show("Preset lschen",`Preset "${e}" wirklich lschen?`,"confirm"))try{const t=JSON.parse(localStorage.getItem(G.LOCAL_STORAGE_PRESETS_KEY)||"{}");delete t[e],localStorage.setItem(G.LOCAL_STORAGE_PRESETS_KEY,JSON.stringify(t)),K.populatePresetLoader(),dn(r=>({...r,selectedPreset:""}))}catch{Y.showError("Preset konnte nicht gelscht werden.")}},loadPreset:e=>{if(e){pt("Preset","Load",e);try{const r=JSON.parse(localStorage.getItem(G.LOCAL_STORAGE_PRESETS_KEY)||"{}")[e];if(r){ls(),_e(s=>({...s,accountSize:r.accountSize||null,riskPercentage:r.riskPercentage||null,leverage:r.leverage||parseFloat(G.DEFAULT_LEVERAGE),fees:r.fees||parseFloat(G.DEFAULT_FEES),symbol:r.symbol||"",atrValue:r.atrValue||null,atrMultiplier:r.atrMultiplier||parseFloat(G.DEFAULT_ATR_MULTIPLIER),useAtrSl:r.useAtrSl||!1,tradeType:r.tradeType||G.TRADE_TYPE_LONG,targets:r.targets||[{price:null,percent:50,isLocked:!1},{price:null,percent:25,isLocked:!1},{price:null,percent:25,isLocked:!1}]})),dn(s=>({...s,selectedPreset:e})),cs(r.useAtrSl||!1);return}}catch(t){console.error("Fehler beim Laden des Presets:",t),Y.showError("Preset konnte nicht geladen werden.")}}},populatePresetLoader:()=>{try{const e=JSON.parse(localStorage.getItem(G.LOCAL_STORAGE_PRESETS_KEY)||"{}"),t=Object.keys(e);dn(r=>({...r,availablePresets:t}))}catch{console.warn("Could not populate presets from localStorage."),dn(e=>({...e,availablePresets:[]}))}},exportToCSV:()=>{const e=et(br);if(e.length===0){Y.showError("Journal ist leer.");return}pt("Journal","Export","CSV",e.length);const t=["ID","Datum","Uhrzeit","Symbol","Typ","Status","Konto Guthaben","Risiko %","Hebel","Gebuehren %","Einstieg","Stop Loss","Gewichtetes R/R","Gesamt Netto-Gewinn","Risiko pro Trade (Waehrung)","Gesamte Gebuehren","Max. potenzieller Gewinn","Notizen",...Array.from({length:5},(a,i)=>[`TP${i+1} Preis`,`TP${i+1} %`]).flat()],r=e.map(a=>{const i=new Date(a.date),o=a.notes?`"${a.notes.replace(/"/g,'""').replace(/\n/g," ")}"`:"",c=Array.from({length:5},(l,d)=>[(a.targets[d]?.price||new P(0)).toFixed(4),(a.targets[d]?.percent||new P(0)).toFixed(2)]).flat();return[a.id,i.toLocaleDateString("de-DE"),i.toLocaleTimeString("de-DE"),a.symbol,a.tradeType,a.status,(a.accountSize||new P(0)).toFixed(2),(a.riskPercentage||new P(0)).toFixed(2),(a.leverage||new P(0)).toFixed(2),(a.fees||new P(0)).toFixed(2),(a.entryPrice||new P(0)).toFixed(4),(a.stopLossPrice||new P(0)).toFixed(4),(a.totalRR||new P(0)).toFixed(2),(a.totalNetProfit||new P(0)).toFixed(2),(a.riskAmount||new P(0)).toFixed(2),(a.totalFees||new P(0)).toFixed(2),(a.maxPotentialProfit||new P(0)).toFixed(2),o,...c].join(",")}),s="data:text/csv;charset=utf-8,"+t.join(",")+`
`+r.join(`
`),n=document.createElement("a");n.href=encodeURI(s),n.download="TradeJournal.csv",document.body.appendChild(n),n.click(),document.body.removeChild(n)},importFromCSV:e=>{const t=new FileReader;t.onload=async r=>{const n=(r.target?.result).split(`
`).filter(l=>l.trim()!=="");if(n.length<2){Y.showError("CSV ist leer oder hat nur eine Kopfzeile.");return}const a=n[0].split(",").map(l=>l.trim()),o=["ID","Datum","Uhrzeit","Symbol","Typ","Status","Einstieg","Stop Loss"].filter(l=>!a.includes(l));if(o.length>0){Y.showError(`CSV-Datei fehlen bentigte Spalten: ${o.join(", ")}`);return}const c=n.slice(1).map(l=>{const d=l.split(","),g=a.reduce((p,m,_)=>(p[m]=d[_]?d[_].trim():"",p),{});try{const p=[];for(let _=1;_<=5;_++){const k=`TP${_} Preis`,E=`TP${_} %`;g[k]&&g[E]&&p.push({price:ve(g[k]),percent:ve(g[E]),isLocked:!1})}const m=g;return{id:parseInt(m.ID,10),date:new Date(`${m.Datum} ${m.Uhrzeit}`).toISOString(),symbol:m.Symbol,tradeType:m.Typ.toLowerCase(),status:m.Status,accountSize:ve(m["Konto Guthaben"]||"0"),riskPercentage:ve(m["Risiko %"]||"0"),leverage:ve(m.Hebel||"1"),fees:ve(m["Gebuehren %"]||"0.1"),entryPrice:ve(m.Einstieg),stopLossPrice:ve(m["Stop Loss"]),totalRR:ve(m["Gewichtetes R/R"]||"0"),totalNetProfit:ve(m["Gesamt Netto-Gewinn"]||"0"),riskAmount:ve(m["Risiko pro Trade (Waehrung)"]||"0"),totalFees:ve(m["Gesamte Gebuehren"]||"0"),maxPotentialProfit:ve(m["Max. potenzieller Gewinn"]||"0"),notes:m.Notizen?m.Notizen.replace(/""/g,'"').slice(1,-1):"",targets:p}}catch(p){return console.warn("Fehler beim Verarbeiten einer Zeile:",g,p),null}}).filter(l=>l!==null);if(c.length>0){const d=[...et(br),...c],g=Array.from(new Map(d.map(p=>[p.id,p])).values());await Ht.show("Import besttigen",`Sie sind dabei, ${c.length} Trades zu importieren. Bestehende Trades mit derselben ID werden berschrieben. Fortfahren?`,"confirm")&&(br.set(g),pt("Journal","Import","CSV",c.length),Y.showFeedback("save",2e3))}else Y.showError("Keine gltigen Eintrge in der CSV-Datei gefunden.")},t.readAsText(e)},handleFetchPrice:async()=>{const t=et(be).symbol.toUpperCase().replace("/","");if(!t){Y.showError("Bitte geben Sie ein Symbol ein.");return}Y.update(r=>({...r,isPriceFetching:!0}));try{const r=await Zs.fetchBitunixPrice(t);_e(s=>({...s,entryPrice:r.toDP(4).toNumber()})),Y.showFeedback("copy",700),K.calculateAndDisplay()}catch(r){const s=r instanceof Error?r.message:String(r);Y.showError(s)}finally{Y.update(r=>({...r,isPriceFetching:!1}))}},setAtrMode:e=>{_e(t=>({...t,atrMode:e,atrValue:e==="auto"?null:t.atrValue})),K.calculateAndDisplay()},setAtrTimeframe:e=>{_e(t=>({...t,atrTimeframe:e})),et(be).atrMode==="auto"&&K.fetchAtr()},fetchAtr:async()=>{const e=et(be),t=e.symbol.toUpperCase().replace("/","");if(!t){Y.showError("Bitte geben Sie ein Symbol ein.");return}Y.update(r=>({...r,isPriceFetching:!0}));try{const r=await Zs.fetchBitunixKlines(t,e.atrTimeframe),s=Gr.calculateATR(r);if(s.lte(0))throw new Error("ATR konnte nicht berechnet werden. Prfen Sie das Symbol oder den Zeitrahmen.");_e(n=>({...n,atrValue:s.toDP(4).toNumber()})),K.calculateAndDisplay(),Y.showFeedback("copy",700)}catch(r){const s=r instanceof Error?r.message:String(r);Y.showError(s)}finally{Y.update(r=>({...r,isPriceFetching:!1}))}},selectSymbolSuggestion:e=>{_e(t=>({...t,symbol:e})),Y.update(t=>({...t,showSymbolSuggestions:!1,symbolSuggestions:[]})),K.handleFetchPrice()},updateSymbolSuggestions:e=>{const t=e.toUpperCase().replace("/","");let r=[];t&&(r=G.SUGGESTED_SYMBOLS.filter(s=>s.startsWith(t))),Y.update(s=>({...s,symbolSuggestions:r,showSymbolSuggestions:r.length>0}))},togglePositionSizeLock:e=>{const t=et(be),r=et(fn),s=e!==void 0?e:!t.isPositionSizeLocked;if(s&&(!r.positionSize||ve(r.positionSize).lte(0))){Y.showError("Positionsgre kann nicht gesperrt werden, solange sie ungltig ist.");return}_e(n=>({...n,isPositionSizeLocked:s,lockedPositionSize:s?ve(r.positionSize):null,isRiskAmountLocked:!1})),K.calculateAndDisplay()},toggleRiskAmountLock:e=>{const t=et(be),r=e!==void 0?e:!t.isRiskAmountLocked;if(r&&ve(t.riskAmount).lte(0)){Y.showError("Risikobetrag kann nicht gesperrt werden, solange er ungltig ist.");return}_e(s=>({...s,isRiskAmountLocked:r,isPositionSizeLocked:!1,lockedPositionSize:null})),K.calculateAndDisplay()},addTakeProfitRow:(e=null,t=null,r=!1)=>{_e(s=>({...s,targets:[...s.targets,{price:e,percent:t,isLocked:r}]}))},adjustTpPercentages:e=>{const t=et(be);if(e!==null&&t.targets[e].isLocked)return;const r=JSON.parse(JSON.stringify(t.targets)),s=new P(100),n=new P(0),a=r.map((p,m)=>({price:ve(p.price),percent:ve(p.percent),isLocked:p.isLocked,originalIndex:m})),i=a.reduce((p,m)=>p.plus(m.percent),n),o=s.minus(i);if(o.isZero())return;const c=a.filter(p=>!p.isLocked&&p.originalIndex!==e);if(c.length===0)e!==null&&(a[e].percent=a[e].percent.plus(o));else if(o.gt(n)){const p=o.div(c.length);c.forEach(m=>{a[m.originalIndex].percent=a[m.originalIndex].percent.plus(p)})}else{let p=o.abs();for(let m=c.length-1;m>=0&&!p.isZero();m--){const _=c[m],k=a[_.originalIndex],E=P.min(p,k.percent);k.percent=k.percent.minus(E),p=p.minus(E)}}let l=a.map(p=>({...p,percent:p.percent.toDecimalPlaces(0,P.ROUND_HALF_UP)})),d=l.reduce((p,m)=>p.plus(m.percent),n),g=s.minus(d);if(!g.isZero()){let p=l.find((m,_)=>!m.isLocked&&_!==e&&m.percent.plus(g).gte(0));p||(p=l.find(m=>!m.isLocked&&m.percent.plus(g).gte(0))),p&&(p.percent=p.percent.plus(g))}_e(p=>({...p,targets:l.map(m=>({price:m.price.toNumber(),percent:m.percent.toNumber(),isLocked:m.isLocked}))}))}};var El=ne('<div class="suggestion-item p-2 cursor-pointer hover:bg-[var(--accent-color)] hover:text-white" role="button" tabindex="0"> </div>'),Al=ne('<div class="absolute top-full left-0 w-full rounded-md shadow-lg mt-1 overflow-hidden border border-[var(--border-color)] z-20 bg-[var(--bg-secondary)]"></div>'),Ll=ne('<div class="atr-mode-switcher"><button> </button> <button> </button></div>'),Rl=ne('<div><input id="stop-loss-price-input" type="text" class="input-field w-full px-4 py-2 rounded-md"/></div>'),$l=ne('<div class="grid grid-cols-2 gap-2 mt-2"><input id="atr-value-input" type="text" class="input-field w-full px-4 py-2 rounded-md"/> <input id="atr-multiplier-input" type="text" class="input-field w-full px-4 py-2 rounded-md"/></div>'),Nl=ne('<div class="grid grid-cols-3 gap-2 mt-2 items-end"><div><label for="atr-timeframe" class="input-label !mb-1 text-xs"> </label> <select id="atr-timeframe" class="input-field w-full px-4 py-2 rounded-md"><option>5m</option><option>15m</option><option>1h</option><option>4h</option><option>1d</option></select></div> <div><div class="flex justify-between items-center"><label for="atr-value-input-auto" class="input-label !mb-1 text-xs"> </label> <button type="button" title="Fetch ATR Value"><!></button></div> <input id="atr-value-input-auto" type="text" class="input-field w-full px-4 py-2 rounded-md" placeholder="ATR"/></div> <div><label for="atr-multiplier-input-auto" class="input-label !mb-1 text-xs"> </label> <input id="atr-multiplier-input-auto" type="text" class="input-field w-full px-4 py-2 rounded-md" placeholder="1.5"/></div></div>'),Cl=ne('<div class="text-center text-xs mt-2" style="color: var(--text-primary);"><span> </span> <span> </span></div>'),Il=ne("<!> <!>",1),Fl=ne(`<div><h2 class="section-header"> </h2> <div class="flex gap-4 mb-4"><div class="relative flex-grow symbol-input-container"><input id="symbol-input" type="text" class="input-field w-full px-4 py-2 rounded-md pr-10" autocomplete="off"/> <button type="button"><!></button> <!></div> <div class="flex-grow"><input id="entry-price-input" type="text" class="input-field w-full px-4 py-2 rounded-md"/></div></div> <div class="p-2 rounded-lg mb-4" style="background-color: var(--bg-tertiary);"><div><!> <label class="flex items-center cursor-pointer"><span class="mr-2 text-sm"> </span> <input id="use-atr-sl-checkbox" type="checkbox" class="sr-only peer" role="switch"/> <div class="atr-toggle-track relative w-11 h-6 peer-focus:outline-none rounded-full peer after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:border after:rounded-full after:h-5 after:w-5"></div></label></div> <!></div></div>`);function Ml(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt(),a=an();let i=oe(t,"symbol",12),o=oe(t,"entryPrice",8),c=oe(t,"useAtrSl",12),l=oe(t,"atrValue",8),d=oe(t,"atrMultiplier",8),g=oe(t,"stopLossPrice",8),p=oe(t,"atrMode",8),m=oe(t,"atrTimeframe",12),_=oe(t,"atrFormulaDisplay",8),k=oe(t,"showAtrFormulaDisplay",8),E=oe(t,"isAtrSlInvalid",8),A=oe(t,"isPriceFetching",8),$=oe(t,"symbolSuggestions",8),T=oe(t,"showSymbolSuggestions",8);function w(){pt("ATR","Toggle",c()?"On":"Off"),a("toggleAtrInputs",c())}function L(){pt("Price","Fetch",i()),a("fetchPrice")}const S=jo(()=>{K.updateSymbolSuggestions(i())},200);function C(ie){pt("Symbol","SelectSuggestion",ie),a("selectSymbolSuggestion",ie)}function j(ie,me){ie.key==="Enter"&&C(me)}function B(ie){ie.target.closest(".symbol-input-container")||K.updateSymbolSuggestions("")}const D=ie=>ie==null?"":String(ie);function I(ie){const pe=ie.target.value;_e(we=>({...we,entryPrice:pe===""?null:parseFloat(pe)}))}function U(ie){const pe=ie.target.value;_e(we=>({...we,atrValue:pe===""?null:parseFloat(pe)}))}function ee(ie){const pe=ie.target.value;_e(we=>({...we,atrMultiplier:pe===""?null:parseFloat(pe)}))}function de(ie){const pe=ie.target.value;_e(we=>({...we,stopLossPrice:pe===""?null:parseFloat(pe)}))}Nt();var H=Fl();O("click",ua,B);var V=h(H),Z=h(V,!0);f(V);var F=v(V,2),z=h(F),ae=h(z);dt(ae);var re=v(ae,2),ge=h(re);Pe(ge,()=>(q(se),u(()=>se.fetch))),f(re);var Ie=v(re,2);{var ye=ie=>{var me=Al();pr(me,5,$,dr,(pe,we)=>{var Fe=El(),tt=h(Fe,!0);f(Fe),le(()=>y(tt,b(we))),O("click",Fe,()=>C(b(we))),O("keydown",Fe,_t=>j(_t,b(we))),X(pe,Fe)}),f(me),X(ie,me)};Ze(Ie,ie=>{T()&&ie(ye)})}f(z);var Ve=v(z,2),Ee=h(Ve);dt(Ee),ke(Ee,(ie,me)=>qt?.(ie,me),()=>({maxDecimalPlaces:4})),he(()=>O("input",Ee,I)),he(()=>O("input",Ee,function(...ie){sn.trackFirstInput?.apply(this,ie)})),f(Ve),f(F);var at=v(F,2),ze=h(at),Pt=h(ze);{var mt=ie=>{var me=Ll(),pe=h(me),we=h(pe,!0);f(pe);var Fe=v(pe,2),tt=h(Fe,!0);f(Fe),f(me),le((_t,fe)=>{Ge(pe,1,`btn-switcher ${p()==="manual"?"active":""}`),y(we,_t),Ge(Fe,1,`btn-switcher ${p()==="auto"?"active":""}`),y(tt,fe)},[()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.atrModeManual"))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.atrModeAuto")))]),O("click",pe,()=>a("setAtrMode","manual")),O("click",Fe,()=>a("setAtrMode","auto")),X(ie,me)};Ze(Pt,ie=>{c()&&ie(mt)})}var Ut=v(Pt,2),Mt=h(Ut),sr=h(Mt,!0);f(Mt);var bt=v(Mt,2);dt(bt),da(2),f(Ut),f(ze);var ar=v(ze,2);{var yr=ie=>{var me=Rl(),pe=h(me);dt(pe),ke(pe,(we,Fe)=>qt?.(we,Fe),()=>({maxDecimalPlaces:4})),he(()=>O("input",pe,de)),f(me),le((we,Fe)=>{Vt(pe,we),J(pe,"placeholder",Fe)},[()=>(q(g()),u(()=>D(g()))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.manualStopLossPlaceholder")))]),X(ie,me)},hr=ie=>{var me=Il(),pe=nr(me);{var we=fe=>{var Se=$l(),Ae=h(Se);dt(Ae),ke(Ae,(Ke,je)=>qt?.(Ke,je),()=>({maxDecimalPlaces:4})),he(()=>O("input",Ae,U));var Ye=v(Ae,2);dt(Ye),ke(Ye,(Ke,je)=>qt?.(Ke,je),()=>({maxDecimalPlaces:4})),he(()=>O("input",Ye,ee)),f(Se),le((Ke,je,ot,He)=>{Vt(Ae,Ke),J(Ae,"placeholder",je),Vt(Ye,ot),J(Ye,"placeholder",He)},[()=>(q(l()),u(()=>D(l()))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.atrValuePlaceholder"))),()=>(q(d()),u(()=>D(d()))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.multiplierPlaceholder")))]),X(fe,Se)},Fe=fe=>{var Se=Nl(),Ae=h(Se),Ye=h(Ae),Ke=h(Ye,!0);f(Ye);var je=v(Ye,2);le(()=>{m(),zn(()=>{})});var ot=h(je);ot.value=ot.__value="5m";var He=v(ot);He.value=He.__value="15m";var Jt=v(He);Jt.value=Jt.__value="1h";var wt=v(Jt);wt.value=wt.__value="4h";var Ir=v(wt);Ir.value=Ir.__value="1d",f(je),f(Ae);var Sr=v(Ae,2),Fr=h(Sr),Pr=h(Fr),Mr=h(Pr,!0);f(Pr);var Dt=v(Pr,2),Dr=h(Dt);Pe(Dr,()=>(q(se),u(()=>se.fetch))),f(Dt),f(Fr);var Tt=v(Fr,2);dt(Tt),ke(Tt,(Et,vr)=>qt?.(Et,vr),()=>({maxDecimalPlaces:4})),he(()=>O("input",Tt,U)),f(Sr);var Kr=v(Sr,2),Zt=h(Kr),gr=h(Zt,!0);f(Zt);var Wt=v(Zt,2);dt(Wt),ke(Wt,(Et,vr)=>qt?.(Et,vr),()=>({maxDecimalPlaces:4})),he(()=>O("input",Wt,ee)),f(Kr),f(Se),le((Et,vr,Ot,Hr,Or)=>{y(Ke,Et),y(Mr,vr),Ge(Dt,1,`price-fetch-btn ${A()?"animate-spin":""}`),Vt(Tt,Ot),y(gr,Hr),Vt(Wt,Or)},[()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.atrTimeframeLabel"))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.atrLabel"))),()=>(q(l()),u(()=>D(l()))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.atrMultiplierLabel"))),()=>(q(d()),u(()=>D(d())))]),Bn(je,m),O("change",je,Et=>a("setAtrTimeframe",Et.currentTarget.value)),O("click",Dt,()=>{pt("ATR","Fetch",i()),a("fetchAtr")}),X(fe,Se)};Ze(pe,fe=>{p()==="manual"?fe(we):fe(Fe,!1)})}var tt=v(pe,2);{var _t=fe=>{const Se=Ce(()=>(q(_()),u(()=>_().lastIndexOf("=")))),Ae=Ce(()=>(q(_()),q(b(Se)),u(()=>_().substring(0,b(Se)+1)))),Ye=Ce(()=>(q(_()),q(b(Se)),u(()=>_().substring(b(Se)+1))));var Ke=Cl(),je=h(Ke),ot=h(je,!0);f(je);var He=v(je,2),Jt=h(He,!0);f(He),f(Ke),le(()=>{y(ot,b(Ae)),Rt(He,E()?"color: var(--danger--color)":""),y(Jt,b(Ye))}),X(fe,Ke)};Ze(tt,fe=>{k()&&fe(_t)})}X(ie,me)};Ze(ar,ie=>{c()?ie(hr,!1):ie(yr)})}f(at),f(H),le((ie,me,pe,we,Fe,tt,_t)=>{y(Z,ie),J(ae,"placeholder",me),Ge(re,1,`price-fetch-btn absolute top-1/2 right-2 -translate-y-1/2 ${A()?"animate-spin":""}`),J(re,"title",pe),J(re,"aria-label",we),Vt(Ee,Fe),J(Ee,"placeholder",tt),Ge(ze,1,`flex items-center mb-2 ${c()?"justify-between":"justify-end"}`),y(sr,_t),J(bt,"aria-checked",c())},[()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.header"))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.symbolPlaceholder"))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.fetchPriceTitle"))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.fetchPriceAriaLabel"))),()=>(q(o()),u(()=>D(o()))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.entryPricePlaceholder"))),()=>(r(),u(()=>r()("dashboard.tradeSetupInputs.atrStopLossLabel")))]),Vn(ae,i),O("input",ae,()=>{S(),sn.trackFirstInput()}),O("click",re,L),Mi(bt,c),O("change",bt,w),X(e,H),It(),n()}var Dl=ne('<div class="text-xs text-[var(--text-secondary)] text-right"><span class="mr-2"> <span class="text-[var(--success-color)]"> </span></span> <span> <span> </span></span></div>'),Ol=ne('<div class="tp-row flex items-center gap-2 p-2 rounded-lg" style="background-color: var(--bg-tertiary);"><div class="flex-grow"><div class="flex justify-between items-center mb-1"><label class="tp-label text-xs text-[var(--text-secondary)]"> </label> <!></div> <div class="grid grid-cols-2 gap-2"><input type="text" class="tp-price input-field w-full px-4 py-2 rounded-md"/> <input type="text" placeholder="%"/></div></div> <button class="lock-tp-btn btn-lock-icon p-1 self-center" tabindex="-1"><!></button> <button class="remove-tp-btn text-[var(--danger-color)] hover:opacity-80 p-1 self-center" tabindex="-1"><!></button></div>');function zl(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt(),a=an();let i=oe(t,"index",8),o=oe(t,"price",8),c=oe(t,"percent",8),l=oe(t,"isLocked",8),d=oe(t,"tpDetail",8,void 0);function g(){const Z=!l(),F=et(be).targets;F[i()]&&(F[i()].isLocked=Z,_e(z=>({...z,targets:F})),K.adjustTpPercentages(i()))}function p(){a("remove",i())}const m=Z=>Z==null?"":String(Z);function _(Z){const z=Z.target.value,ae=z===""?null:parseFloat(z),re=et(be).targets;re[i()]&&(re[i()].price=ae,_e(ge=>({...ge,targets:re})))}function k(Z){const z=Z.target.value,ae=z===""?null:parseFloat(z),re=et(be).targets;re[i()]&&(re[i()].percent=ae,_e(ge=>({...ge,targets:re})),K.adjustTpPercentages(i()))}Nt();var E=Ol(),A=h(E),$=h(A),T=h($),w=h(T);f(T);var L=v(T,2);{var S=Z=>{var F=Dl(),z=h(F),ae=h(z),re=v(ae),ge=h(re);f(re),f(z);var Ie=v(z,2),ye=h(Ie),Ve=v(ye),Ee=h(Ve,!0);f(Ve),f(Ie),f(F),le((at,ze,Pt,mt,Ut)=>{y(ae,`${at??""} `),y(ge,`+$${ze??""}`),y(ye,`${Pt??""} `),Ge(Ve,1,mt),y(Ee,Ut)},[()=>(r(),u(()=>r()("dashboard.takeProfitRow.winLabel"))),()=>(q(d()),u(()=>d().netProfit.toFixed(2))),()=>(r(),u(()=>r()("dashboard.takeProfitRow.rrLabel"))),()=>(q(d()),u(()=>d().riskRewardRatio.gte(2)?"text-[var(--success-color)]":d().riskRewardRatio.gte(1.5)?"text-[var(--warning-color)]":"text-[var(--danger-color)]")),()=>(q(d()),u(()=>d().riskRewardRatio.toFixed(2)))]),X(Z,F)};Ze(L,Z=>{d()&&Z(S)})}f($);var C=v($,2),j=h(C);dt(j),ke(j,(Z,F)=>qt?.(Z,F),()=>({maxDecimalPlaces:4})),he(()=>O("input",j,_));var B=v(j,2);dt(B);let D;ke(B,(Z,F)=>qt?.(Z,F),()=>({noDecimals:!0,isPercentage:!0,minValue:0,maxValue:100})),he(()=>O("input",B,k)),f(C),f(A);var I=v(A,2),U=h(I);{var ee=Z=>{var F=mn(),z=nr(F);Pe(z,()=>(q(se),u(()=>se.lockClosed))),X(Z,F)},de=Z=>{var F=mn(),z=nr(F);Pe(z,()=>(q(se),u(()=>se.lockOpen))),X(Z,F)};Ze(U,Z=>{l()?Z(ee):Z(de,!1)})}f(I),he(()=>O("click",I,g)),ke(I,(Z,F)=>ut?.(Z,F),()=>({category:"TakeProfitRow",action:"Click",name:"ToggleLock"}));var H=v(I,2),V=h(H);Pe(V,()=>(q(se),u(()=>se.remove))),f(H),he(()=>O("click",H,p)),ke(H,(Z,F)=>ut?.(Z,F),()=>({category:"TakeProfitRow",action:"Click",name:"RemoveRow"})),f(E),le((Z,F,z,ae,re,ge)=>{J(T,"for",`tp-price-${i()??""}`),y(w,`TP ${i()+1}`),Vt(j,Z),J(j,"placeholder",F),J(j,"id",`tp-price-${i()??""}`),Vt(B,z),D=Ge(B,1,"tp-percent input-field w-full px-4 py-2 rounded-md",null,D,ae),B.disabled=l(),J(B,"id",`tp-percent-${i()??""}`),J(I,"title",re),J(H,"title",ge)},[()=>(q(o()),u(()=>m(o()))),()=>(r(),u(()=>r()("dashboard.takeProfitRow.pricePlaceholder"))),()=>(q(c()),u(()=>m(c()))),()=>({"locked-input":l()}),()=>(r(),u(()=>r()("dashboard.takeProfitRow.lockButtonTitle"))),()=>(r(),u(()=>r()("dashboard.takeProfitRow.removeButtonTitle")))]),X(e,E),It(),n()}var jl=ne('<span class="tooltip-trigger svelte-kaiebb">?</span>'),Bl=ne('<div id="tooltip-text" role="tooltip" class="tooltip-content svelte-kaiebb"> </div>'),Vl=ne('<div class="tooltip-container svelte-kaiebb" role="button" tabindex="0"><!> <!></div>');function gt(e,t){let r=oe(t,"text",8,""),s=tr(!1),n=tr();function a(){Bt(s,!0)}function i(){Bt(s,!1)}var o=Vl(),c=h(o);fa(c,t,"default",{},g=>{var p=jl();X(g,p)});var l=v(c,2);{var d=g=>{var p=Bl(),m=h(p,!0);f(p),Ts(p,_=>Bt(n,_),()=>b(n)),le(()=>y(m,r())),X(g,p)};Ze(l,g=>{b(s)&&r()&&g(d)})}f(o),O("mouseenter",o,a),O("mouseleave",o,i),O("focusin",o,a),O("focusout",o,i),X(e,o)}var ql=ne('<section class="mt-4 md:col-span-2"><h2 class="section-header"><span> </span> <div class="flex items-center gap-2"><!> <button id="add-tp-btn" class="btn-icon-accent" tabindex="-1"><!></button></div></h2> <div id="take-profit-list" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div></section>');function Gl(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt(),a=an();let i=oe(t,"targets",8),o=oe(t,"calculatedTpDetails",24,()=>[]);function c(){K.addTakeProfitRow()}function l(T){const w=T.detail;a("remove",w)}Nt();var d=ql(),g=h(d),p=h(g),m=h(p,!0);f(p);var _=v(p,2),k=h(_);{let T=Ce(()=>(r(),u(()=>r()("dashboard.takeProfitTargets.tooltip"))));gt(k,{get text(){return b(T)}})}var E=v(k,2),A=h(E);Pe(A,()=>(q(se),u(()=>se.add))),f(E),f(_),f(g);var $=v(g,2);pr($,5,i,dr,(T,w,L)=>{const S=Ce(()=>(q(o()),u(()=>o().find(C=>C.index===L))));zl(T,{index:L,get price(){return b(w),u(()=>b(w).price)},get percent(){return b(w),u(()=>b(w).percent)},get isLocked(){return b(w),u(()=>b(w).isLocked)},get tpDetail(){return b(S)},$$events:{remove:l}})}),f($),f(d),le((T,w)=>{y(m,T),J(E,"title",w)},[()=>(r(),u(()=>r()("dashboard.takeProfitTargets.header"))),()=>(r(),u(()=>r()("dashboard.takeProfitTargets.addTargetTitle")))]),O("click",E,c),X(e,d),It(),n()}function Ul(e){const t=e-1;return t*t*t+1}function Xs(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}function Jl(e,{delay:t=0,duration:r=400,easing:s=Ul,x:n=0,y:a=0,opacity:i=0}={}){const o=getComputedStyle(e),c=+o.opacity,l=o.transform==="none"?"":o.transform,d=c*(1-i),[g,p]=Xs(n),[m,_]=Xs(a);return{delay:t,duration:r,easing:s,css:(k,E)=>`
			transform: ${l} translate(${(1-k)*g}${p}, ${(1-k)*m}${_});
			opacity: ${c-d*E}`}}var Zl=ne('<div class="modal-overlay visible svelte-xexd2o" role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-title"><div><div class="modal-header svelte-xexd2o"><h2 id="modal-title" class="modal-title svelte-xexd2o"> </h2> <button class="modal-close-btn svelte-xexd2o" aria-label="Schlieen">&times;</button></div> <div class="modal-body svelte-xexd2o"><!></div></div></div>');function _n(e,t){Ct(t,!1);let r=oe(t,"isOpen",8,!1),s=oe(t,"title",8,""),n=oe(t,"extraClasses",8,"");const a=an();function i(){a("close")}Nt();var o=mn(),c=nr(o);{var l=d=>{var g=Zl(),p=h(g),m=h(p),_=h(m),k=h(_,!0);f(_);var E=v(_,2);f(m);var A=v(m,2),$=h(A);fa($,t,"default",{},null),f(A),f(p),f(g),le(()=>{Ge(p,1,`modal-content ${n()??""}`,"svelte-xexd2o"),y(k,s())}),O("click",E,i),Fi(3,p,()=>Jl,()=>({y:-20,duration:200})),O("click",g,Di(i)),O("keydown",g,T=>{T.key==="Escape"&&i()}),X(d,g)};Ze(c,d=>{r()&&d(l)})}X(e,o),It()}var Yl=ne('<input type="text" class="input-field w-full px-3 py-2 rounded-md my-4"/>'),Kl=ne('<button class="font-bold py-2 px-4 rounded-lg bg-[var(--btn-danger-bg)] hover:bg-[var(--btn-danger-hover-bg)] text-[var(--btn-danger-text)]"> </button> <button class="font-bold py-2 px-4 rounded-lg bg-[var(--btn-default-bg)] hover:bg-[var(--btn-default-hover-bg)] text-[var(--btn-default-text)]"> </button>',1),Hl=ne('<button class="btn-modal-ok font-bold py-2 px-4 rounded-lg"> </button>'),Wl=ne('<div class="prose dark:prose-invert w-full max-w-none"><!></div> <!> <div class="flex justify-end gap-4 mt-6"><!></div>',1);function Ql(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt();let a=tr({title:"",message:"",type:"alert",defaultValue:"",isOpen:!1,resolve:null});Ht.subscribe(c=>{Bt(a,c)});function i(c){Ht._handleModalConfirm(c)}function o(c){Bs(a,b(a).defaultValue=c.target.value)}Nt(),_n(e,{get isOpen(){return b(a).isOpen},get title(){return b(a).title},extraClasses:"modal-size-sm",$$events:{close:()=>i(!1)},children:(c,l)=>{var d=Wl(),g=nr(d),p=h(g);Pe(p,()=>b(a).message),f(g);var m=v(g,2);{var _=T=>{var w=Yl();dt(w),le(L=>J(w,"placeholder",L),[()=>r()("dashboard.customModal.promptPlaceholder")]),Vn(w,()=>b(a).defaultValue,L=>Bs(a,b(a).defaultValue=L)),O("input",w,o),X(T,w)};Ze(m,T=>{b(a).type==="prompt"&&T(_)})}var k=v(m,2),E=h(k);{var A=T=>{var w=Kl(),L=nr(w),S=h(L,!0);f(L),he(()=>O("click",L,()=>i(!0))),ke(L,(B,D)=>ut?.(B,D),()=>({category:"CustomModal",action:"Click",name:"ConfirmYes"}));var C=v(L,2),j=h(C,!0);f(C),he(()=>O("click",C,()=>i(!1))),ke(C,(B,D)=>ut?.(B,D),()=>({category:"CustomModal",action:"Click",name:"ConfirmNo"})),le((B,D)=>{y(S,B),y(j,D)},[()=>r()("dashboard.customModal.yesButton"),()=>r()("dashboard.customModal.noButton")]),X(T,w)},$=T=>{var w=Hl(),L=h(w,!0);f(w),he(()=>O("click",w,()=>i(b(a).type==="prompt"?b(a).defaultValue||"":!0))),ke(w,(S,C)=>ut?.(S,C),()=>({category:"CustomModal",action:"Click",name:"ConfirmOK"})),le(S=>y(L,S),[()=>r()("dashboard.customModal.okButton")]),X(T,w)};Ze(E,T=>{b(a).type==="confirm"?T(A):T($,!1)})}f(k),X(c,d)},$$slots:{default:!0}}),It(),n()}var Xl=ne("<div></div>"),ec=ne('<span class="rr-label svelte-12jfqox" style="transform: translateX(-50%);"> </span>'),tc=ne('<div class="tp-tooltip svelte-12jfqox"><div class="tp-tooltip-line svelte-12jfqox"> <span class="text-green-400 svelte-12jfqox"> </span></div> <div class="tp-tooltip-line svelte-12jfqox"> <span> </span></div></div>'),rc=ne('<div role="button" tabindex="0"><span class="marker-label svelte-12jfqox" style="transform: translateX(-50%);"> </span> <!> <!></div>'),nc=ne('<section class="visual-bar-container md:col-span-2 svelte-12jfqox"><h2 class="section-header text-center !mb-4"> </h2> <div class="visual-bar svelte-12jfqox" role="img"><!> <!></div></section>');function sc(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt();let a=oe(t,"entryPrice",8),i=oe(t,"stopLossPrice",8),o=oe(t,"tradeType",8),c=oe(t,"targets",8),l=oe(t,"calculatedTpDetails",8),d=tr({visualBarContent:[],markers:[]});Jr(()=>(q(a()),q(i()),q(o()),q(c()),q(l())),()=>{Bt(d,Sl({entryPrice:a(),stopLossPrice:i(),tradeType:o()},c(),l()))}),Ps(),Nt();var g=nc(),p=h(g),m=h(p,!0);f(p);var _=v(p,2),k=h(_);pr(k,1,()=>(b(d),u(()=>b(d).visualBarContent)),dr,(A,$)=>{var T=Xl();le(()=>{Ge(T,1,(b($),u(()=>b($).type)),"svelte-12jfqox"),Rt(T,`left: ${b($),u(()=>b($).style.left)??""}; width: ${b($),u(()=>b($).style.width)??""};`)}),X(A,T)});var E=v(k,2);pr(E,1,()=>(b(d),u(()=>b(d).markers)),dr,(A,$)=>{const T=Ce(()=>(q(l()),b($),u(()=>l().find(I=>I.index===b($).index))));var w=rc(),L=h(w),S=h(L,!0);f(L);var C=v(L,2);{var j=I=>{var U=ec(),ee=h(U);f(U),le(de=>y(ee,`${de??""}R`),[()=>(b($),u(()=>b($).rr.toFixed(2)))]),X(I,U)};Ze(C,I=>{b($),u(()=>b($).rr)&&I(j)})}var B=v(C,2);{var D=I=>{var U=tc(),ee=h(U),de=h(ee),H=v(de),V=h(H);f(H),f(ee);var Z=v(ee,2),F=h(Z),z=v(F),ae=h(z,!0);f(z),f(Z),f(U),le((re,ge,Ie,ye,Ve)=>{y(de,`${re??""} `),y(V,`+$${ge??""}`),y(F,`${Ie??""} `),Ge(z,1,ye,"svelte-12jfqox"),y(ae,Ve)},[()=>(r(),u(()=>r()("dashboard.visualBar.netProfitLabel"))),()=>(q(b(T)),u(()=>b(T).netProfit.toFixed(2))),()=>(r(),u(()=>r()("dashboard.visualBar.rrLabel"))),()=>(q(b(T)),u(()=>b(T).riskRewardRatio.gte(2)?"text-green-400":b(T).riskRewardRatio.gte(1.5)?"text-yellow-400":"text-red-400")),()=>(q(b(T)),u(()=>b(T).riskRewardRatio.toFixed(2)))]),X(I,U)};Ze(B,I=>{b(T)&&I(D)})}f(w),le(()=>{Ge(w,1,`bar-marker ${b($),u(()=>b($).isEntry?"entry-marker":"")??""} ${b($),u(()=>b($).index!==void 0?"tp-marker":"")??""}`,"svelte-12jfqox"),Rt(w,`left: ${b($),u(()=>b($).pos)??""}%; z-index: ${b($),u(()=>b($).index!==void 0?20-b($).index:"auto")??""};`),y(S,(b($),u(()=>b($).label)))}),X(A,w)}),f(_),f(g),le((A,$)=>{y(m,A),J(_,"aria-label",$)},[()=>(r(),u(()=>r()("dashboard.visualBar.header"))),()=>(r(),u(()=>r()("dashboard.visualBar.ariaLabel")))]),X(e,g),It(),n()}const ws=1,ks="R-Calculator";function is(e){return localStorage.getItem(e)}function Da(){const e={backupVersion:ws,timestamp:new Date().toISOString(),appName:ks,data:{settings:is(G.LOCAL_STORAGE_SETTINGS_KEY),presets:is(G.LOCAL_STORAGE_PRESETS_KEY),journal:is(G.LOCAL_STORAGE_JOURNAL_KEY)}},t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),s=document.createElement("a");s.href=URL.createObjectURL(r);const n=new Date().toISOString().split("T")[0];s.download=`${ks}-Backup-${n}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(s.href)}function Oa(e){try{const t=JSON.parse(e);return t.appName!==ks?{success:!1,message:"This backup file is not for this application."}:!t.backupVersion||t.backupVersion>ws?{success:!1,message:`Unsupported backup version. This app supports up to version ${ws}.`}:t.data?(t.data.settings&&localStorage.setItem(G.LOCAL_STORAGE_SETTINGS_KEY,t.data.settings),t.data.presets&&localStorage.setItem(G.LOCAL_STORAGE_PRESETS_KEY,t.data.presets),t.data.journal&&localStorage.setItem(G.LOCAL_STORAGE_JOURNAL_KEY,t.data.journal),{success:!0,message:"Restore successful! The application will now reload."}):{success:!1,message:"Invalid backup file format: Missing data."}}catch(t){return console.error("Failed to parse or restore backup file.",t),{success:!1,message:"The selected file is not a valid backup file."}}}var ac=ne('<span id="copy-feedback" class="copy-feedback visible"> </span>'),ic=ne('<div class="result-group"><h2 class="section-header"> </h2> <div class="result-item"><div class="result-label"> <button id="lock-position-size-btn" class="copy-btn ml-2"><!></button> <button id="copy-btn" class="copy-btn"><!></button> <!></div> <span id="positionSize" class="result-value text-lg"> </span></div> <div class="result-item"><div class="result-label"> <!></div><span id="netLoss" class="result-value"> </span></div> <div class="result-item"><div class="result-label"> <!></div><span id="requiredMargin" class="result-value"> </span></div> <div class="result-item"><div class="result-label"> </div><span id="entryFee" class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span> <span id="liquidationPrice" class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span id="breakEvenPrice" class="result-value"> </span></div></div>');function oc(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt(),a=an();let i=oe(t,"isPositionSizeLocked",8),o=oe(t,"showCopyFeedback",8),c=oe(t,"positionSize",8),l=oe(t,"netLoss",8),d=oe(t,"requiredMargin",8),g=oe(t,"entryFee",8),p=oe(t,"liquidationPrice",8),m=oe(t,"breakEvenPrice",8);function _(){pt("Result","Copy","PositionSize"),navigator.clipboard.writeText(c()),a("copy")}function k(){pt("Result","ToggleLock",i()?"Off":"On"),a("toggleLock")}Nt();var E=ic(),A=h(E),$=h(A,!0);f(A);var T=v(A,2),w=h(T),L=h(w),S=v(L),C=h(S);{var j=fe=>{var Se=mn(),Ae=nr(Se);Pe(Ae,()=>(q(se),u(()=>se.lockClosed))),X(fe,Se)},B=fe=>{var Se=mn(),Ae=nr(Se);Pe(Ae,()=>(q(se),u(()=>se.lockOpen))),X(fe,Se)};Ze(C,fe=>{i()?fe(j):fe(B,!1)})}f(S);var D=v(S,2),I=h(D);Pe(I,()=>(q(se),u(()=>se.copy))),f(D);var U=v(D,2);{var ee=fe=>{var Se=ac(),Ae=h(Se,!0);f(Se),le(Ye=>y(Ae,Ye),[()=>(r(),u(()=>r()("dashboard.summaryResults.copiedFeedback")))]),X(fe,Se)};Ze(U,fe=>{o()&&fe(ee)})}f(w);var de=v(w,2);Rt(de,"",{},{color:"var(--success-color)"});var H=h(de,!0);f(de),f(T);var V=v(T,2),Z=h(V),F=h(Z,!0),z=v(F);{let fe=Ce(()=>(r(),u(()=>r()("dashboard.summaryResults.maxNetLossTooltip"))));gt(z,{get text(){return b(fe)}})}f(Z);var ae=v(Z);Rt(ae,"",{},{color:"var(--danger-color)"});var re=h(ae,!0);f(ae),f(V);var ge=v(V,2),Ie=h(ge),ye=h(Ie,!0),Ve=v(ye);{let fe=Ce(()=>(r(),u(()=>r()("dashboard.summaryResults.requiredMarginTooltip"))));gt(Ve,{get text(){return b(fe)}})}f(Ie);var Ee=v(Ie),at=h(Ee,!0);f(Ee),f(ge);var ze=v(ge,2),Pt=h(ze),mt=h(Pt,!0);f(Pt);var Ut=v(Pt),Mt=h(Ut,!0);f(Ut),f(ze);var sr=v(ze,2),bt=h(sr),ar=h(bt,!0),yr=v(ar);{let fe=Ce(()=>(r(),u(()=>r()("dashboard.summaryResults.estimatedLiquidationPriceTooltip"))));gt(yr,{get text(){return b(fe)}})}f(bt);var hr=v(bt,2),ie=h(hr,!0);f(hr),f(sr);var me=v(sr,2),pe=h(me),we=h(pe,!0),Fe=v(we);{let fe=Ce(()=>(r(),u(()=>r()("dashboard.summaryResults.breakEvenPriceTooltip"))));gt(Fe,{get text(){return b(fe)}})}f(pe);var tt=v(pe);Rt(tt,"",{},{color:"var(--warning-color)"});var _t=h(tt,!0);f(tt),f(me),f(E),le((fe,Se,Ae,Ye,Ke,je,ot,He,Jt,wt)=>{y($,fe),y(L,`${Se??""} `),J(S,"title",Ae),J(S,"aria-label",Ye),J(D,"aria-label",Ke),y(H,c()),y(F,je),y(re,l()),y(ye,ot),y(at,d()),y(mt,He),y(Mt,g()),y(ar,Jt),y(ie,p()),y(we,wt),y(_t,m())},[()=>(r(),u(()=>r()("dashboard.summaryResults.header"))),()=>(r(),u(()=>r()("dashboard.summaryResults.positionSizeLabel"))),()=>(r(),u(()=>r()("dashboard.summaryResults.lockPositionSizeTitle"))),()=>(r(),u(()=>r()("dashboard.summaryResults.lockPositionSizeAriaLabel"))),()=>(r(),u(()=>r()("dashboard.summaryResults.copyPositionSizeAriaLabel"))),()=>(r(),u(()=>r()("dashboard.summaryResults.maxNetLossLabel"))),()=>(r(),u(()=>r()("dashboard.summaryResults.requiredMarginLabel"))),()=>(r(),u(()=>r()("dashboard.summaryResults.entryFeeLabel"))),()=>(r(),u(()=>r()("dashboard.summaryResults.estimatedLiquidationPriceLabel"))),()=>(r(),u(()=>r()("dashboard.summaryResults.breakEvenPriceLabel")))]),O("click",S,k),O("click",D,_),X(e,E),It(),n()}var lc=ne('<div class="flex items-center justify-center gap-2"><button></button> <button></button></div>');function za(e,t){Ct(t,!1);const r=()=>Oe(jn,"$locale",n),s=()=>Oe(Ft,"$_",n),[n,a]=Gt();Nt();var i=lc(),o=h(i);let c;var l=v(o,2);let d;f(i),le((g,p,m,_)=>{c=Ge(o,1,"w-10 h-10 rounded-full flex items-center justify-center text-xl transition-all duration-200 svelte-6zc74b",null,c,g),J(o,"title",p),d=Ge(l,1,"w-10 h-10 rounded-full flex items-center justify-center text-xl transition-all duration-200 svelte-6zc74b",null,d,m),J(l,"title",_)},[()=>({"border-2":r()==="de","border-[var(--accent-color)]":r()==="de","border-transparent":r()!=="de","opacity-50":r()!=="de","hover:opacity-100":r()!=="de"}),()=>s()("languages.german"),()=>({"border-2":r()==="en","border-[var(--accent-color)]":r()==="en","border-transparent":r()!=="en","opacity-50":r()!=="en","hover:opacity-100":r()!=="en"}),()=>s()("languages.english")]),O("click",o,()=>Vs("de")),O("click",l,()=>Vs("en")),X(e,i),It(),a()}var cc=ne('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td><select class="status-select input-field p-1"><option> </option><option> </option><option> </option></select></td><td class="notes-cell"> </td><td class="text-center"><button class="delete-trade-btn text-[var(--danger-color)] hover:opacity-80 p-1 rounded-full"><!></button></td></tr>'),uc=ne('<tr><td colspan="10" class="text-center text-slate-500 py-8"> </td></tr>'),dc=ne('<div class="bg-[var(--bg-primary)] p-4 rounded-lg shadow-md border border-[var(--border-color)]"><div class="flex justify-between items-start"><div><div class="text-lg font-bold text-[var(--text-primary)]"> </div> <div> </div></div> <div class="text-right"><div> </div> <div class="text-xs text-[var(--text-secondary)]">P/L</div></div></div> <div class="mt-4 flex justify-between items-center"><div><div class="text-sm">Status</div> <select class="status-select input-field p-1 mt-1"><option> </option><option> </option><option> </option></select></div> <div class="text-right"><div class="text-sm text-slate-400"> </div> <button class="delete-trade-btn text-[var(--danger-color)] hover:opacity-80 p-1 rounded-full cursor-pointer mt-1"><!></button></div></div></div>'),pc=ne('<div class="text-center text-slate-500 py-8"> </div>'),fc=ne("<tr><td> </td><td> </td><td> </td><td> </td></tr>"),hc=ne('<tr><td colspan="4" class="text-center text-slate-500 py-4"> </td></tr>'),gc=ne('<div id="journal-stats" class="journal-stats"></div> <div class="flex gap-4 my-4"><input type="text" id="journal-search" class="input-field w-full px-3 py-2 rounded-md"/><select id="journal-filter" class="input-field px-3 py-2 rounded-md"><option> </option><option> </option><option> </option><option> </option></select></div> <div class="max-h-[calc(100vh-20rem)] overflow-auto"><div class="hidden md:block"><table class="journal-table w-full"><thead><tr><th> </th><th> </th><th> </th><th> </th><th> </th><th>P/L</th><th> </th><th> </th><th> </th><th> </th></tr></thead><tbody><!><!></tbody></table></div> <div class="md:hidden space-y-4"><!> <!></div></div> <h3 class="text-xl font-bold mt-6 mb-4"> </h3> <div id="symbol-performance-stats" class="max-h-48 overflow-y-auto border border-[var(--border-color)] rounded-md p-2"><table class="journal-table w-full"><thead><tr><th> </th><th> </th><th> </th><th> </th></tr></thead><tbody id="symbol-performance-table-body"><!><!></tbody></table></div> <div class="flex flex-wrap items-center gap-4 mt-4"><button id="export-csv-btn" class="font-bold py-2 px-4 rounded-lg flex items-center gap-2 bg-[var(--btn-success-bg)] hover:bg-[var(--btn-success-hover-bg)] text-[var(--btn-success-text)]"><!><span class="hidden sm:inline"> </span></button> <input type="file" id="import-csv-input" accept=".csv" class="hidden"/> <button id="import-csv-btn" class="font-bold py-2 px-4 rounded-lg flex items-center gap-2 bg-[var(--btn-accent-bg)] hover:bg-[var(--btn-accent-hover-bg)] text-[var(--btn-accent-text)]"><!><span class="hidden sm:inline"> </span></button> <button id="clear-journal-btn" class="font-bold py-2 px-4 rounded-lg flex items-center gap-2 bg-[var(--btn-danger-bg)] hover:bg-[var(--btn-danger-hover-bg)] text-[var(--btn-danger-text)]"><!><span class="hidden sm:inline"> </span></button> <button id="show-journal-readme-btn" class="font-bold p-2.5 rounded-lg bg-[var(--btn-default-bg)] hover:bg-[var(--btn-default-hover-bg)] text-[var(--btn-default-text)]"><!></button></div>',1);function vc(e,t){Ct(t,!1);const r=()=>Oe(br,"$journalStore",o),s=()=>Oe(be,"$tradeStore",o),n=()=>Oe(Y,"$uiStore",o),a=()=>Oe(Ft,"$_",o),i=()=>Oe(jn,"$locale",o),[o,c]=Gt(),l=tr();function d(g){{const p=g.target.files?.[0];p&&K.importFromCSV(p)}}Jr(()=>(r(),s()),()=>{Bt(l,r().filter(g=>g.symbol.toLowerCase().includes(s().journalSearchQuery.toLowerCase())&&(s().journalFilterStatus==="all"||g.status===s().journalFilterStatus)))}),Ps(),Nt();{let g=Ce(()=>(a(),u(()=>a()("journal.title"))));_n(e,{get isOpen(){return n(),u(()=>n().showJournalModal)},get title(){return b(g)},extraClasses:"modal-size-journal",$$events:{close:()=>Y.toggleJournalModal(!1)},children:(p,m)=>{var _=gc(),k=v(nr(_),2),E=h(k);dt(E);var A=v(E);le(()=>{s(),zn(()=>{a()})});var $=h(A),T=h($,!0);f($),$.value=$.__value="all";var w=v($),L=h(w,!0);f(w),w.value=w.__value="Open";var S=v(w),C=h(S,!0);f(S),S.value=S.__value="Won";var j=v(S),B=h(j,!0);f(j),j.value=j.__value="Lost",f(A),f(k);var D=v(k,2),I=h(D),U=h(I),ee=h(U),de=h(ee),H=h(de),V=h(H,!0);f(H);var Z=v(H),F=h(Z,!0);f(Z);var z=v(Z),ae=h(z,!0);f(z);var re=v(z),ge=h(re,!0);f(re);var Ie=v(re),ye=h(Ie,!0);f(Ie);var Ve=v(Ie,2),Ee=h(Ve,!0);f(Ve);var at=v(Ve),ze=h(at,!0);f(at);var Pt=v(at),mt=h(Pt,!0);f(Pt);var Ut=v(Pt),Mt=h(Ut,!0);f(Ut),f(de),f(ee);var sr=v(ee),bt=h(sr);pr(bt,1,()=>b(l),dr,(Le,M)=>{var x=cc(),N=h(x),Q=h(N,!0);f(N);var ue=v(N),Re=h(ue,!0);f(ue);var Ne=v(ue),Ue=h(Ne,!0);f(Ne);var We=v(Ne),rt=h(We,!0);f(We);var it=v(We),ht=h(it,!0);f(it);var qe=v(it),Qe=h(qe,!0);f(qe);var Be=v(qe),zt=h(Be,!0);f(Be);var Je=v(Be),At=h(Je),Me=h(At),kt=h(Me,!0);f(Me),Me.value=Me.__value="Open";var nt=v(Me),Qt=h(nt,!0);f(nt),nt.value=nt.__value="Won";var lt=v(nt),Lt=h(lt,!0);f(lt),lt.value=lt.__value="Lost",f(At),f(Je);var xt=v(Je),yt=h(xt,!0);f(xt);var Xt=v(xt),Yt=h(Xt),Er=h(Yt);Pe(Er,()=>(q(se),u(()=>se.delete))),f(Yt),f(Xt),f(x),le((jt,ir,mr,or,zr,Ar,on,jr,Br,Vr,qr,Wr,Qr)=>{y(Q,jt),y(Re,(b(M),u(()=>b(M).symbol||"-"))),Ge(Ne,1,(b(M),q(G),u(()=>b(M).tradeType===G.TRADE_TYPE_LONG?"text-[var(--success-color)]":"text-[var(--danger-color)]"))),y(Ue,ir),y(rt,mr),y(ht,or),Ge(qe,1,zr),y(Qe,Ar),Ge(Be,1,on),y(zt,jr),J(At,"data-id",(b(M),u(()=>b(M).id))),Xr(Me,(b(M),u(()=>b(M).status==="Open"))),y(kt,Br),Xr(nt,(b(M),u(()=>b(M).status==="Won"))),y(Qt,Vr),Xr(lt,(b(M),u(()=>b(M).status==="Lost"))),y(Lt,qr),J(xt,"title",Wr),y(yt,(b(M),u(()=>b(M).notes||""))),J(Yt,"data-id",(b(M),u(()=>b(M).id))),J(Yt,"title",Qr)},[()=>(b(M),i(),u(()=>new Date(b(M).date).toLocaleString(i()||void 0,{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}))),()=>(b(M),u(()=>b(M).tradeType.charAt(0).toUpperCase()+b(M).tradeType.slice(1))),()=>(b(M),u(()=>b(M).entryPrice.toFixed(4))),()=>(b(M),u(()=>b(M).stopLossPrice.toFixed(4))),()=>(b(M),u(()=>b(M).totalNetProfit.gt(0)?"text-[var(--success-color)]":b(M).totalNetProfit.lt(0)?"text-[var(--danger-color)]":"")),()=>(b(M),u(()=>b(M).totalNetProfit.toFixed(2))),()=>(b(M),u(()=>b(M).totalRR.gte(2)?"text-[var(--success-color)]":b(M).totalRR.gte(1.5)?"text-[var(--warning-color)]":"text-[var(--danger-color)]")),()=>(b(M),u(()=>b(M).totalRR.toFixed(2))),()=>(a(),u(()=>a()("journal.filterOpen"))),()=>(a(),u(()=>a()("journal.filterWon"))),()=>(a(),u(()=>a()("journal.filterLost"))),()=>(a(),u(()=>a()("journal.clickToExpand"))),()=>(a(),u(()=>a()("journal.delete")))]),O("change",At,jt=>K.updateTradeStatus(b(M).id,jt.target.value)),O("click",xt,jt=>jt.target.classList.toggle("expanded")),O("click",Yt,()=>K.deleteTrade(b(M).id)),X(Le,x)});var ar=v(bt);{var yr=Le=>{var M=uc(),x=h(M),N=h(x,!0);f(x),f(M),le(Q=>y(N,Q),[()=>(a(),u(()=>a()("journal.noTradesYet")))]),X(Le,M)};Ze(ar,Le=>{b(l),u(()=>b(l).length===0)&&Le(yr)})}f(sr),f(U),f(I);var hr=v(I,2),ie=h(hr);pr(ie,1,()=>b(l),dr,(Le,M)=>{var x=dc(),N=h(x),Q=h(N),ue=h(Q),Re=h(ue,!0);f(ue);var Ne=v(ue,2),Ue=h(Ne,!0);f(Ne),f(Q);var We=v(Q,2),rt=h(We),it=h(rt,!0);f(rt),da(2),f(We),f(N);var ht=v(N,2),qe=h(ht),Qe=v(h(qe),2),Be=h(Qe),zt=h(Be,!0);f(Be),Be.value=Be.__value="Open";var Je=v(Be),At=h(Je,!0);f(Je),Je.value=Je.__value="Won";var Me=v(Je),kt=h(Me,!0);f(Me),Me.value=Me.__value="Lost",f(Qe),f(qe);var nt=v(qe,2),Qt=h(nt),lt=h(Qt,!0);f(Qt);var Lt=v(Qt,2),xt=h(Lt);Pe(xt,()=>(q(se),u(()=>se.delete))),f(Lt),f(nt),f(ht),f(x),le((yt,Xt,Yt,Er,jt,ir,mr,or)=>{y(Re,(b(M),u(()=>b(M).symbol||"-"))),Ge(Ne,1,`text-sm ${b(M),q(G),u(()=>b(M).tradeType===G.TRADE_TYPE_LONG?"text-[var(--success-color)]":"text-[var(--danger-color)]")??""}`),y(Ue,yt),Ge(rt,1,`text-lg font-bold ${Xt??""}`),y(it,Yt),J(Qe,"data-id",(b(M),u(()=>b(M).id))),Xr(Be,(b(M),u(()=>b(M).status==="Open"))),y(zt,Er),Xr(Je,(b(M),u(()=>b(M).status==="Won"))),y(At,jt),Xr(Me,(b(M),u(()=>b(M).status==="Lost"))),y(kt,ir),y(lt,mr),J(Lt,"data-id",(b(M),u(()=>b(M).id))),J(Lt,"title",or)},[()=>(b(M),u(()=>b(M).tradeType.charAt(0).toUpperCase()+b(M).tradeType.slice(1))),()=>(b(M),u(()=>b(M).totalNetProfit.gt(0)?"text-[var(--success-color)]":b(M).totalNetProfit.lt(0)?"text-[var(--danger-color)]":"")),()=>(b(M),u(()=>b(M).totalNetProfit.toFixed(2))),()=>(a(),u(()=>a()("journal.filterOpen"))),()=>(a(),u(()=>a()("journal.filterWon"))),()=>(a(),u(()=>a()("journal.filterLost"))),()=>(b(M),u(()=>new Date(b(M).date).toLocaleString("de-DE",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}))),()=>(a(),u(()=>a()("journal.delete")))]),O("change",Qe,yt=>K.updateTradeStatus(b(M).id,yt.target.value)),O("click",Lt,()=>K.deleteTrade(b(M).id)),X(Le,x)});var me=v(ie,2);{var pe=Le=>{var M=pc(),x=h(M,!0);f(M),le(N=>y(x,N),[()=>(a(),u(()=>a()("journal.noTradesYet")))]),X(Le,M)};Ze(me,Le=>{b(l),u(()=>b(l).length===0)&&Le(pe)})}f(hr),f(D);var we=v(D,2),Fe=h(we,!0);f(we);var tt=v(we,2),_t=h(tt),fe=h(_t),Se=h(fe),Ae=h(Se),Ye=h(Ae,!0);f(Ae);var Ke=v(Ae),je=h(Ke,!0);f(Ke);var ot=v(Ke),He=h(ot,!0);f(ot);var Jt=v(ot),wt=h(Jt,!0);f(Jt),f(Se),f(fe);var Ir=v(fe),Sr=h(Ir);pr(Sr,1,()=>(q(K),r(),u(()=>Object.entries(K.calculator.calculateSymbolPerformance(r())))),dr,(Le,M)=>{var x=xi(()=>yi(b(M),2));let N=()=>b(x)[0],Q=()=>b(x)[1];var ue=fc(),Re=h(ue),Ne=h(Re,!0);f(Re);var Ue=v(Re),We=h(Ue,!0);f(Ue);var rt=v(Ue),it=h(rt);f(rt);var ht=v(rt),qe=h(ht,!0);f(ht),f(ue),le((Qe,Be,zt)=>{y(Ne,N()),y(We,(Q(),u(()=>Q().totalTrades))),y(it,`${Qe??""}%`),Ge(ht,1,Be),y(qe,zt)},[()=>(Q(),u(()=>(Q().totalTrades>0?Q().wonTrades/Q().totalTrades*100:0).toFixed(1))),()=>(Q(),u(()=>Q().totalProfitLoss.gt(0)?"text-[var(--success-color)]":Q().totalProfitLoss.lt(0)?"text-[var(--danger-color)]":"")),()=>(Q(),u(()=>Q().totalProfitLoss.toFixed(2)))]),X(Le,ue)});var Fr=v(Sr);{var Pr=Le=>{var M=hc(),x=h(M),N=h(x,!0);f(x),f(M),le(Q=>y(N,Q),[()=>(a(),u(()=>a()("journal.noData")))]),X(Le,M)};Ze(Fr,Le=>{q(K),r(),u(()=>Object.keys(K.calculator.calculateSymbolPerformance(r())).length===0)&&Le(Pr)})}f(Ir),f(_t),f(tt);var Mr=v(tt,2),Dt=h(Mr),Dr=h(Dt);Pe(Dr,()=>(q(se),u(()=>se.export)));var Tt=v(Dr),Kr=h(Tt,!0);f(Tt),f(Dt);var Zt=v(Dt,2),gr=v(Zt,2),Wt=h(gr);Pe(Wt,()=>(q(se),u(()=>se.import)));var Et=v(Wt),vr=h(Et,!0);f(Et),f(gr);var Ot=v(gr,2),Hr=h(Ot);Pe(Hr,()=>(q(se),u(()=>se.delete)));var Or=v(Hr),kn=h(Or,!0);f(Or),f(Ot);var Tr=v(Ot,2),xn=h(Tr);Pe(xn,()=>(q(se),u(()=>se.book))),f(Tr),f(Mr),le((Le,M,x,N,Q,ue,Re,Ne,Ue,We,rt,it,ht,qe,Qe,Be,zt,Je,At,Me,kt,nt,Qt,lt,Lt,xt,yt)=>{J(E,"placeholder",Le),y(T,M),y(L,x),y(C,N),y(B,Q),y(V,ue),y(F,Re),y(ae,Ne),y(ge,Ue),y(ye,We),y(Ee,rt),y(ze,it),y(mt,ht),y(Mt,qe),y(Fe,Qe),y(Ye,Be),y(je,zt),y(He,Je),y(wt,At),J(Dt,"title",Me),y(Kr,kt),J(gr,"title",nt),y(vr,Qt),J(Ot,"title",lt),y(kn,Lt),J(Tr,"title",xt),J(Tr,"aria-label",yt)},[()=>(a(),u(()=>a()("journal.searchSymbolPlaceholder"))),()=>(a(),u(()=>a()("journal.filterAll"))),()=>(a(),u(()=>a()("journal.filterOpen"))),()=>(a(),u(()=>a()("journal.filterWon"))),()=>(a(),u(()=>a()("journal.filterLost"))),()=>(a(),u(()=>a()("journal.date"))),()=>(a(),u(()=>a()("journal.symbol"))),()=>(a(),u(()=>a()("journal.type"))),()=>(a(),u(()=>a()("journal.entry"))),()=>(a(),u(()=>a()("journal.sl"))),()=>(a(),u(()=>a()("journal.rr"))),()=>(a(),u(()=>a()("journal.status"))),()=>(a(),u(()=>a()("journal.notes"))),()=>(a(),u(()=>a()("journal.action"))),()=>(a(),u(()=>a()("journal.performancePerSymbol"))),()=>(a(),u(()=>a()("journal.symbol"))),()=>(a(),u(()=>a()("journal.trades"))),()=>(a(),u(()=>a()("journal.profitPercent"))),()=>(a(),u(()=>a()("journal.totalPL"))),()=>(a(),u(()=>a()("journal.exportCsvTitle"))),()=>(a(),u(()=>a()("journal.export"))),()=>(a(),u(()=>a()("journal.importCsvTitle"))),()=>(a(),u(()=>a()("journal.import"))),()=>(a(),u(()=>a()("journal.clearJournalTitle"))),()=>(a(),u(()=>a()("journal.clearAll"))),()=>(a(),u(()=>a()("journal.showJournalInstructionsTitle"))),()=>(a(),u(()=>a()("journal.showJournalInstructionsAriaLabel")))]),Vn(E,()=>s().journalSearchQuery,Le=>Xe(be,u(s).journalSearchQuery=Le,u(s))),Bn(A,()=>s().journalFilterStatus,Le=>Xe(be,u(s).journalFilterStatus=Le,u(s))),O("click",Dt,function(...Le){K.exportToCSV?.apply(this,Le)}),O("change",Zt,d),O("click",gr,()=>document.getElementById("import-csv-input")?.click()),O("click",Ot,()=>{K.clearJournal()}),O("click",Tr,()=>K.uiManager.showReadme("journal")),X(p,_)},$$slots:{default:!0}})}It(),c()}var mc=Si('<svg><path fill="currentColor" d="m 368.19213,443.69403 c -17.75918,-17.83356 -35.32409,-35.36188 -52.73108,-53.04565 -3.25012,-3.30182 -6.29785,-4.25833 -10.99423,-3.10794 -18.2789,4.47744 -36.59079,4.20859 -54.86528,-0.61139 -1.63113,-0.43021 -4.36682,0.96609 -5.76033,2.34945 -21.97337,21.81306 -43.65994,43.91645 -65.72992,65.63038 -15.96438,15.70687 -34.74307,22.86377 -57.34359,17.2084 -19.63965,-4.91446 -34.583976,-22.10156 -36.726279,-42.55878 -2.013794,-19.22998 4.471596,-35.41549 17.827649,-48.92819 21.65592,-21.90985 43.46341,-43.67108 65.35802,-65.3424 3.05986,-3.02863 4.03183,-5.7447 3.00771,-10.04285 -4.35828,-18.29099 -4.05675,-36.60971 0.26571,-54.93793 0.44013,-1.86629 -0.73366,-4.85278 -2.17685,-6.31284 -22.12738,-22.38587 -44.37544,-44.65331 -66.69758,-66.84558 -16.265483,-16.17083 -22.463832,-41.4073 -14.673954,-60.6388 11.023613,-27.214885 40.855214,-39.784869 68.193394,-28.815463 8.78198,3.523766 16.37799,8.547148 23.06711,15.359193 21.24807,21.63847 42.84495,42.93417 64.13673,64.53024 3.27711,3.32394 6.03239,4.18951 10.8009,3.01225 17.2374,-4.25552 34.6951,-4.1441 51.95844,0.0504 4.17547,1.01453 6.76138,0.1496 9.65027,-2.76884 22.02353,-22.24874 44.1582,-44.38774 66.3067,-66.51243 16.38031,-16.362715 41.61197,-21.853827 61.78171,-13.551977 27.1784,11.186592 38.74996,43.530877 25.79364,70.770247 -5.67887,11.93921 -14.91779,20.66989 -23.96454,29.71373 -18.72809,18.72206 -37.50458,37.39625 -56.10092,56.24821 -1.29728,1.31508 -2.13581,4.12448 -1.73444,5.91281 4.18896,18.6652 4.52042,37.31577 0.23801,55.965 -0.76026,3.31091 -0.23871,5.48685 2.23117,7.93347 22.25589,22.04624 44.50085,44.10684 66.47454,66.43335 12.45789,12.65784 19.00611,27.8873 17.95215,45.99774 -1.87506,32.22037 -32.39932,53.73136 -64.25836,45.76297 -12.04474,-3.01254 -22.39264,-9.09674 -30.87167,-18.28543 -3.27289,-3.54678 -6.77063,-6.88604 -10.41483,-10.57135 M 232.49491,194.19655 c -1.28647,0.75679 -2.5885,1.48845 -3.85716,2.274 -47.50238,29.41312 -62.28815,91.552 -28.06395,139.28787 36.07182,50.31296 109.57417,53.4184 150.79726,7.16041 36.49926,-40.95722 30.80853,-106.8602 -12.96518,-139.8064 -32.77075,-24.66487 -68.28763,-27.37929 -105.91097,-8.91588 z"></path><path fill="currentColor" d="m 509.84585,272.06046 c 13.48383,0.009 26.46771,-0.006 39.45142,0.037 5.7445,0.019 8.31683,2.17148 8.39648,6.83933 0.0808,4.73196 -2.45136,6.987 -8.11786,7.0014 -23.4707,0.0597 -46.9415,0.0949 -70.41226,0.0919 -5.36679,-7e-4 -7.87692,-2.23187 -7.95349,-6.78027 -0.0773,-4.595 2.78317,-7.16629 8.17306,-7.18622 9.98743,-0.037 19.9751,-0.007 30.46265,-0.003 z"></path><path fill="currentColor" d="m 14.878091,286.0051 c -3.15646,-0.014 -5.8216338,0.033 -8.4824628,-0.0536 C 2.1273162,285.81264 -0.01195178,283.4132 5.0220122e-5,279.27425 0.01183922,275.20904 2.2682222,272.85586 6.2589282,272.16857 c 0.324372,-0.0559 0.664563,-0.0253 0.997415,-0.0257 23.8035908,-0.0272 47.6072368,-0.0894 71.4107258,-0.0507 4.979134,0.008 7.798561,2.74121 7.837059,7.0903 0.04186,4.73044 -2.227172,6.81359 -7.712036,6.82092 -21.14022,0.0283 -42.280506,0.006 -63.914001,0.002 z"></path><path fill="currentColor" d="m 285.04495,82.778309 c -2.22159,3.714348 -5.66049,5.102494 -8.6789,3.333489 -2.20959,-1.294998 -4.40079,-4.761574 -4.43728,-7.291412 -0.34269,-23.775223 -0.2471,-47.557213 -0.20621,-71.3371226 0.008,-4.526778 2.83826,-7.43896695 6.87323,-7.48271795383 4.03082,-0.0437069962 7.1156,2.54225895383 7.13412,6.68811095383 0.11002,24.6100926 0.0711,49.2208676 0.052,73.8313906 -4.9e-4,0.634331 -0.34778,1.268402 -0.737,2.258262 z"></path><path fill="currentColor" d="m 271.73586,488.06003 c 0.0114,-3.49414 -0.10226,-6.49915 0.0608,-9.48911 0.2171,-3.97946 2.20953,-6.63714 6.36676,-6.99896 4.15329,-0.36151 7.31466,2.45181 7.64361,6.84192 0.24848,3.31561 0.15888,6.65924 0.15915,9.99039 0.002,20.65521 0.0248,41.31048 -0.0497,61.96545 -0.0199,5.53125 -3.39505,8.51166 -8.50604,7.69501 -4.5629,-0.72907 -5.61017,-3.92694 -5.60407,-8.04291 0.0304,-20.48852 -0.0385,-40.97729 -0.0706,-61.96179 z"></path><path fill="currentColor" d="m 281.75018,366.19324 c -38.4475,0.77676 -70.50927,-21.62763 -83.91504,-54.65668 -17.14098,-42.23175 1.82873,-90.89371 42.96132,-110.87689 47.26838,-22.96408 104.36839,0.65115 120.5807,50.80008 15.86966,49.08899 -10.80539,98.60974 -60.98022,111.89374 -5.89096,1.55966 -12.10148,1.91244 -18.64676,2.83975 m -3.39969,-11.89981 c 16.27814,-0.85514 31.68292,-4.84287 44.69134,-14.93805 26.46036,-20.53452 36.05884,-47.44455 27.73413,-79.9754 -9.22338,-36.04268 -41.04879,-55.58698 -73.46087,-55.20992 -16.42963,0.19113 -31.73479,5.74489 -45.09757,16.33232 -25.18144,19.95149 -35.21895,55.38477 -23.12501,85.35593 12.34427,30.59158 35.97711,45.78381 69.25798,48.43512 z"></path><path fill="currentColor" d="m 327.09487,293.14267 c -7.96377,24.1861 -29.64001,38.92615 -54.27014,35.72873 -29.90694,-3.88248 -48.81813,-30.34329 -43.14807,-59.97891 5.14438,-26.88794 32.94937,-46.14794 62.01825,-38.44634 25.86096,6.85166 43.56247,34.1465 35.39996,62.69652 m -84.70518,-7.42773 c 2.34387,19.14825 23.61445,34.90789 45.43965,29.32315 17.45032,-4.46524 29.74927,-20.98502 28.1156,-39.50482 -1.60242,-18.16571 -16.46713,-32.79091 -34.27847,-33.72617 -24.62354,-1.29297 -42.82512,18.55469 -39.27678,43.90784 z"></path></svg>');function bc(e,t){const r=Ei(t,["children","$$slots","$$events","$$legacy"]);var s=mc();Ai(s,()=>({version:"1.1",viewBox:"0 0 557.69562 558.19806",...r})),X(e,s)}var _c=ne('<button class="btn-icon-accent"><svg viewBox="0 0 16 16" fill="currentColor" class="w-6 h-6"><path d="M 6.25,1 6.1,2.84 A 5.5,5.5 0 0 0 4.49,3.77 L 2.81,2.98 1.06,6.02 2.58,7.07 A 5.5,5.5 0 0 0 2.5,8 5.5,5.5 0 0 0 2.58,8.93 L 1.06,9.98 2.81,13.02 4.48,12.23 A 5.5,5.5 0 0 0 6.1,13.15 L 6.25,15 H 9.75 L 9.9,13.16 A 5.5,5.5 0 0 0 11.51,12.23 L 13.19,13.02 14.94,9.98 13.42,8.93 A 5.5,5.5 0 0 0 13.5,8 5.5,5.5 0 0 0 13.42,7.07 L 14.94,6.02 13.19,2.98 11.52,3.77 A 5.5,5.5 0 0 0 9.9,2.85 L 9.75,1 Z M 8,6 A 2,2 0 0 1 10,8 2,2 0 0 1 8,10 2,2 0 0 1 6,8 2,2 0 0 1 8,6 Z"></path></svg></button>');function wc(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",s),[s,n]=Gt();Nt();var a=_c();le((i,o)=>{J(a,"aria-label",i),J(a,"title",o)},[()=>r()("settings.title"),()=>r()("settings.title")]),O("click",a,()=>Y.toggleSettingsModal(!0)),X(e,a),It(),n()}var kc=ne("<option> </option>"),xc=ne('<div class="space-y-6"><div class="flex justify-between items-center"><span class="text-sm font-medium text-text-primary"> </span> <div class="w-1/2 flex justify-end"><!></div></div> <div class="flex justify-between items-center"><span class="text-sm font-medium text-text-primary"> </span> <div class="flex items-center gap-2 w-1/2 justify-end"><button id="backup-btn-modal" class="btn-icon"><!></button> <button id="restore-btn-modal" class="btn-icon"><!></button></div></div> <div class="flex justify-between items-center"><label for="theme-select" class="text-sm font-medium text-text-primary"> </label> <div class="flex items-center gap-2 w-1/2"><span class="text-xl"><!></span> <select id="theme-select" class="input-field w-full"></select></div></div></div>'),yc=ne('<input type="file" class="hidden" accept=".json,application/json"/> <!>',1);function Sc(e,t){Ct(t,!1);const r=()=>Oe(Ft,"$_",n),s=()=>Oe(Y,"$uiStore",n),[n,a]=Gt();let i=tr();function o(){Y.toggleSettingsModal(!1)}function c(){Da(),pt("Backup","Click","CreateBackup_SettingsModal")}function l(){b(i).click()}function d(_){const k=_.target,E=k.files?.[0];if(!E)return;const A=new FileReader;A.onload=$=>{const T=$.target?.result;Ht.show(r()("app.restoreConfirmTitle"),r()("app.restoreConfirmMessage"),"confirm").then(w=>{if(w){const L=Oa(T);L.success?(Y.showFeedback("save"),setTimeout(()=>{window.location.reload()},1e3)):Y.showError(L.message)}k.value=""})},A.onerror=()=>{Y.showError("app.fileReadError")},A.readAsText(E),pt("Backup","Click","RestoreBackup_SettingsModal")}Nt();var g=yc(),p=nr(g);Ts(p,_=>Bt(i,_),()=>b(i));var m=v(p,2);{let _=Ce(()=>r()("settings.title"));_n(m,{get isOpen(){return s().showSettingsModal},get title(){return b(_)},extraClasses:"modal-size-sm",$$events:{close:o},children:(k,E)=>{var A=xc(),$=h(A),T=h($),w=h(T,!0);f(T);var L=v(T,2),S=h(L);za(S,{}),f(L),f($);var C=v($,2),j=h(C),B=h(j,!0);f(j);var D=v(j,2),I=h(D),U=h(I);Pe(U,()=>se.export),f(I);var ee=v(I,2),de=h(ee);Pe(de,()=>se.import),f(ee),f(D),f(C);var H=v(C,2),V=h(H),Z=h(V,!0);f(V);var F=v(V,2),z=h(F),ae=h(z);Pe(ae,()=>us[s().currentTheme]),f(z);var re=v(z,2);le(()=>{s(),zn(()=>{})}),pr(re,5,()=>tn,dr,(ge,Ie)=>{var ye=kc(),Ve=h(ye,!0);f(ye);var Ee={};le(at=>{y(Ve,at),Ee!==(Ee=b(Ie))&&(ye.value=(ye.__value=b(Ie))??"")},[()=>b(Ie).charAt(0).toUpperCase()+b(Ie).slice(1).replace("-"," ")]),X(ge,ye)}),f(re),f(F),f(H),f(A),le((ge,Ie,ye,Ve,Ee,at,ze)=>{y(w,ge),y(B,Ie),J(I,"title",ye),J(I,"aria-label",Ve),J(ee,"title",Ee),J(ee,"aria-label",at),y(Z,ze)},[()=>r()("settings.language"),()=>r()("settings.backup"),()=>r()("app.backupButtonTitle"),()=>r()("app.backupButtonAriaLabel"),()=>r()("app.restoreButtonTitle"),()=>r()("app.restoreButtonAriaLabel"),()=>r()("settings.theme")]),O("click",I,c),O("click",ee,l),Bn(re,()=>s().currentTheme,ge=>Xe(Y,u(s).currentTheme=ge,u(s))),O("change",re,ge=>Y.setTheme(ge.currentTarget.value)),X(k,A)},$$slots:{default:!0}})}O("change",p,d),X(e,g),It(),a()}var Pc=ne("<option> </option>"),Tc=ne('<div id="error-message" class="text-center text-sm font-medium mt-4 md:col-span-2"> </div>'),Ec=ne('<div id="total-metrics-group" class="result-group"><h2 class="section-header"> <!></h2> <div class="result-item"><span class="result-label"> <!></span><span id="riskAmountCurrency" class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span id="totalFees" class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span id="maxPotentialProfit" class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span id="totalRR" class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span id="totalNetProfit" class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span id="totalPercentSold" class="result-value"> </span></div></div>'),Ac=ne('<div class="result-group !mt-0 md:!mt-6"><h2 class="section-header"> </h2> <div class="result-item"><span class="result-label"> </span><span class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span class="result-value"> </span></div> <div class="result-item"><span class="result-label"> <!></span><span class="result-value"> </span></div> <div class="result-item"><span class="result-label"> </span><span class="result-value"> </span></div></div>'),Lc=ne('<span id="save-feedback"> </span>'),Rc=ne('<div id="changelog-content" class="prose dark:prose-invert"><!></div>'),$c=ne('<div id="guide-content" class="prose dark:prose-invert"><!></div>'),Nc=ne('<input type="file" class="hidden" accept=".json,application/json"/> <main class="my-8 w-full max-w-4xl mx-auto calculator-wrapper rounded-2xl shadow-2xl p-6 sm:p-8 fade-in"><div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4"><div class="flex justify-between items-center w-full md:w-auto"><div class="flex items-center gap-3 text-[var(--text-primary)]"><!> <h1 class="text-2xl sm:text-3xl font-bold"> </h1></div> <button id="view-journal-btn-mobile" class="text-sm md:hidden bg-[var(--btn-accent-bg)] hover:bg-[var(--btn-accent-hover-bg)] text-[var(--btn-accent-text)] font-bold py-2 px-4 rounded-lg"> </button></div> <div class="flex items-center flex-wrap justify-end gap-2 w-full md:w-auto"><div class="flex items-center flex-wrap justify-end gap-2 md:order-1"><select id="preset-loader" class="input-field px-3 py-2 rounded-md text-sm"><option> </option><!></select> <button id="save-preset-btn" class="text-sm bg-[var(--btn-default-bg)] hover:bg-[var(--btn-default-hover-bg)] text-[var(--btn-default-text)] font-bold py-2.5 px-2.5 rounded-lg"><!></button> <button id="delete-preset-btn" class="text-sm bg-[var(--btn-danger-bg)] hover:bg-[var(--btn-danger-hover-bg)] text-[var(--btn-danger-text)] font-bold py-2.5 px-2.5 rounded-lg disabled:cursor-not-allowed"><!></button> <button id="reset-btn" class="text-sm bg-[var(--btn-default-bg)] hover:bg-[var(--btn-default-hover-bg)] text-[var(--btn-default-text)] font-bold py-2.5 px-2.5 rounded-lg flex items-center gap-2"><!></button> <button id="theme-switcher" class="text-sm bg-[var(--btn-default-bg)] hover:bg-[var(--btn-default-hover-bg)] text-[var(--btn-default-text)] font-bold py-2 px-2.5 rounded-lg"><!></button></div> <button id="view-journal-btn-desktop" class="hidden md:inline-block text-sm bg-[var(--btn-accent-bg)] hover:bg-[var(--btn-accent-hover-bg)] text-[var(--btn-accent-text)] font-bold py-2 px-4 rounded-lg md:order-2"> </button></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4"><div><!> <!></div> <!></div> <!> <!> <section id="results" class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-x-8"><div><!> <!></div> <div id="tp-results-container"></div> <!> <footer class="md:col-span-2"><textarea id="tradeNotes" class="input-field w-full px-4 py-2 rounded-md mb-4" rows="2"></textarea> <div class="flex items-center gap-4"><button id="save-journal-btn" class="w-full font-bold py-3 px-4 rounded-lg btn-primary-action"> </button> <button id="show-dashboard-readme-btn" class="font-bold p-3 rounded-lg btn-secondary-action"><!></button> <!></div> <div class="mt-4 flex justify-between items-center"><!> <!> <div class="flex items-center gap-2"><button id="backup-btn" class="text-sm bg-[var(--btn-default-bg)] hover:bg-[var(--btn-default-hover-bg)] text-[var(--btn-default-text)] font-bold py-2.5 px-2.5 rounded-lg"><!></button> <button id="restore-btn" class="text-sm bg-[var(--btn-default-bg)] hover:bg-[var(--btn-default-hover-bg)] text-[var(--btn-default-text)] font-bold py-2.5 px-2.5 rounded-lg"><!></button></div></div></footer></section></main> <footer class="w-full max-w-4xl mx-auto text-center py-4 text-sm text-gray-500 flex justify-center items-center gap-4"><span> </span> <button class="text-link"> </button> <button class="text-link">Changelog</button></footer> <!> <!> <!> <!> <!>',1);function Oc(e,t){Ct(t,!1);const r=()=>Oe(Y,"$uiStore",c),s=()=>Oe(jn,"$locale",c),n=()=>Oe(be,"$tradeStore",c),a=()=>Oe(Ft,"$_",c),i=()=>Oe(Mn,"$presetStore",c),o=()=>Oe(fn,"$resultsStore",c),[c,l]=Gt(),d=tr();let g=tr(),p=tr(""),m=tr("");Pi(()=>{K.init()});function _(x){Y.showError(x.detail)}function k(x){_e(N=>({...N,targets:x.detail}))}function E(x){const N=x.detail,Q=n().targets.filter((ue,Re)=>Re!==N);_e(ue=>({...ue,targets:Q})),K.adjustTpPercentages(null)}function A(x="forward"){const N=tn.indexOf(r().currentTheme);let Q;x==="forward"?Q=(N+1)%tn.length:Q=(N-1+tn.length)%tn.length,Y.setTheme(tn[Q])}function $(x){const N=x.target.value;K.loadPreset(N)}function T(x){if(x&&x.key&&x.key.toLowerCase()==="escape"){x.preventDefault(),r().showJournalModal&&Y.toggleJournalModal(!1),r().showGuideModal&&Y.toggleGuideModal(!1),r().showChangelogModal&&Y.toggleChangelogModal(!1),et(Ht).isOpen&&Ht._handleModalConfirm(!1);return}if(x&&x.key&&x.altKey)switch(x.key.toLowerCase()){case"l":x.preventDefault(),_e(N=>({...N,tradeType:G.TRADE_TYPE_LONG}));break;case"s":x.preventDefault(),_e(N=>({...N,tradeType:G.TRADE_TYPE_SHORT}));break;case"r":x.preventDefault(),ls();break;case"j":x.preventDefault(),Y.toggleJournalModal(!0);break}}function w(){Da(),pt("Backup","Click","CreateBackup")}function L(){b(g).click()}function S(x){const N=x.target,Q=N.files?.[0];if(!Q)return;const ue=new FileReader;ue.onload=Re=>{const Ne=Re.target?.result;Ht.show(a()("app.restoreConfirmTitle"),a()("app.restoreConfirmMessage"),"confirm").then(Ue=>{if(Ue){const We=Oa(Ne);We.success?(Y.showFeedback("save"),setTimeout(()=>{window.location.reload()},1e3)):Y.showError(We.message)}N.value=""})},ue.onerror=()=>{Y.showError("app.fileReadError")},ue.readAsText(Q),pt("Backup","Click","RestoreBackup")}Jr(()=>(r(),b(p),gn),()=>{r().showChangelogModal&&b(p)===""&&gn("changelog").then(x=>{Bt(p,x.html)})}),Jr(()=>(r(),b(m),gn),()=>{r().showGuideModal&&b(m)===""&&gn("guide").then(x=>{Bt(m,x.html)})}),Jr(()=>s(),()=>{s()&&(Bt(m,""),Bt(p,""))}),Jr(()=>(n(),K),()=>{n().accountSize,n().riskPercentage,n().entryPrice,n().stopLossPrice,n().leverage,n().fees,n().symbol,n().atrValue,n().atrMultiplier,n().useAtrSl,n().atrMode,n().atrTimeframe,n().tradeType,n().targets,n().accountSize!==void 0&&n().riskPercentage!==void 0&&n().entryPrice!==void 0&&n().leverage!==void 0&&n().fees!==void 0&&n().symbol!==void 0&&n().atrValue!==void 0&&n().atrMultiplier!==void 0&&n().useAtrSl!==void 0&&n().tradeType!==void 0&&n().targets!==void 0&&K.calculateAndDisplay()}),Jr(()=>r(),()=>{Bt(d,r().currentTheme.split("-").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" "))}),Ps(),Nt();var C=Nc();O("keydown",ua,T);var j=nr(C);Ts(j,x=>Bt(g,x),()=>b(g));var B=v(j,2),D=h(B),I=h(D),U=h(I),ee=h(U);bc(ee,{class:"h-8 w-8"});var de=v(ee,2),H=h(de,!0);f(de),f(U);var V=v(U,2),Z=h(V,!0);f(V),he(()=>O("click",V,()=>Y.toggleJournalModal(!0))),ke(V,(x,N)=>ut?.(x,N),()=>({category:"Navigation",action:"Click",name:"ViewJournalMobile"})),f(I);var F=v(I,2),z=h(F),ae=h(z);le(()=>{i(),zn(()=>{a()})});var re=h(ae),ge=h(re,!0);f(re),re.value=re.__value="";var Ie=v(re);pr(Ie,1,()=>(i(),u(()=>i().availablePresets)),dr,(x,N)=>{var Q=Pc(),ue=h(Q,!0);f(Q);var Re={};le(()=>{y(ue,b(N)),Re!==(Re=b(N))&&(Q.value=(Q.__value=b(N))??"")}),X(x,Q)}),f(ae);var ye=v(ae,2),Ve=h(ye);Pe(Ve,()=>(q(se),u(()=>se.save))),f(ye),he(()=>O("click",ye,function(...x){K.savePreset?.apply(this,x)})),ke(ye,(x,N)=>ut?.(x,N),()=>({category:"Presets",action:"Click",name:"SavePreset"}));var Ee=v(ye,2),at=h(Ee);Pe(at,()=>(q(se),u(()=>se.delete))),f(Ee),he(()=>O("click",Ee,function(...x){K.deletePreset?.apply(this,x)})),ke(Ee,(x,N)=>ut?.(x,N),()=>({category:"Presets",action:"Click",name:"DeletePreset"}));var ze=v(Ee,2),Pt=h(ze);Pe(Pt,()=>(q(se),u(()=>se.broom))),f(ze),he(()=>O("click",ze,function(...x){ls?.apply(this,x)})),ke(ze,(x,N)=>ut?.(x,N),()=>({category:"Actions",action:"Click",name:"ResetAll"}));var mt=v(ze,2),Ut=h(mt);Pe(Ut,()=>(q(us),r(),u(()=>us[r().currentTheme]))),f(mt),he(()=>O("click",mt,()=>A("forward"))),he(()=>O("contextmenu",mt,Oi(()=>A("backward")))),ke(mt,(x,N)=>ut?.(x,N),()=>({category:"Settings",action:"Click",name:"SwitchTheme"})),f(z);var Mt=v(z,2),sr=h(Mt,!0);f(Mt),he(()=>O("click",Mt,()=>Y.toggleJournalModal(!0))),ke(Mt,(x,N)=>ut?.(x,N),()=>({category:"Navigation",action:"Click",name:"ViewJournalDesktop"})),f(F),f(D);var bt=v(D,2),ar=h(bt),yr=h(ar);Io(yr,{get tradeType(){return n().tradeType},set tradeType(x){Xe(be,u(n).tradeType=x,u(n))},get leverage(){return n().leverage},set leverage(x){Xe(be,u(n).leverage=x,u(n))},get fees(){return n().fees},set fees(x){Xe(be,u(n).fees=x,u(n))},$$legacy:!0});var hr=v(yr,2);zo(hr,{get isRiskAmountLocked(){return n(),u(()=>n().isRiskAmountLocked)},get isPositionSizeLocked(){return n(),u(()=>n().isPositionSizeLocked)},get accountSize(){return n().accountSize},set accountSize(x){Xe(be,u(n).accountSize=x,u(n))},get riskPercentage(){return n().riskPercentage},set riskPercentage(x){Xe(be,u(n).riskPercentage=x,u(n))},get riskAmount(){return n().riskAmount},set riskAmount(x){Xe(be,u(n).riskAmount=x,u(n))},$$events:{toggleRiskAmountLock:()=>K.toggleRiskAmountLock()},$$legacy:!0}),f(ar);var ie=v(ar,2);Ml(ie,{get atrFormulaDisplay(){return o(),u(()=>o().atrFormulaText)},get showAtrFormulaDisplay(){return o(),u(()=>o().showAtrFormulaDisplay)},get isAtrSlInvalid(){return o(),u(()=>o().isAtrSlInvalid)},get isPriceFetching(){return r(),u(()=>r().isPriceFetching)},get symbolSuggestions(){return r(),u(()=>r().symbolSuggestions)},get showSymbolSuggestions(){return r(),u(()=>r().showSymbolSuggestions)},get symbol(){return n().symbol},set symbol(x){Xe(be,u(n).symbol=x,u(n))},get entryPrice(){return n().entryPrice},set entryPrice(x){Xe(be,u(n).entryPrice=x,u(n))},get useAtrSl(){return n().useAtrSl},set useAtrSl(x){Xe(be,u(n).useAtrSl=x,u(n))},get atrValue(){return n().atrValue},set atrValue(x){Xe(be,u(n).atrValue=x,u(n))},get atrMultiplier(){return n().atrMultiplier},set atrMultiplier(x){Xe(be,u(n).atrMultiplier=x,u(n))},get stopLossPrice(){return n().stopLossPrice},set stopLossPrice(x){Xe(be,u(n).stopLossPrice=x,u(n))},get atrMode(){return n().atrMode},set atrMode(x){Xe(be,u(n).atrMode=x,u(n))},get atrTimeframe(){return n().atrTimeframe},set atrTimeframe(x){Xe(be,u(n).atrTimeframe=x,u(n))},$$events:{showError:_,fetchPrice:()=>K.handleFetchPrice(),toggleAtrInputs:x=>cs(x.detail),selectSymbolSuggestion:x=>K.selectSymbolSuggestion(x.detail),setAtrMode:x=>K.setAtrMode(x.detail),setAtrTimeframe:x=>K.setAtrTimeframe(x.detail),fetchAtr:()=>K.fetchAtr()},$$legacy:!0}),f(bt);var me=v(bt,2);Gl(me,{get calculatedTpDetails(){return o(),u(()=>o().calculatedTpDetails)},get targets(){return n().targets},set targets(x){Xe(be,u(n).targets=x,u(n))},$$events:{change:k,remove:E},$$legacy:!0});var pe=v(me,2);{var we=x=>{var N=Tc();Rt(N,"",{},{color:"var(--danger-color)"});var Q=h(N,!0);f(N),le(ue=>y(Q,ue),[()=>(a(),r(),u(()=>a()(r().errorMessage)))]),X(x,N)};Ze(pe,x=>{r(),u(()=>r().showErrorMessage)&&x(we)})}var Fe=v(pe,2),tt=h(Fe),_t=h(tt);oc(_t,{get isPositionSizeLocked(){return n(),u(()=>n().isPositionSizeLocked)},get showCopyFeedback(){return r(),u(()=>r().showCopyFeedback)},get positionSize(){return o(),u(()=>o().positionSize)},get netLoss(){return o(),u(()=>o().netLoss)},get requiredMargin(){return o(),u(()=>o().requiredMargin)},get entryFee(){return o(),u(()=>o().entryFee)},get liquidationPrice(){return o(),u(()=>o().liquidationPrice)},get breakEvenPrice(){return o(),u(()=>o().breakEvenPrice)},$$events:{toggleLock:()=>K.togglePositionSizeLock(),copy:()=>Y.showFeedback("copy")}});var fe=v(_t,2);{var Se=x=>{var N=Ec(),Q=h(N),ue=h(Q,!0),Re=v(ue);{let ct=Ce(()=>(a(),u(()=>a()("dashboard.totalTradeMetricsTooltip"))));gt(Re,{get text(){return b(ct)}})}f(Q);var Ne=v(Q,2),Ue=h(Ne),We=h(Ue,!0),rt=v(We);{let ct=Ce(()=>(a(),u(()=>a()("dashboard.riskPerTradeCurrencyTooltip"))));gt(rt,{get text(){return b(ct)}})}f(Ue);var it=v(Ue);Rt(it,"",{},{color:"var(--danger-color)"});var ht=h(it,!0);f(it),f(Ne);var qe=v(Ne,2),Qe=h(qe),Be=h(Qe,!0),zt=v(Be);{let ct=Ce(()=>(a(),u(()=>a()("dashboard.totalFeesTooltip"))));gt(zt,{get text(){return b(ct)}})}f(Qe);var Je=v(Qe),At=h(Je,!0);f(Je),f(qe);var Me=v(qe,2),kt=h(Me),nt=h(kt,!0),Qt=v(nt);{let ct=Ce(()=>(a(),u(()=>a()("dashboard.maxPotentialProfitTooltip"))));gt(Qt,{get text(){return b(ct)}})}f(kt);var lt=v(kt);Rt(lt,"",{},{color:"var(--success-color)"});var Lt=h(lt,!0);f(lt),f(Me);var xt=v(Me,2),yt=h(xt),Xt=h(yt,!0),Yt=v(Xt);{let ct=Ce(()=>(a(),u(()=>a()("dashboard.weightedRRTooltip"))));gt(Yt,{get text(){return b(ct)}})}f(yt);var Er=v(yt),jt=h(Er,!0);f(Er),f(xt);var ir=v(xt,2),mr=h(ir),or=h(mr,!0),zr=v(or);{let ct=Ce(()=>(a(),u(()=>a()("dashboard.totalNetProfitTooltip"))));gt(zr,{get text(){return b(ct)}})}f(mr);var Ar=v(mr);Rt(Ar,"",{},{color:"var(--success-color)"});var on=h(Ar,!0);f(Ar),f(ir);var jr=v(ir,2),Br=h(jr),Vr=h(Br,!0),qr=v(Vr);{let ct=Ce(()=>(a(),u(()=>a()("dashboard.soldPositionTooltip"))));gt(qr,{get text(){return b(ct)}})}f(Br);var Wr=v(Br),Qr=h(Wr,!0);f(Wr),f(jr),f(N),le((ct,er,Yn,Kn,Hn,Wn,Qn)=>{y(ue,ct),y(We,er),y(ht,(o(),u(()=>o().riskAmountCurrency))),y(Be,Yn),y(At,(o(),u(()=>o().totalFees))),y(nt,Kn),y(Lt,(o(),u(()=>o().maxPotentialProfit))),y(Xt,Hn),y(jt,(o(),u(()=>o().totalRR))),y(or,Wn),y(on,(o(),u(()=>o().totalNetProfit))),y(Vr,Qn),y(Qr,(o(),u(()=>o().totalPercentSold)))},[()=>(a(),u(()=>a()("dashboard.totalTradeMetrics"))),()=>(a(),u(()=>a()("dashboard.riskPerTradeCurrency"))),()=>(a(),u(()=>a()("dashboard.totalFees"))),()=>(a(),u(()=>a()("dashboard.maxPotentialProfit"))),()=>(a(),u(()=>a()("dashboard.weightedRR"))),()=>(a(),u(()=>a()("dashboard.totalNetProfit"))),()=>(a(),u(()=>a()("dashboard.soldPosition")))]),X(x,N)};Ze(fe,x=>{o(),u(()=>o().showTotalMetricsGroup)&&x(Se)})}f(tt);var Ae=v(tt,2);pr(Ae,5,()=>(o(),u(()=>o().calculatedTpDetails)),dr,(x,N)=>{var Q=Ac(),ue=h(Q),Re=h(ue);f(ue);var Ne=v(ue,2),Ue=h(Ne),We=h(Ue,!0);f(Ue);var rt=v(Ue);let it;var ht=h(rt,!0);f(rt),f(Ne);var qe=v(Ne,2),Qe=h(qe),Be=h(Qe,!0),zt=v(Be);{let er=Ce(()=>(a(),u(()=>a()("dashboard.netProfitTooltip"))));gt(zt,{get text(){return b(er)}})}f(Qe);var Je=v(Qe);Rt(Je,"",{},{color:"var(--success-color)"});var At=h(Je);f(Je),f(qe);var Me=v(qe,2),kt=h(Me),nt=h(kt,!0),Qt=v(nt);{let er=Ce(()=>(a(),u(()=>a()("dashboard.priceChangeTooltip"))));gt(Qt,{get text(){return b(er)}})}f(kt);var lt=v(kt);let Lt;var xt=h(lt);f(lt),f(Me);var yt=v(Me,2),Xt=h(yt),Yt=h(Xt,!0),Er=v(Yt);{let er=Ce(()=>(a(),u(()=>a()("dashboard.returnOnCapitalTooltip"))));gt(Er,{get text(){return b(er)}})}f(Xt);var jt=v(Xt);let ir;var mr=h(jt);f(jt),f(yt);var or=v(yt,2),zr=h(or),Ar=h(zr,!0),on=v(Ar);{let er=Ce(()=>(a(),u(()=>a()("dashboard.partialVolumeTooltip"))));gt(on,{get text(){return b(er)}})}f(zr);var jr=v(zr),Br=h(jr,!0);f(jr),f(or);var Vr=v(or,2),qr=h(Vr),Wr=h(qr,!0);f(qr);var Qr=v(qr),ct=h(Qr,!0);f(Qr),f(Vr),f(Q),le((er,Yn,Kn,Hn,Wn,Qn,ja,Ba,Va,qa,Ga,Ua,Ja,Za,Ya,Ka,Ha)=>{y(Re,`${er??""} ${b(N),u(()=>b(N).index+1)??""} (${Yn??""}%)`),y(We,Kn),it=Rt(rt,"",it,Hn),y(ht,Wn),y(Be,Qn),y(At,`+${ja??""}`),y(nt,Ba),Lt=Rt(lt,"",Lt,Va),y(xt,`${qa??""}%`),y(Yt,Ga),ir=Rt(jt,"",ir,Ua),y(mr,`${Ja??""}%`),y(Ar,Za),y(Br,Ya),y(Wr,Ka),y(ct,Ha)},[()=>(a(),u(()=>a()("dashboard.takeProfit"))),()=>(b(N),u(()=>b(N).percentSold.toFixed(0))),()=>(a(),u(()=>a()("dashboard.riskRewardRatio"))),()=>({color:(b(N),u(()=>b(N).riskRewardRatio.gte(2)?"var(--success-color)":b(N).riskRewardRatio.gte(1.5)?"var(--warning-color)":"var(--danger-color)"))}),()=>(q(De),b(N),u(()=>De(b(N).riskRewardRatio,2))),()=>(a(),u(()=>a()("dashboard.netProfit"))),()=>(q(De),b(N),u(()=>De(b(N).netProfit,2))),()=>(a(),u(()=>a()("dashboard.priceChange"))),()=>({color:(b(N),u(()=>b(N).priceChangePercent.gt(0)?"var(--success-color)":"var(--danger-color)"))}),()=>(q(De),b(N),u(()=>De(b(N).priceChangePercent,2))),()=>(a(),u(()=>a()("dashboard.returnOnCapital"))),()=>({color:(b(N),u(()=>b(N).returnOnCapital.gt(0)?"var(--success-color)":"var(--danger-color)"))}),()=>(q(De),b(N),u(()=>De(b(N).returnOnCapital,2))),()=>(a(),u(()=>a()("dashboard.partialVolume"))),()=>(q(De),b(N),u(()=>De(b(N).partialVolume,4))),()=>(a(),u(()=>a()("dashboard.exitFeeLabel"))),()=>(q(De),b(N),u(()=>De(b(N).exitFee,4)))]),X(x,Q)}),f(Ae);var Ye=v(Ae,2);sc(Ye,{get entryPrice(){return n(),u(()=>n().entryPrice)},get stopLossPrice(){return n(),u(()=>n().stopLossPrice)},get tradeType(){return n(),u(()=>n().tradeType)},get targets(){return n(),u(()=>n().targets)},get calculatedTpDetails(){return o(),u(()=>o().calculatedTpDetails)}});var Ke=v(Ye,2),je=h(Ke);Ti(je);var ot=v(je,2),He=h(ot),Jt=h(He,!0);f(He),he(()=>O("click",He,function(...x){K.addTrade?.apply(this,x)})),ke(He,(x,N)=>ut?.(x,N),()=>({category:"Journal",action:"Click",name:"SaveTrade"}));var wt=v(He,2),Ir=h(wt);Pe(Ir,()=>(q(se),u(()=>se.book))),f(wt),he(()=>O("click",wt,()=>K.uiManager.showReadme("dashboard"))),ke(wt,(x,N)=>ut?.(x,N),()=>({category:"Navigation",action:"Click",name:"ShowInstructions"}));var Sr=v(wt,2);{var Fr=x=>{var N=Lc();let Q;var ue=h(N,!0);f(N),le((Re,Ne)=>{Q=Ge(N,1,"save-feedback",null,Q,Re),y(ue,Ne)},[()=>({visible:r().showSaveFeedback}),()=>(a(),u(()=>a()("dashboard.savedFeedback")))]),X(x,N)};Ze(Sr,x=>{r(),u(()=>r().showSaveFeedback)&&x(Fr)})}f(ot);var Pr=v(ot,2),Mr=h(Pr);za(Mr,{});var Dt=v(Mr,2);wc(Dt,{});var Dr=v(Dt,2),Tt=h(Dr),Kr=h(Tt);Pe(Kr,()=>(q(se),u(()=>se.export))),f(Tt);var Zt=v(Tt,2),gr=h(Zt);Pe(gr,()=>(q(se),u(()=>se.import))),f(Zt),f(Dr),f(Pr),f(Ke),f(Fe),f(B);var Wt=v(B,2),Et=h(Wt),vr=h(Et);f(Et);var Ot=v(Et,2),Hr=h(Ot,!0);f(Ot),he(()=>O("click",Ot,()=>Y.toggleGuideModal(!0))),ke(Ot,(x,N)=>ut?.(x,N),()=>({category:"Navigation",action:"Click",name:"ShowGuide"}));var Or=v(Ot,2);he(()=>O("click",Or,()=>Y.toggleChangelogModal(!0))),ke(Or,(x,N)=>ut?.(x,N),()=>({category:"Navigation",action:"Click",name:"ShowChangelog"})),f(Wt);var kn=v(Wt,2);vc(kn,{});var Tr=v(kn,2);Ql(Tr,{});var xn=v(Tr,2);Sc(xn,{});var Le=v(xn,2);{let x=Ce(()=>(a(),u(()=>a()("app.changelogTitle"))));_n(Le,{get isOpen(){return r(),u(()=>r().showChangelogModal)},get title(){return b(x)},extraClasses:"modal-size-instructions",$$events:{close:()=>Y.toggleChangelogModal(!1)},children:(N,Q)=>{var ue=Rc(),Re=h(ue);Pe(Re,()=>b(p)),f(ue),X(N,ue)},$$slots:{default:!0}})}var M=v(Le,2);{let x=Ce(()=>(a(),u(()=>a()("app.guideTitle"))));_n(M,{get isOpen(){return r(),u(()=>r().showGuideModal)},get title(){return b(x)},extraClasses:"modal-size-instructions",$$events:{close:()=>Y.toggleGuideModal(!1)},children:(N,Q)=>{var ue=$c(),Re=h(ue);Pe(Re,()=>b(m)),f(ue),X(N,ue)},$$slots:{default:!0}})}le((x,N,Q,ue,Re,Ne,Ue,We,rt,it,ht,qe,Qe,Be,zt,Je,At,Me,kt,nt)=>{y(H,x),J(V,"title",N),y(Z,Q),y(ge,ue),J(ye,"title",Re),J(ye,"aria-label",Ne),J(Ee,"title",Ue),Ee.disabled=(i(),u(()=>!i().selectedPreset)),J(ze,"title",We),J(mt,"aria-label",rt),J(mt,"title",b(d)),J(Mt,"title",it),y(sr,ht),J(je,"placeholder",qe),He.disabled=(o(),u(()=>o().positionSize==="-")),y(Jt,Qe),J(wt,"title",Be),J(wt,"aria-label",zt),J(Tt,"title",Je),J(Tt,"aria-label",At),J(Zt,"title",Me),J(Zt,"aria-label",kt),y(vr,`Version ${u(()=>"0.0.1")??""}`),y(Hr,nt)},[()=>(a(),u(()=>a()("app.title"))),()=>(a(),u(()=>a()("app.journalButtonTitle"))),()=>(a(),u(()=>a()("app.journalButton"))),()=>(a(),u(()=>a()("dashboard.presetLoad"))),()=>(a(),u(()=>a()("dashboard.savePresetTitle"))),()=>(a(),u(()=>a()("dashboard.savePresetAriaLabel"))),()=>(a(),u(()=>a()("dashboard.deletePresetTitle"))),()=>(a(),u(()=>a()("dashboard.resetButtonTitle"))),()=>(a(),u(()=>a()("dashboard.themeSwitcherAriaLabel"))),()=>(a(),u(()=>a()("app.journalButtonTitle"))),()=>(a(),u(()=>a()("app.journalButton"))),()=>(a(),u(()=>a()("dashboard.tradeNotesPlaceholder"))),()=>(a(),u(()=>a()("dashboard.addTradeToJournal"))),()=>(a(),u(()=>a()("dashboard.showInstructionsTitle"))),()=>(a(),u(()=>a()("dashboard.showInstructionsAriaLabel"))),()=>(a(),u(()=>a()("app.backupButtonTitle"))),()=>(a(),u(()=>a()("app.backupButtonAriaLabel"))),()=>(a(),u(()=>a()("app.restoreButtonTitle"))),()=>(a(),u(()=>a()("app.restoreButtonAriaLabel"))),()=>(a(),u(()=>a()("app.guideButton")))]),O("change",j,S),O("change",ae,$),Bn(ae,()=>i().selectedPreset,x=>Xe(Mn,u(i).selectedPreset=x,u(i))),Vn(je,()=>n().tradeNotes,x=>Xe(be,u(n).tradeNotes=x,u(n))),O("click",Tt,w),O("click",Zt,L),X(e,C),It(),l()}export{Oc as component};
